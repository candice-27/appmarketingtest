webpackJsonp([7],{"/KSa":function(e,t){},"4imZ":function(e,t){},"7buO":function(e,t){},AiOh:function(e,t,o){"use strict";var n=o("Dd8w"),s=o.n(n),r=o("0xDb"),a=o("7+uW"),i=o("NYxO"),u=o("Au9i"),c=o("zdYc"),l=o("RrjH"),p=o("2Ohe"),f=o("WdeC"),m=o("8BZo"),h=o("otx3"),d=o("2wM2"),v=o("3buF"),C=o("CqDD"),g=(o("/ocq"),new r.a);a.default.component(u.Picker.name,u.Picker),a.default.component(u.Popup.name,u.Popup);var w={name:"buyReasonSelect",components:{customerLi:f.a},data:function(){return{slots:[{values:[],defaultIndex:0}],popupVisible:!1,key:!1,color:"color: #999",typeList:[],code:"",value:""}},computed:s()({},Object(i.d)({buyReason:function(e){return e.select.buyReason},newCustomerInfo:function(e){return e.customer.newCustomerInfo}})),created:function(){this.init()},methods:s()({},Object(i.c)(["setBuyReason"]),{init:function(){var e=this;g.getType("REASON_PURCHASE").then(function(t){if(t.data&&t.data.length){e.typeList=t.data;var o=Object(C.f)(e.typeList);if(e.slots[0].values=o,e.newCustomerInfo&&e.newCustomerInfo.buyReason){e.color="color: #363636",e.setBuyReason(e.newCustomerInfo.buyReason);var n=Object(C.d)(e.newCustomerInfo.buyReason,e.typeList);e.$emit("brCodeChange",n),e.key=!1}}}).catch(function(t){510===t&&e.init()})},selectReason:function(){this.popupVisible=!0},onValuesChange:function(e,t){this.code=Object(C.d)(t[0],this.typeList),this.value=t[0]},cancel:function(){this.popupVisible=!1},update:function(){this.color="color: #363636",this.$emit("brCodeChange",this.code),this.$emit("buyReasonChange",this.value),this.popupVisible=!1}})},I={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("li",{staticClass:"sourceSelect"},[o("ul",[o("customerLi",{tag:"li",attrs:{leftText:"购买原因",icon:!0},nativeOn:{click:function(t){return e.selectReason(t)}}},[o("span",{style:e.color},[e._v(e._s(e.buyReason||"请选择购买原因"))])]),e._v(" "),o("li",[o("mt-popup",{attrs:{position:"bottom"},model:{value:e.popupVisible,callback:function(t){e.popupVisible=t},expression:"popupVisible"}},[o("mt-picker",{ref:"buyReasonPicker",attrs:{slots:e.slots,showToolbar:!0},on:{change:e.onValuesChange}},[o("div",{staticClass:"btn-group"},[o("div",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),o("div",{on:{click:e.update}},[e._v("确定")])])])],1)],1)],1)])},staticRenderFns:[]};var y=o("VU/8")(w,I,!1,function(e){o("7buO")},null,null).exports,b=new r.a;a.default.component(u.Picker.name,u.Picker),a.default.component(u.Popup.name,u.Popup);var k={name:"styleSelect",components:{customerLi:f.a},data:function(){return{slots:[{values:[],defaultIndex:0}],popupVisible:!1,key:!1,color:"color: #999",typeList:[],code:"",value:""}},computed:s()({},Object(i.d)({stylePref:function(e){return e.select.stylePref},newCustomerInfo:function(e){return e.customer.newCustomerInfo}})),created:function(){this.init()},methods:s()({},Object(i.c)(["setStylePref"]),{init:function(){var e=this;b.getType("DR_STYLE_PRE").then(function(t){if(t.data&&t.data.length){e.typeList=t.data;var o=Object(C.f)(e.typeList);if(e.slots[0].values=o,e.newCustomerInfo&&e.newCustomerInfo.stylePref){e.color="color: #363636",e.setStylePref(e.newCustomerInfo.stylePref);var n=Object(C.d)(e.newCustomerInfo.stylePref,e.typeList);e.$emit("spCodeChange",n),e.key=!1}}}).catch(function(t){510===t&&e.init()})},selectStyle:function(){this.popupVisible=!0},onValuesChange:function(e,t){this.code=Object(C.d)(t[0],this.typeList),this.value=t[0]},cancel:function(){this.popupVisible=!1},update:function(){this.color="color: #363636",this.$emit("spCodeChange",this.code),this.$emit("stylePrefChange",this.value),this.popupVisible=!1}})},x={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("li",{staticClass:"sourceSelect"},[o("ul",[o("customerLi",{tag:"li",attrs:{leftText:"装修风格",icon:!0},nativeOn:{click:function(t){return e.selectStyle(t)}}},[o("span",{style:e.color},[e._v(e._s(e.stylePref||"请选择装修风格"))])]),e._v(" "),o("li",[o("mt-popup",{attrs:{position:"bottom"},model:{value:e.popupVisible,callback:function(t){e.popupVisible=t},expression:"popupVisible"}},[o("mt-picker",{ref:"stylePicker",attrs:{slots:e.slots,showToolbar:!0},on:{change:e.onValuesChange}},[o("div",{staticClass:"btn-group"},[o("div",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),o("div",{on:{click:e.update}},[e._v("确定")])])])],1)],1)],1)])},staticRenderFns:[]};var S=o("VU/8")(k,x,!1,function(e){o("lU09")},null,null).exports,V=new r.a;a.default.component(u.Picker.name,u.Picker),a.default.component(u.Popup.name,u.Popup);var _={name:"colorSelect",components:{customerLi:f.a},data:function(){return{slots:[{values:[],defaultIndex:0}],popupVisible:!1,key:!1,color:"color: #999",typeList:[],colorName:"",code:""}},computed:s()({},Object(i.d)({colorPref:function(e){return e.select.colorPref},newCustomerInfo:function(e){return e.customer.newCustomerInfo}})),created:function(){this.init()},methods:s()({},Object(i.c)(["setColorPref"]),{init:function(){var e=this;V.getType("DR_COLOR_PRE").then(function(t){if(t.data&&t.data.length){e.typeList=t.data;var o=Object(C.f)(e.typeList);if(e.slots[0].values=o,e.newCustomerInfo&&e.newCustomerInfo.colorPref){e.color="color: #363636",e.setColorPref(e.newCustomerInfo.colorPref);var n=Object(C.d)(e.newCustomerInfo.colorPref,e.typeList);e.$emit("colorCodeChange",n),e.key=!1}}}).catch(function(t){510===t&&e.init()})},selectColorPref:function(){this.popupVisible=!0},onValuesChange:function(e,t){this.code=Object(C.d)(t[0],this.typeList),this.colorName=t[0]},cancel:function(){this.popupVisible=!1},update:function(){this.color="color: #363636",this.$emit("colorCodeChange",this.code),this.$emit("colorChange",this.colorName),this.popupVisible=!1}})},P={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("li",{staticClass:"colorSelect"},[o("ul",[o("customerLi",{tag:"li",attrs:{leftText:"颜色偏好",icon:!0},nativeOn:{click:function(t){return e.selectColorPref(t)}}},[o("span",{style:e.color},[e._v(e._s(e.colorPref||"请选择颜色偏好"))])]),e._v(" "),o("li",[o("mt-popup",{attrs:{position:"bottom"},model:{value:e.popupVisible,callback:function(t){e.popupVisible=t},expression:"popupVisible"}},[o("mt-picker",{ref:"colorPicker",attrs:{slots:e.slots,showToolbar:!0},on:{change:e.onValuesChange}},[o("div",{staticClass:"btn-group"},[o("div",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),o("div",{on:{click:e.update}},[e._v("确定")])])])],1)],1)],1)])},staticRenderFns:[]};var L=o("VU/8")(_,P,!1,function(e){o("oYUs")},null,null).exports,D=new r.a;a.default.component(u.Picker.name,u.Picker),a.default.component(u.Popup.name,u.Popup);var N={name:"progressSelect",components:{customerLi:f.a},data:function(){return{slots:[{values:[],defaultIndex:0}],popupVisible:!1,key:!1,color:"color: #999",typeList:[],code:"",value:""}},computed:s()({},Object(i.d)({progress:function(e){return e.select.progress},newCustomerInfo:function(e){return e.customer.newCustomerInfo}})),created:function(){this.init()},methods:s()({},Object(i.c)(["setProgress"]),{init:function(){var e=this;D.getType("DR_FITUP_PROGRESS").then(function(t){if(t.data&&t.data.length){e.typeList=t.data;var o=Object(C.f)(e.typeList);if(e.slots[0].values=o,e.newCustomerInfo&&e.newCustomerInfo.progress){e.color="color: #363636",e.setProgress(e.newCustomerInfo.progress);var n=Object(C.d)(e.newCustomerInfo.progress,e.typeList);e.$emit("pgCodeChange",n),e.key=!1}}}).catch(function(t){510===t&&e.init()})},selectProgress:function(){this.popupVisible=!0},onValuesChange:function(e,t){this.code=Object(C.d)(t[0],this.typeList),this.value=t[0]},cancel:function(){this.popupVisible=!1},update:function(){this.color="color: #363636",this.$emit("pgCodeChange",this.code),this.$emit("progressChange",this.value),this.popupVisible=!1}})},T={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("li",{staticClass:"progressSelect"},[o("ul",[o("customerLi",{tag:"li",attrs:{leftText:"装修进度",icon:!0},nativeOn:{click:function(t){return e.selectProgress(t)}}},[o("span",{style:e.color},[e._v(e._s(e.progress||"请选择装修进度"))])]),e._v(" "),o("li",[o("mt-popup",{attrs:{position:"bottom"},model:{value:e.popupVisible,callback:function(t){e.popupVisible=t},expression:"popupVisible"}},[o("mt-picker",{ref:"progressPicker",attrs:{slots:e.slots,showToolbar:!0},on:{change:e.onValuesChange}},[o("div",{staticClass:"btn-group"},[o("div",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),o("div",{on:{click:e.update}},[e._v("确定")])])])],1)],1)],1)])},staticRenderFns:[]};var A=o("VU/8")(N,T,!1,function(e){o("f5WY")},null,null).exports;a.default.component(u.Picker.name,u.Picker),a.default.component(u.Popup.name,u.Popup);var B={name:"leaveStoreSelect",components:{customerLi:f.a},props:["start"],data:function(){return{firSlots:[{flex:.2,values:["6","7","8","9"],defaultIndex:0,className:"slot1",textAlign:"center"},{divider:!0,content:".",className:"slot2"},{flex:.2,values:["0","1","2","3","4","5","6","7","8","9"],defaultIndex:0,className:"slot3",textAlign:"center"},{divider:!0,content:"折",className:"slot2"}],popupVisible:!1,key:!1,color:"color: #999",firstCount:"",secondCount:"",discount:"",key1:!1,key2:!1}},computed:s()({},Object(i.d)({discountVal:function(e){return e.select.discountVal},newCustomerInfo:function(e){return e.customer.newCustomerInfo}})),mounted:function(){this.init()},methods:s()({},Object(i.c)(["setDiscountVal"]),{init:function(){this.newCustomerInfo&&this.newCustomerInfo.argreeDiscount&&(this.color="color: #363636",this.setDiscountVal(this.newCustomerInfo.argreeDiscount),this.key1=!1,this.key2=!1)},firChange:function(e,t){this.discount=e.getValues().join(".")+"折"},selectDiscount:function(){this.popupVisible=!0},cancel:function(){this.popupVisible=!1},update:function(){this.color="color: #363636",this.$emit("discountChange",this.discount),this.popupVisible=!1}})},O={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("li",{staticClass:"discountSelect"},[o("ul",[o("customerLi",{tag:"li",attrs:{leftText:"已谈折扣",icon:!0},nativeOn:{click:function(t){return e.selectDiscount(t)}}},[o("span",{style:e.color},[e._v(e._s(e.discountVal||"请选择已谈折扣"))])]),e._v(" "),o("mt-popup",{attrs:{position:"bottom"},model:{value:e.popupVisible,callback:function(t){e.popupVisible=t},expression:"popupVisible"}},[o("mt-picker",{ref:"firPicker",attrs:{slots:e.firSlots,showToolbar:!0},on:{change:e.firChange}},[o("div",{staticClass:"btn-group"},[o("div",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),o("div",{on:{click:e.update}},[e._v("确定")])])])],1)],1)])},staticRenderFns:[]};var R=o("VU/8")(B,O,!1,function(e){o("AxED")},null,null).exports,$=o("vGYV"),E={props:["intentionVal"],data:function(){return{keyBtns:$.a.btnList(["A","B","C","D"]),val:""}},created:function(){this.init()},computed:s()({},Object(i.d)({newCustomerInfo:function(e){return e.customer.newCustomerInfo}})),methods:{init:function(){if(this.newCustomerInfo.level){var e="A"===this.newCustomerInfo.level?0:"B"===this.newCustomerInfo.level?1:2;$.a.changeBtnStatus(this.keyBtns,e)}else $.a.changeBtnStatus(this.keyBtns,0)},keySelect:function(e){this.keyBtns[e].status||(this.val=0===e?"A":1===e?"B":2===e?"C":"D",this.intentionVal(this.val),$.a.changeBtnStatus(this.keyBtns,e))}}},j={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"intentionSelect"},[o("h3",[e._v("意向分类")]),e._v(" "),o("ul",{staticClass:"select"},e._l(e.keyBtns,function(t,n){return o("li",{key:"keyBtns"+n,class:{on:t.status}},[o("button",{on:{click:function(t){return e.keySelect(n)}}},[e._v(e._s(t.name))])])}),0)])},staticRenderFns:[]};var F=o("VU/8")(E,j,!1,function(e){o("/KSa")},"data-v-d2853d86",null).exports,U={props:["urgentVal"],data:function(){return{urgencyBtns:$.a.btnList(["是","否"]),val:""}},computed:s()({},Object(i.d)({newCustomerInfo:function(e){return e.customer.newCustomerInfo}})),created:function(){this.init()},methods:{init:function(){if("false"===this.newCustomerInfo.urgency||"true"===this.newCustomerInfo.urgency){var e="false"===this.newCustomerInfo.urgency?1:0;$.a.changeBtnStatus(this.urgencyBtns,e)}else $.a.changeBtnStatus(this.urgencyBtns,1)},urgencySelect:function(e){this.urgencyBtns[e].status||(this.val=e?0:1,this.urgentVal(this.val),$.a.changeBtnStatus(this.urgencyBtns,e))}}},M={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"urgentSelect"},[o("h3",[e._v("是否紧急")]),e._v(" "),o("ul",{staticClass:"select"},e._l(e.urgencyBtns,function(t,n){return o("li",{key:"urgencyBtns"+n,class:{on:t.status}},[o("button",{on:{click:function(t){return e.urgencySelect(n)}}},[e._v(e._s(t.name))])])}),0)])},staticRenderFns:[]};var Y=o("VU/8")(U,M,!1,function(e){o("BINO")},"data-v-4eacb1c0",null).exports,Z=new r.a;a.default.component(u.Picker.name,u.Picker),a.default.component(u.Popup.name,u.Popup);var q={name:"styleSelect",components:{customerLi:f.a},data:function(){return{slots:[{values:[],defaultIndex:0}],popupVisible:!1,key:!1,color:"color: #999",typeList:[],code:"",value:""}},computed:s()({},Object(i.d)({houseType:function(e){return e.select.houseType},newCustomerInfo:function(e){return e.customer.newCustomerInfo}})),created:function(){this.init()},methods:s()({},Object(i.c)(["setHouseType"]),{init:function(){var e=this;Z.getType("DR_APARTMENT_TYPE").then(function(t){if(t.data&&t.data.length){e.typeList=t.data;var o=Object(C.f)(e.typeList);e.slots[0].values=o,e.newCustomerInfo&&e.newCustomerInfo.apartmentType&&(e.color="color: #363636",e.setHouseType(e.newCustomerInfo.apartmentType),e.key=!1)}}).catch(function(t){510===t&&e.init()})},selectHouseType:function(){this.popupVisible=!0},onValuesChange:function(e,t){this.code=Object(C.d)(t[0],this.typeList),this.value=t[0]},cancel:function(){this.popupVisible=!1},update:function(){this.color="color: #363636",this.$emit("htCodeChange",this.code),this.$emit("houseTypeChange",this.value),this.popupVisible=!1}})},z={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("li",{staticClass:"sourceSelect"},[o("ul",[o("customerLi",{tag:"li",attrs:{leftText:"户型大小",icon:!0},nativeOn:{click:function(t){return e.selectHouseType(t)}}},[o("span",{style:e.color},[e._v(e._s(e.houseType||"请选择户型大小"))])]),e._v(" "),o("li",[o("mt-popup",{attrs:{position:"bottom"},model:{value:e.popupVisible,callback:function(t){e.popupVisible=t},expression:"popupVisible"}},[o("mt-picker",{ref:"houseTypePicker",attrs:{slots:e.slots,showToolbar:!0},on:{change:e.onValuesChange}},[o("div",{staticClass:"btn-group"},[o("div",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),o("div",{on:{click:e.update}},[e._v("确定")])])])],1)],1)],1)])},staticRenderFns:[]};var W=o("VU/8")(q,z,!1,function(e){o("rEOb")},null,null).exports;a.default.component(u.Picker.name,u.Picker),a.default.component(u.Popup.name,u.Popup);var G={name:"selectElevator",components:{customerLi:f.a},data:function(){return{slots:[{values:["有","无"],defaultIndex:0}],popupVisible:!1,key:!1,color:"color: #999",value:""}},computed:s()({},Object(i.d)({elevatorVal:function(e){return e.select.elevatorVal},newCustomerInfo:function(e){return e.customer.newCustomerInfo}})),created:function(){this.init()},methods:s()({},Object(i.c)(["setElevatorVal","setNewCustomerInfo"]),{init:function(){if(this.newCustomerInfo.elevator){this.color="color: #363636";var e;e="Y"===this.newCustomerInfo.elevator?"有":"无",this.setElevatorVal(e)}},selectElevator:function(){this.color="color: #363636",this.popupVisible=!0},onValuesChange:function(e,t){this.value=t[0]},cancel:function(){this.popupVisible=!1},update:function(){this.$emit("elevatorChange",this.value),this.popupVisible=!1}})},H={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("li",{staticClass:"selectElevator"},[o("ul",[o("customerLi",{tag:"li",attrs:{leftText:"有无电梯",icon:!0},nativeOn:{click:function(t){return e.selectElevator(t)}}},[o("span",{style:e.color},[e._v(e._s(e.elevatorVal||"请选择有无电梯"))])]),e._v(" "),o("li",[o("mt-popup",{attrs:{position:"bottom"},model:{value:e.popupVisible,callback:function(t){e.popupVisible=t},expression:"popupVisible"}},[o("mt-picker",{ref:"elevatorPicker",attrs:{slots:e.slots,showToolbar:!0},on:{change:e.onValuesChange}},[o("div",{staticClass:"btn-group"},[o("div",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),o("div",{on:{click:e.update}},[e._v("确定")])])])],1)],1)],1)])},staticRenderFns:[]};var J=o("VU/8")(G,H,!1,function(e){o("hDT0")},null,null).exports;a.default.component(u.Picker.name,u.Picker);var X={name:"arrivalDate",components:{customerLi:f.a},data:function(){return{today:new Date,day:"",timeColor:""}},computed:s()({},Object(i.d)({newCustomerInfo:function(e){return e.customer.newCustomerInfo}})),created:function(){},mounted:function(){this.day=$.a.indexTimeB(this.today)[1],this.newCustomerInfo.arrivalDate&&(this.timeColor="color: #363636")},methods:{selectTime:function(){this.$refs.DatePicker.open()},setTime:function(e){this.timeColor="color: #363636",this.$set(this.newCustomerInfo,"arrivalDate",$.a.indexTimeB(e)[1])},turnDate:function(e){if(e){var t=e.split("-");return t.length>1?t[0]+"年"+t[1]+"月"+t[2]+"日":e}}}},Q={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("li",{staticClass:"arrivalDate"},[o("ul",[o("customerLi",{tag:"li",attrs:{leftText:"创建日期",start:"*",icon:!0},nativeOn:{click:function(t){return e.selectTime(t)}}},[o("span",{style:e.timeColor},[e._v(e._s(e.newCustomerInfo.arrivalDate||e.day))])]),e._v(" "),o("li",[o("mt-datetime-picker",{ref:"DatePicker",attrs:{type:"date",endDate:new Date,"year-format":"{value} 年","month-format":"{value} 月","date-format":"{value} 日"},on:{confirm:e.setTime},model:{value:e.today,callback:function(t){e.today=t},expression:"today"}})],1)],1)])},staticRenderFns:[]};var K=o("VU/8")(X,Q,!1,function(e){o("So3S")},null,null).exports;a.default.component(u.Picker.name,u.Picker);var ee={name:"deliverDate",components:{customerLi:f.a},data:function(){return{today:new Date,timeColor:"color: #999"}},computed:s()({},Object(i.d)({newCustomerInfo:function(e){return e.customer.newCustomerInfo}})),created:function(){},mounted:function(){this.newCustomerInfo.deliverDate&&(this.timeColor="color: #363636")},methods:{selectFollowTime:function(){this.$refs.followDatePicker.open()},setFollowTime:function(e){this.timeColor="color: #363636",this.$set(this.newCustomerInfo,"deliverDate",$.a.indexTimeB(e)[1])},turnDate:function(e){if(e){var t=e.split("-");return t.length>1?t[0]+"年"+t[1]+"月"+t[2]+"日":e}}}},te={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("li",{staticClass:"deliverDate"},[o("ul",[o("customerLi",{tag:"li",attrs:{leftText:"需求日期",icon:!0},nativeOn:{click:function(t){return e.selectFollowTime(t)}}},[o("span",{style:e.timeColor},[e._v(e._s(e.turnDate(e.newCustomerInfo.deliverDate)||"请选择需求日期"))])]),e._v(" "),o("li",[o("mt-datetime-picker",{ref:"followDatePicker",attrs:{type:"date",startDate:new Date,"year-format":"{value} 年","month-format":"{value} 月","date-format":"{value} 日"},on:{confirm:e.setFollowTime},model:{value:e.today,callback:function(t){e.today=t},expression:"today"}})],1)],1)])},staticRenderFns:[]};var oe=o("VU/8")(ee,te,!1,function(e){o("jSRI")},null,null).exports,ne=(o("TYi7"),new r.a);a.default.component(u.Picker.name,u.Picker),a.default.component(u.Popup.name,u.Popup),a.default.component(u.DatetimePicker.name,u.DatetimePicker);var se={name:"newDemand",props:["btns","fromName","changeCode","type","addressType"],components:{customerLi:f.a,bigBtn:m.a,shopSelect:d.a,leaveStoreSelect:c.a,sourceSelect:v.a,discountSelect:R,urgentSelect:Y,intentionSelect:F,BuyReason:y,StylePref:S,progressSelect:A,colorSelect:L,houseType:W,elevatorSelect:J,YanintentionSelect:h.a,areaSelect:p.a,addressSelect:l.a,arrivalDate:K,deliverDate:oe},data:function(){return{shopId:"",timeColor:"color: #999",today:new Date,color:"color: #999",styleColor:"color: #999",proColor:"color: #999",Color:"color: #999",shops:"",day:"",codeList:{},productList:[],shopName:""}},computed:s()({},Object(i.d)({newCustomerInfo:function(e){return e.customer.newCustomerInfo},shopVal:function(e){return e.select.shopVal},leaveStoreVal:function(e){return e.select.leaveStoreVal},discountVal:function(e){return e.select.discountVal},shopList:function(e){return e.chooseShop.shopList},checkedList:function(e){return e.checkedList}})),watch:{fromName:function(){"NewCustomer"===this.fromName&&"demand"==this.type?this.setInitData():"NewCustomer"!=this.fromName&&(this.setIntentionProduct(),this.hasAddressId(),this.initShop())}},mounted:function(){this.day=$.a.indexTimeB(this.today)[1]},methods:s()({},Object(i.c)(["setAddressId","initShopList","getShopVal","setCheckedList","setNewCustomerInfo","setShopVal","setLeaveStoreVal","setDiscountVal","setSourceVal","setBuyReason","setStylePref","setProgress","setColorPref","setHouseType","setElevatorVal"]),{setInitData:function(){this.$set(this.newCustomerInfo,"arrivalDate",this.day),this.$set(this.newCustomerInfo,"source","自然进店"),this.setNewCustomerInfo(this.newCustomerInfo),this.codeList.sourceCode="Natural",this.changeCode(this.codeList),this.initShop(),this.getShopVal(),this.setBuyReason(""),this.setLeaveStoreVal(""),this.setDiscountVal(""),this.setCheckedList([]),this.setAddressId("")},initShop:function(){var e=this,t=this.$route.query.orgId,o=JSON.parse(localStorage.getItem("shops"));o&&o.length&&o.map(function(o,n){o.crmId===t&&(e.shopName=o.name,e.shopId=o.id)}),this.newCustomerInfo.shopId=this.shopId},hasAddressId:function(){var e=this;if(this.$store.state.addressId){var t=this.$store.state.addressId;ne.getAddress(t).then(function(t){1==t.status?(e.$set(e.newCustomerInfo,"provinceName",t.data.provinceName),e.$set(e.newCustomerInfo,"cityName",t.data.cityName),e.$set(e.newCustomerInfo,"districtName",t.data.districtName),e.newCustomerInfo.apartmentTypeName=t.data.apartmentTypeName,e.newCustomerInfo.elevatorName="Y"===t.data.elevator?"有":"无",e.newCustomerInfo.addressId=t.data.id,e.setNewCustomerInfo(e.newCustomerInfo)):$.a.tips("地址选择失败")}).catch(function(t){510===t&&e.hasAddressId()})}},toSelectAddress:function(){this.$router.push({name:"selectAddress",params:{customerId:this.$route.query.id},query:{type:"intention"}})},addIntention:function(){this.$router.push({name:"intentionProduct",query:{redirect:this.$route.path}})},setIntentionProduct:function(){var e=this;if(this.checkedList&&this.checkedList.length){var t=[];this.checkedList.map(function(o,n){var s={id:o.crmId,quantity:o.quantity};e.productList.push(o.goodsName),t.push(s)}),this.newCustomerInfo.productArr=t,this.setNewCustomerInfo(this.newCustomerInfo)}},getShopVal:function(){var e=void 0;return this.shopList&&this.shopList.length&&this.shopList.forEach(function(t,o){t.status&&(e=t.name)}),e},getShopId:function(e){var t=this;this.shops&&this.shops.length&&this.shops.forEach(function(o,n){o.name===e&&(t.shopId=o.id)}),this.newCustomerInfo.shopId=this.shopId,this.setNewCustomerInfo(this.newCustomerInfo)},areaChange:function(e){this.$set(this.newCustomerInfo,"provinceName",e.provinceName),this.$set(this.newCustomerInfo,"cityName",e.cityName),this.$set(this.newCustomerInfo,"countryName",e.countryName),this.newCustomerInfo.province=e.provinceCode,this.newCustomerInfo.city=e.cityCode,this.newCustomerInfo.area=e.countyCode,this.setNewCustomerInfo(this.newCustomerInfo)},leaveStoreChange:function(e){this.setLeaveStoreVal(e),this.newCustomerInfo.residentTime=e,this.setNewCustomerInfo(this.newCustomerInfo)},turnDate:function(e){if(e){var t=e.split("-");return t.length>1?t[0]+"年"+t[1]+"月"+t[2]+"日":e}},sourceChange:function(e){this.setSourceVal(e),this.newCustomerInfo.source=e,this.setNewCustomerInfo(this.newCustomerInfo)},codeChange:function(e){this.codeList.sourceCode=e,this.changeCode(this.codeList)},buyReasonChange:function(e){this.setBuyReason(e),this.newCustomerInfo.buyReason=e,this.setNewCustomerInfo(this.newCustomerInfo)},brCodeChange:function(e){this.codeList.brCode=e,this.changeCode(this.codeList)},houseTypeChange:function(e){this.setHouseType(e),this.newCustomerInfo.apartmentType=e,this.setNewCustomerInfo(this.newCustomerInfo)},htCodeChange:function(e){this.codeList.htCode=e,this.changeCode(this.codeList)},elevatorChange:function(e){this.setElevatorVal(e),e&&(this.newCustomerInfo.elevator="有"===e?"Y":"N",this.setNewCustomerInfo(this.newCustomerInfo))},stylePrefChange:function(e){this.setStylePref(e),this.newCustomerInfo.stylePref=e,this.setNewCustomerInfo(this.newCustomerInfo)},spCodeChange:function(e){this.codeList.spCode=e,this.changeCode(this.codeList)},progressChange:function(e){this.setProgress(e),this.newCustomerInfo.progress=e,this.setNewCustomerInfo(this.newCustomerInfo)},pgCodeChange:function(e){this.codeList.pgCode=e,this.changeCode(this.codeList)},colorChange:function(e){this.setColorPref(e),this.newCustomerInfo.colorPref=e,this.setNewCustomerInfo(this.newCustomerInfo)},colorCodeChange:function(e){this.codeList.colorCode=e,this.changeCode(this.codeList)},discountChange:function(e){this.setDiscountVal(e),this.newCustomerInfo.argreeDiscount=e,this.setNewCustomerInfo(this.newCustomerInfo)},intentionVal:function(e){this.newCustomerInfo.level=e,this.setNewCustomerInfo(this.newCustomerInfo)},urgentVal:function(e){this.newCustomerInfo.urgency=e?"true":"false",this.setNewCustomerInfo(this.newCustomerInfo)}})},re={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"newDemand"},[o("ul",[o("customerLi",{tag:"li",attrs:{leftText:"意向产品",icon:!0},nativeOn:{click:function(t){return e.addIntention(t)}}},[o("span",[e._v(e._s(e.productList&&e.productList.length?e.productList.join("、"):"请选择意向产品"))])]),e._v(" "),o("customerLi",{tag:"li",attrs:{leftText:"所属门店",start:"*"}},[o("span",{staticClass:"shop"},[e._v(e._s(e.shopName))])]),e._v(" "),o("arrivalDate",{tag:"li"}),e._v(" "),o("sourceSelect",{tag:"li",on:{sourceChange:e.sourceChange,codeChange:e.codeChange}}),e._v(" "),"intention"!==e.addressType?[o("customerLi",{tag:"li",attrs:{leftText:"客户地区",start:"*"}},[o("span",[e._v(e._s(e.newCustomerInfo.provinceName+e.newCustomerInfo.cityName+e.newCustomerInfo.countryName||"请选择客户地区"))])]),e._v(" "),o("customerLi",{tag:"li",attrs:{leftText:"客户地址",start:"*"}},[o("span",[e._v(e._s(e.newCustomerInfo.address||"请选择客户地址"))])]),e._v(" "),o("houseType",{tag:"li",on:{houseTypeChange:e.houseTypeChange,htCodeChange:e.htCodeChange}}),e._v(" "),o("elevatorSelect",{tag:"li",on:{elevatorChange:e.elevatorChange}})]:[o("customerLi",{tag:"li",attrs:{leftText:"客户地址",start:"*",icon:!0},nativeOn:{click:function(t){return e.toSelectAddress(t)}}},[o("span",[e._v(e._s(e.newCustomerInfo.provinceName+e.newCustomerInfo.cityName+e.newCustomerInfo.districtName||"请选择客户地址"))])]),e._v(" "),o("customerLi",{tag:"li",attrs:{leftText:"户型大小"}},[o("span",[e._v(e._s(e.newCustomerInfo.apartmentTypeName||"请先选择客户地址"))])]),e._v(" "),o("customerLi",{tag:"li",attrs:{leftText:"有无电梯"}},[o("span",[e._v(e._s(e.newCustomerInfo.elevatorName||"请先选择客户地址"))])])],e._v(" "),o("BuyReason",{tag:"li",on:{buyReasonChange:e.buyReasonChange,brCodeChange:e.brCodeChange}}),e._v(" "),o("StylePref",{tag:"li",on:{stylePrefChange:e.stylePrefChange,spCodeChange:e.spCodeChange}}),e._v(" "),o("progressSelect",{tag:"li",on:{progressChange:e.progressChange,pgCodeChange:e.pgCodeChange}}),e._v(" "),o("customerLi",{tag:"li",attrs:{leftText:"竞品产品"}},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.newCustomerInfo.competingGoods,expression:"newCustomerInfo.competingGoods",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请填写竞品产品",oninput:"if(value.length>100)value=value.slice(0,100)"},domProps:{value:e.newCustomerInfo.competingGoods},on:{input:function(t){t.target.composing||e.$set(e.newCustomerInfo,"competingGoods",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),o("colorSelect",{tag:"li",on:{colorChange:e.colorChange,colorCodeChange:e.colorCodeChange}}),e._v(" "),o("customerLi",{tag:"li",attrs:{leftText:"预算金额"}},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.newCustomerInfo.budget,expression:"newCustomerInfo.budget",modifiers:{trim:!0}}],attrs:{type:"number",onkeypress:"if(event.keyCode == 101){return false}",placeholder:"请填写预算金额",oninput:"if(value.length>8)value=value.slice(0,8)"},domProps:{value:e.newCustomerInfo.budget},on:{input:function(t){t.target.composing||e.$set(e.newCustomerInfo,"budget",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),o("deliverDate",{tag:"li"}),e._v(" "),o("customerLi",{tag:"li",attrs:{leftText:"已交定金"}},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.newCustomerInfo.depositPaid,expression:"newCustomerInfo.depositPaid",modifiers:{trim:!0}}],attrs:{type:"number",onkeypress:"if(event.keyCode == 101){return false}",placeholder:"请填写已交金额",oninput:"if(value.length>8)value=value.slice(0,8)"},domProps:{value:e.newCustomerInfo.depositPaid},on:{input:function(t){t.target.composing||e.$set(e.newCustomerInfo,"depositPaid",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),o("discountSelect",{tag:"li",on:{discountChange:e.discountChange}}),e._v(" "),o("li",{staticClass:"textarea"},[o("h3",[e._v("备注信息")]),e._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.newCustomerInfo.remark2,expression:"newCustomerInfo.remark2",modifiers:{trim:!0}}],attrs:{placeholder:"添加备注信息",oninput:"if(value.length>200)value=value.slice(0,200)"},domProps:{value:e.newCustomerInfo.remark2},on:{input:function(t){t.target.composing||e.$set(e.newCustomerInfo,"remark2",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),o("intentionSelect",{attrs:{intentionVal:e.intentionVal}}),e._v(" "),o("urgentSelect",{attrs:{urgentVal:e.urgentVal}})],2)])},staticRenderFns:[]};var ae=o("VU/8")(se,re,!1,function(e){o("qX+k")},"data-v-3d1ad8eb",null);t.a=ae.exports},AxED:function(e,t){},BINO:function(e,t){},GmQB:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("Xxa5"),s=o.n(n),r=o("exGp"),a=o.n(r),i=o("Dd8w"),u=o.n(i),c=o("NYxO"),l=o("Au9i"),p=o("YV7O"),f=o("AiOh"),m=o("A4bO"),h=o("KkR3"),d=o("vGYV"),v=(o("CNcc"),o("CqDD"),o("0xDb")),C=(o("TYi7"),new v.a),g=(o("xrTZ").Base64,{name:"newCustomerInfo",components:{myBanner:p.a,newDemand:f.a,newDescript:m.a,newRecord:h.a},data:function(){return{name:"",phone:"",sex:"",topTitle:["客户描述","意向信息","跟进情况"],isShowDemand:!1,isShowDeal:!1,shops:[],fromName:"",codeList:{},saveDataKey:!0}},beforeRouteEnter:function(e,t,o){o(function(e){e.fromName=t.name,"chooseShop"===t.name||"searchProduct"===t.name||"intentionProduct"===t.name||"/previewImg"===t.name?(e.isShowDemand=!0,e.isShowDeal=!0):(e.setUpLoadUrl(""),e.setNewCustomerScroll(0))})},beforeRouteLeave:function(e,t,o){"NewCustomer"===e.name&&(this.setFiles([]),this.setPicVal([]),this.setNewCustomerInfo({})),o()},computed:u()({},Object(c.d)({newCustomerInfo:function(e){return e.customer.newCustomerInfo},sexVal:function(e){return e.select.sexVal},areaVal:function(e){return e.select.areaVal},enterStoreVal:function(e){return e.select.enterStoreVal},sourceVal:function(e){return e.select.sourceVal},leaveStoreVal:function(e){return e.select.leaveStoreVal},shopVal:function(e){return e.select.shopVal},upLoadUrl:function(e){return e.loadImgUrl.upLoadUrl},newCustomerScroll:function(e){return e.customerScroll.newCustomerScroll}}),Object(c.d)(["Files"])),mounted:function(){var e=this,t=localStorage.getItem("shops");this.shops=JSON.parse(t),this.$refs.newTop.addEventListener("scroll",this.handleScroll,!0),setTimeout(function(){e.$refs.newTop.scrollTop=e.newCustomerScroll},100)},destroyed:function(){this.setSexVal(""),this.setAreaVal(""),this.setEnterStoreVal(""),this.setSourceVal(""),this.setLeaveStoreVal(""),this.setShopVal(""),this.setAgeVal(""),this.setBuyReason(""),this.setStylePref(""),this.setProgress(""),this.setColorPref(""),this.setHouseType(""),this.setElevatorVal(""),this.setFollowVal(""),this.setFollowTiming("")},methods:u()({handleScroll:function(e){var t=e.target.scrollTop;this.setNewCustomerScroll(t)}},Object(c.c)(["setNewCustomerScroll","setNewCustomerInfo","setSexVal","setAreaVal","setSourceVal","setLeaveStoreVal","setEnterStoreVal","setShopVal","setAgeVal","setUpLoadUrl","setBuyReason","setStylePref","setProgress","setColorPref","setHouseType","setElevatorVal","setCheckedList","initShopList","initDescriptShopList","getShopVal","setFiles","setPicVal","setFollowVal","setFollowTiming"]),{change:function(e){this.codeList=e},controlDemand:function(){this.isShowDemand=!this.isShowDemand},controlDaal:function(){this.isShowDeal=!this.isShowDeal},changeFormData:function(e,t,o){for(var n=window.atob(e.split(",")[1]),s=new ArrayBuffer(n.length),r=new Uint8Array(s),a=0;a<n.length;a++)r[a]=n.charCodeAt(a);var i=new Blob([s],{type:"image/jpeg"});t.append(o,i,Date.now()+".jpg")},checkCustomer:function(e){var t=this;return a()(s.a.mark(function o(){var n,r;return s.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n=void 0,r=void 0,o.next=4,C.checkCustomer(e).then(function(t){r="phone"===e.type?"手机号码":"微信号",t.data?l.MessageBox.alert("该"+r+"已存在").then(function(e){n=!1}):(console.log(";;;;"),n=!0)}).catch(function(o){510===o&&t.checkCustomer(e)});case 4:return o.abrupt("return",n);case 5:case"end":return o.stop()}},o,t)}))()},creatNewCustomer:function(){var e=this;return a()(s.a.mark(function t(){var o,n,r,a,i,u,c,p,f,m;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.newCustomerInfo.sex){t.next=5;break}return l.MessageBox.alert("性别不能为空"),t.abrupt("return");case 5:if(e.newCustomerInfo.username){t.next=10;break}return l.MessageBox.alert("称呼不能为空"),t.abrupt("return");case 10:if(e.newCustomerInfo.province){t.next=15;break}return l.MessageBox.alert("请选择地区"),t.abrupt("return");case 15:if(e.newCustomerInfo.address){t.next=18;break}return l.MessageBox.alert("请填写客户地址"),t.abrupt("return");case 18:if(/^[\u4e00-\u9fa5]{2,}$/.test(e.newCustomerInfo.username)){t.next=22;break}return l.MessageBox.alert("称呼只能输入中文且不能少于2个字"),t.abrupt("return");case 22:return t.next=24,e.recycleName(e.newCustomerInfo.username);case 24:if(o=t.sent,console.log(o,"ss"),o){t.next=29;break}return l.MessageBox.alert("姓氏不存在"),t.abrupt("return");case 29:if(/^[\u4E00-\u9FA5a-zA-Z0-9]{1,200}$/.test(e.newCustomerInfo.address)){t.next=33;break}return l.MessageBox.alert("客户地址只能输入中英文或数字,不能包含空格"),t.abrupt("return");case 33:if(n=void 0,!e.$route.query.wechat||!e.newCustomerInfo.phone){t.next=40;break}return t.next=37,e.checkPhone();case 37:n=t.sent,t.next=47;break;case 40:if(!e.$route.query.phone||!e.newCustomerInfo.weChat){t.next=46;break}return t.next=43,e.checkWeChat();case 43:n=t.sent,t.next=47;break;case 46:n=!0;case 47:if(n){t.next=49;break}return t.abrupt("return");case 49:if(!e.whichFollowData(e.newCustomerInfo)){t.next=99;break}if(void 0,!e.newCustomerInfo.qq||""===e.newCustomerInfo.qq||e.checkQQ()){t.next=55;break}return t.abrupt("return");case 55:if(r=/^[\u4E00-\u9FA5a-zA-Z0-9]{1,}$/,""===e.newCustomerInfo.duty||r.test(e.newCustomerInfo.duty)){t.next=59;break}return l.MessageBox.alert("客户职业只能输入中英文或数字,不能包含空格"),t.abrupt("return");case 59:if(a=/^[\u4E00-\u9FA5a-zA-Z0-9\s]{1,}$/,i=/[\ud800-\udbff][\udc00-\udfff]/g,""===e.newCustomerInfo.remark||!i.test(e.newCustomerInfo.remark)){t.next=65;break}return e.newCustomerInfo.remark=e.changeStr(e.newCustomerInfo.remark),l.MessageBox.alert("客户描述不支持表情"),t.abrupt("return");case 65:if(""===e.newCustomerInfo.remark||a.test(e.newCustomerInfo.remark)){t.next=68;break}return l.MessageBox.alert("客户描述不支持特殊符号"),t.abrupt("return");case 68:if(""===e.newCustomerInfo.competingGoods||r.test(e.newCustomerInfo.competingGoods)){t.next=71;break}return l.MessageBox.alert("竞品产品只能输入中英文或数字,不能包含空格"),t.abrupt("return");case 71:if(""===e.newCustomerInfo.remark2||!i.test(e.newCustomerInfo.remark2)){t.next=75;break}return e.newCustomerInfo.remark2=e.changeStr(e.newCustomerInfo.remark2),l.MessageBox.alert("意向信息里备注不支持表情"),t.abrupt("return");case 75:if(""===e.newCustomerInfo.remark2||a.test(e.newCustomerInfo.remark2)){t.next=78;break}return l.MessageBox.alert("意向信息里备注不支持特殊符号"),t.abrupt("return");case 78:if(""===e.newCustomerInfo.situation||!i.test(e.newCustomerInfo.situation)){t.next=82;break}return e.newCustomerInfo.situation=e.changeStr(e.newCustomerInfo.situation),l.MessageBox.alert("跟进情况不支持表情"),t.abrupt("return");case 82:if(""===e.newCustomerInfo.situation||a.test(e.newCustomerInfo.situation)){t.next=85;break}return l.MessageBox.alert("跟进情况不支持特殊符号"),t.abrupt("return");case 85:if(""===e.newCustomerInfo.plan||!i.test(e.newCustomerInfo.plan)){t.next=89;break}return e.newCustomerInfo.plan=e.changeStr(e.newCustomerInfo.plan),l.MessageBox.alert("下一步跟进计划不支持表情"),t.abrupt("return");case 89:if(""===e.newCustomerInfo.plan||a.test(e.newCustomerInfo.plan)){t.next=92;break}return l.MessageBox.alert("下一步跟进计划不支持特殊符号"),t.abrupt("return");case 92:if(u=new FormData,e.upLoadUrl&&e.changeFormData(e.upLoadUrl,u,"dataFile"),e.Files.length>0)for(c=0;c<e.Files.length;c++)u.append("record.dataFile",e.Files[c]);for(m in p=e.updateParams(e.newCustomerInfo),f=[],p)u.append(m,p[m]),f.push(m);e.getData(u,f,p);case 99:case"end":return t.stop()}},t,e)}))()},changeStr:function(e){return e.replace(/[\ud800-\udbff][\udc00-\udfff]/g,"")},checkQQ:function(){return/^[1-9][0-9]{4,9}$/.test(this.newCustomerInfo.qq)?!0:(l.MessageBox.alert("请输入正确的QQ"),void!1)},checkPhone:function(){var e=this;return a()(s.a.mark(function t(){var o,n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=void 0,/(^1[3|4|5|6|7|8|9]\d{9}$)|(^09\d{8}$)/.test(e.newCustomerInfo.phone)){t.next=8;break}return l.MessageBox.alert("请填写正确的手机号"),o=!1,t.abrupt("return");case 8:return n={value:e.newCustomerInfo.phone,type:"phone",orgId:e.newCustomerInfo.orgId},t.next=11,e.checkCustomer(n);case 11:o=t.sent;case 12:return t.abrupt("return",o);case 13:case"end":return t.stop()}},t,e)}))()},checkWeChat:function(){var e=this;return a()(s.a.mark(function t(){var o,n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=void 0,/^[a-zA-Z]([-_a-zA-Z0-9]{5,19})+$/.test(e.newCustomerInfo.weChat)){t.next=8;break}return l.MessageBox.alert("请填写正确的微信号"),o=!1,t.abrupt("return");case 8:return n={value:e.newCustomerInfo.weChat,type:"wechat",orgId:e.newCustomerInfo.orgId},t.next=11,e.checkCustomer(n);case 11:o=t.sent;case 12:return t.abrupt("return",o);case 13:case"end":return t.stop()}},t,e)}))()},checkName:function(e){var t=this;return a()(s.a.mark(function o(){var n;return s.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n=void 0,o.next=3,C.checkLastName({lastName:e}).then(function(e){console.log("检查名字",e),n=!!e.data}).catch(function(e){510===e&&t.checkName()});case 3:return o.abrupt("return",n);case 4:case"end":return o.stop()}},o,t)}))()},recycleName:function(e){var t=this;return a()(s.a.mark(function o(){var n,r,a,i;return s.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:console.log("str",e),n=void 0,r=e.length-1,a=void 0,console.log(n),i=0;case 6:if(!(i<r)){o.next=15;break}return n=e.slice(0,i+1),o.next=10,t.checkName(n);case 10:return a=o.sent,o.abrupt("break",15);case 12:i++,o.next=6;break;case 15:return o.abrupt("return",a);case 16:case"end":return o.stop()}},o,t)}))()},getData:function(e,t,o){var n=this;C.updateCustomer(e,t,o).then(function(e){0==e.code?e.status?l.MessageBox.alert("保存成功！").then(function(e){"Boss&Manager"===n._localAjax().typename||"Store Manager"===n._localAjax().typename?n.$router.replace({path:"/storeCustomer"}):n.$router.replace({path:"/customer"}),n.setFiles([]),n.setPicVal([])}):l.MessageBox.alert("保存失败！"):l.MessageBox.alert(e.msg)}).catch(function(s){510===s&&n.getData(e,t,o)})},setInitData:function(){this.newCustomerInfo.leaveStore=this.leaveStoreVal},whichFollowData:function(e){for(var t in e)return e.source2?e.followDate?e.residentTime2?e.situation?!0:void l.MessageBox.alert("请描述跟进情况"):void l.MessageBox.alert("请选择跟进时长"):void l.MessageBox.alert("请选择跟进时间"):void l.MessageBox.alert("请选择跟进方式")},updateParams:function(e){var t=this;console.log(555,e);var o={},n=e.productArr;e.productArr&&e.productArr.length&&n.forEach(function(e,n){t.$set(o,"opportunity.goodsList["+n+"].goodsId",e.id),t.$set(o,"opportunity.goodsList["+n+"].quantity",e.quantity)});var s={phone:e.phone,username:e.username,sex:e.sex,birthday:e.birthday,age:e.age,qq:e.qq,weChat:e.weChat,duty:e.duty,remark:e.remark,orgId:e.orgId,"address.province":e.province,"address.city":e.city,"address.district":e.area,"address.address":e.address,"address.apartmentType":this.codeList.htCode,"address.elevator":e.elevator,"opportunity.shopId":e.shopId,"opportunity.arrivalDate":e.arrivalDate||d.a.indexTimeB(new Date)[1],"opportunity.deliverDate":e.deliverDate,"opportunity.source":this.codeList.sourceCode||"Natural","opportunity.stylePref":this.codeList.spCode,"opportunity.progress":this.codeList.pgCode,"opportunity.colorPref":this.codeList.colorCode,"opportunity.competingGoods":e.competingGoods,"opportunity.buyReason":this.codeList.brCode,"opportunity.budget":e.budget,"opportunity.depositPaid":e.depositPaid,"opportunity.argreeDiscount":10*parseFloat(e.argreeDiscount),"opportunity.remark":e.remark2,"opportunity.urgency":e.urgency||!1,"opportunity.level":e.level||"A","record.source":e.source2,"record.followDate":e.followDate,"record.residentTime":e.residentTime2,"record.nextDate":e.nextDate,"record.situation":e.situation,"record.plan":e.plan};for(var r in s)(s[r]||0===s[r])&&(o[r]=s[r]);return o}})}),w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"newTop",staticClass:"newCustomerInfo"},[n("my-banner",{attrs:{title:"新建客户信息"}},[n("button",{staticClass:"save",attrs:{type:"button"},on:{click:e.creatNewCustomer}},[e._v("保存")])]),e._v(" "),n("ul",[e._m(0),e._v(" "),n("new-descript",{attrs:{select:!0,fromName:e.fromName,areaType:!1}})],1),e._v(" "),n("ul",[n("li",{on:{click:e.controlDemand}},[e._m(1),e._v(" "),n("div",{staticClass:"pullDown-icon"},[n("img",{class:{changSide:e.isShowDemand},attrs:{src:o("vn4p")}})])]),e._v(" "),n("new-demand",{directives:[{name:"show",rawName:"v-show",value:e.isShowDemand,expression:"isShowDemand"}],attrs:{fromName:e.fromName,changeCode:e.change,type:"demand",addressType:"newCustomer"}})],1),e._v(" "),n("ul",{staticClass:"dealUl"},[n("li",{on:{click:e.controlDaal}},[e._m(2),e._v(" "),n("div",{staticClass:"pullDown-icon"},[n("img",{class:{changSide:e.isShowDeal},attrs:{src:o("vn4p")}})])]),e._v(" "),n("new-record",{directives:[{name:"show",rawName:"v-show",value:e.isShowDeal,expression:"isShowDeal"}],attrs:{fromName:e.fromName}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("div",{staticClass:"title"},[t("p"),this._v(" "),t("span",[this._v("客户描述")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("p"),this._v(" "),t("span",[this._v("意向信息")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("p"),this._v(" "),t("span",[this._v("跟进情况")])])}]};var I=o("VU/8")(g,w,!1,function(e){o("4imZ")},"data-v-1d9cfcc4",null);t.default=I.exports},So3S:function(e,t){},f5WY:function(e,t){},hDT0:function(e,t){},jSRI:function(e,t){},lU09:function(e,t){},oYUs:function(e,t){},"qX+k":function(e,t){},rEOb:function(e,t){},vn4p:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAAAcRJREFUOI2l1T1oFFEUBeBvHysoiFpZmEZQEBVDCgVDuiAklT9d0qighSKigjaxjk1SqBh/IBZWSScGFlkQsRFTrOAPUQIWaSJoEVIEkmJJLOYq4+7Minrgwsy955z35r373lRqtdpTXMJX/4dduJdwEnM4h8o/GFVCO4dTKZI7MIkX2PsXZntCMxkeUguhHx9wHdUORtXgfAzNL7QawhaM4Q26C+rdURsL7m9ImC2ZxWG8xSg2R4yiEbUizCb04SpWCghVjOBdxAg2FfBWcA19Ceu4g0Ool4y8L6II9dDexnrCA2zHAgZxFksl4jyWgjsY2m24n3BB1kPHg/gE+zHdwWwaB4IrtJ9w8ecud+EZprAT3zGME1jMGS1GbhjfgjsV2i7a22YIn3Em3mdwEA/xKJ5nonY6ZjWUN6jUarWNks+qy5ZjoSW/OwYYKBIlzJcYDshOwpXgJVyOXKEZ5hN6cAvNAsJWWTu8jrgbuVY0w6MnYQ03Zd3fKBn5aEQRGjgSHmv5TXmPXtzAaok4j9Xg9spOEdp3uYlx2QXwsoPZq+CMa1mqotsGvuAYzmM5l1+OXH9w2tDpztvAYzzHROT++Kv4AcIDZJeasE9EAAAAAElFTkSuQmCC"}});
//# sourceMappingURL=7.53643f5b84da4926b44e.js.map