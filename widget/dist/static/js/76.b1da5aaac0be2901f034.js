webpackJsonp([76],{"T/CP":function(e,t){},w6Zv:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("4YfN"),i=a.n(s),n=(a("7VF+"),a("84iU"),a("xd7I")),r=a("7LQH"),c=a("vGYV"),l=a("JFlM"),o=a("t7k9"),h=a("HVJf"),S=a("Ueg1"),u=a("cFe5"),m=a("7m0P"),d=a("X9U8"),v=a("YV7O"),y=a("bNyG");n.default.use(r.a),n.default.use(h.a);var D={name:"sales",components:{Bar:S.a,chartsTit:u.a,RouterLink:m.a,SelectComponent:d.a,mybanner:v.a,noData:y.a},data:function(){return{ajaxData:{},endTime:c.a.getLocalTime("end"),salesData:{},areaSalesData:{},title:"销售额报表",cityMsg:"",key1:!1,key2:!1,salchanrtDom1:"",salchanrtDom2:"",salesShow:!0,areaSalesShow:!0}},created:function(){var e=[localStorage.getItem("ajaxData"),localStorage.getItem("cityMsg")],t=e[0],a=e[1];this.cityMsg=a?JSON.parse(a):{},this.ajaxData=JSON.parse(t)},mounted:function(){console.log("参数",this.cityMsg.cityName,this.endTime,this.cityMsg.cityLevel),this.getSalesData(this.cityMsg.cityName,this.endTime,this.cityMsg.cityLevel),this.getAreaSalesData(this.endTime),Object(o.i)(".barBox")},computed:i()({},Object(h.d)({citySelect:function(e){return e.select.citySelect},startTimeSelect:function(e){return e.select.startTimeSelect},endTimeSelect:function(e){return e.select.endTimeSelect}}),Object(h.b)(["homeArrFilter"])),watch:{citySelect:function(){this.endTimeSelect&&""!=this.endTimeSelect&&this.getSalesData(this.citySelect.cityName,this.endTimeSelect,this.citySelect.cityLevel)},endTimeSelect:function(){this.endTimeSelect&&""!=this.endTimeSelect&&(this.getSalesData(this.citySelect.cityName,this.endTimeSelect,this.citySelect.cityLevel),this.getAreaSalesData(this.endTimeSelect))},salesData:function(){this.key1&&this.salesData&&this.salesData.series&&(this.salesShow=Object(l.c)(this.salesData.series),console.log("是否显示echarts",this.salesShow),Object(l.b)(this,"sales","vertical",!0),this.salchanrtDom1=l.a)},areaSalesData:function(){this.key2&&this.areaSalesData&&this.areaSalesData.series&&(this.areaSalesShow=Object(l.c)(this.areaSalesData.series),Object(l.b)(this,"areaSales","horizontal",!0),this.salchanrtDom2=l.a)}},beforeDestroy:function(){this.salchanrtDom1&&this.salchanrtDom1.dispose(),this.salchanrtDom2&&this.salchanrtDom2.dispose()},methods:{toStoreSales:function(){this.$router.push({path:"/storeSales"})},toAreaStoreSales:function(){this.$router.push({path:"/areaStoreSales"})},getSalesData:function(e,t,a){var s=this,i=this;c.a.getAjax("/v1/app/report/sales",{cityLevel:a,cityName:e,date:t,tenantId:this.ajaxData.tenantId}).then(function(e){e&&(s.key1=!0,e=e.data,c.a.sortYears(e),i.salesData=e)}).catch(function(e){console.log(11111,e)})},getAreaSalesData:function(e){var t=this,a=this;c.a.getAjax("/v1/app/report/area/sales",{date:e,tenantId:this.ajaxData.tenantId}).then(function(e){e&&(t.key2=!0,e=e.data,a.areaSalesData=e)})},chartsEvent:function(e){e.componentType}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sales paddingTop"},[a("mybanner",{attrs:{title:e.title}}),e._v(" "),a("SelectComponent"),e._v(" "),a("div",{staticClass:"barBox"},[a("chartsTit",{attrs:{text:"整体销售额对比"}},[a("h6",[e._v("单位：万元")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.salesShow,expression:"!salesShow"}],ref:"salesContainer",style:{height:"100vw"}}),e._v(" "),a("noData",{directives:[{name:"show",rawName:"v-show",value:e.salesShow,expression:"salesShow"}]}),e._v(" "),a("RouterLink",{attrs:{text:"各门店销售额对比"},nativeOn:{click:function(t){return e.toStoreSales(t)}}})],1),e._v(" "),a("div",{staticClass:"barBox"},[a("chartsTit",{attrs:{text:"区域销售额对比"}},[a("h6",[e._v("单位：万元")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.areaSalesShow,expression:"!areaSalesShow"}],ref:"areaSalesContainer",style:{height:"100vw"}}),e._v(" "),a("noData",{directives:[{name:"show",rawName:"v-show",value:e.areaSalesShow,expression:"areaSalesShow"}]}),e._v(" "),a("RouterLink",{attrs:{text:"各区域销售额对比"},nativeOn:{click:function(t){return e.toAreaStoreSales(t)}}})],1)],1)},staticRenderFns:[]};var p=a("C7Lr")(D,f,!1,function(e){a("T/CP")},"data-v-ab18d122",null);t.default=p.exports}});