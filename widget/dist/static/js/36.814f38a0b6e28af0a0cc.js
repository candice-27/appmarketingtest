webpackJsonp([36],{"1OyT":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("lC5x"),n=s.n(a),o=s("J0Oq"),i=s.n(o),r=s("4YfN"),c=s.n(r),u=s("3whc"),d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"subHeader"},[s("h5",[t._v(t._s(t.text))]),t._v(" "),s("div",[s("span",{staticClass:"totalPoints"},[t._v("总分 "+t._s(t.totalPoints))]),t._v(" "),s("span",{staticClass:"deductMarks"},[t._v("扣分 "+t._s(t.deductMarks))])])])},staticRenderFns:[]};var l=s("C7Lr")({props:["text","totalPoints","deductMarks"],components:{},data:function(){return{}}},d,!1,function(t){s("GRJJ")},"data-v-6e5011f3",null).exports,v=s("HVJf"),h={props:["standardList","status","paprentIndex"],components:{},data:function(){return{}},computed:c()({},Object(v.d)({submitScoreData:function(t){return t.eggRecordDetails.submitScoreData}})),methods:c()({},Object(v.c)(["setSubmitScoreData","setCategoryListIndex","setStandardListIndex"]),{toCheckDetail:function(t,e){var s={standardId:t.id},a=this.submitScoreData.categoryList[this.paprentIndex].standardList,n=-1,o=-1;a.map(function(e,s){t&&e.standardId==t.id&&(n=s)}),-1==n?(a.push(s),o=a.indexOf(s)):o=n,this.setSubmitScoreData(this.submitScoreData),this.setCategoryListIndex(this.paprentIndex),this.setStandardListIndex(o);var i=document.querySelector("#app").scrollTop;sessionStorage.setItem("scrollTop",i),this.$router.push({path:"/checkDetail",query:{name:t.name,standardListIndex:e,isGrade:this.$route.query.isGrade}})}})},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"checkContent",class:t.status?"open":"close"},t._l(t.standardList,function(e,a){return s("li",{key:"checkContent"+a,class:e.status?"done":"enter",on:{click:function(s){return t.toCheckDetail(e,a)}}},[t._v(t._s(e.name))])}),0)},staticRenderFns:[]};var f=s("C7Lr")(h,p,!1,function(t){s("9Zhk")},"data-v-12bace55",null).exports,b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"checkTitle"},[s("h5",{class:t.status?"open":"close"},[s("button",{on:{click:t.open}},[t._v(t._s(t.title))]),t._v(" "),s("button",{staticClass:"btn2",on:{click:t.close}},[t._v("收起")])])])},staticRenderFns:[]};var m=s("C7Lr")({props:["title","index","status"],components:{},data:function(){return{}},methods:{close:function(){this.$emit("changeStatus",this.index,!1)},open:function(){this.$emit("changeStatus",this.index,!0)}}},b,!1,function(t){s("NTxF")},"data-v-78780e71",null).exports,_=s("EHJ6"),k=s("wSez"),C=s("PR0l"),S=(s("7Adc"),{components:{RecordHeader:u.a,SubHeader:l,CheckContent:f,CheckTitle:m,ToastBox:_.a},data:function(){return{total:{totalPoints:0,deductMarks:0},btnBotStatus:!0,bigCategoryList:[],subData:{},selectIndex:0,isPageCheck:!1,toastShow:!1,toastReset:!1,toastLeave:!1}},beforeRouteLeave:function(t,e,s){-1!=["checkDetail","recordJxs","checkTip","recordJxs"].indexOf(t.name)?e.meta.keepAlive=!0:e.meta.keepAlive=!1,s()},created:function(){this._initData(),this.setdeductMarks(0)},computed:Object(v.d)({submitScoreData:function(t){return t.eggRecordDetails.submitScoreData},subcategories:function(t){return t.eggRecordDetails.subcategories},deductMarks:function(t){return t.eggRecordDetails.deductMarks}}),activated:function(){this.toastLeave=!1;var t=0,e=0;this.subcategories.map(function(s,a){t+=s.total,s.standardList.map(function(t){e+=t.deductMarks})}),this.bigCategoryList=this.subcategories,this.total.totalPoints=t,this.total.deductMarks=e,document.querySelector("#app").scrollTop=sessionStorage.getItem("scrollTop")},mounted:function(){document.querySelector("#app").scrollTop=0},methods:c()({},Object(v.c)(["setSubmitScoreData","setSubcategories","setTotalPoints","setdeductMarks"]),{onHandleBack:function(){if(1==this.$route.query.isGrade){var t=this.$route.query,e=t.shopId,s=t.starLevel;this.$router.push({path:"/starCheck",query:{shopId:e,starLevel:s}})}else this.toastLeave=!0},bindBackPage:function(){var t=this.$route.query,e=t.shopId,s=t.starLevel;this.$router.push({path:"/starCheck",query:{shopId:e,starLevel:s}})},changeStatus:function(t,e){this.bigCategoryList[t].status=e},bindReset:function(){this.total.deductMarks=0,this.toastReset=!1,this.btnBotStatus=!1,this.submitScoreData.categoryList.map(function(t){t.standardList=[]}),this.setSubmitScoreData(this.submitScoreData),this.subcategories.map(function(t){t.standardList.map(function(t){t.status=!1})}),this.setdeductMarks(0),this.setSubcategories(this.subcategories)},bindSubmit:function(){this.btnBotStatus=!0;var t=[];this.subcategories.map(function(e){e.standardList.map(function(e){e.status||t.push(e.name)})}),0==t.length?this.toastShow=!0:Object(k.Toast)("请给"+t[0]+"评分")},bindComfirmSubmit:function(){var t=this;return i()(n.a.mark(function e(){var s,a,o,i,r,c,u;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.toastShow=!1,s=t.submitScoreData,e.next=4,Object(C.q)(s);case 4:if(a=e.sent,o=a.code,i=a.msg,a.data,Object(k.Toast)(i),0==o){e.next=11;break}return e.abrupt("return");case 11:r=t.$route.query,c=r.shopId,u=r.starLevel,t.$router.push({path:"/starCheck",query:{shopId:c,starLevel:u}});case 13:case"end":return e.stop()}},e,t)}))()},_initData:function(){var t=this;return i()(n.a.mark(function e(){var s,a,o,i,r,c,u,d,l;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={shopId:t.$route.query.shopId,categoryId:t.$route.query.id},e.next=3,Object(C.p)(s);case 3:if(a=e.sent,o=a.code,i=a.msg,r=a.categories,0==o){e.next=10;break}return Object(k.Toast)(i),e.abrupt("return");case 10:c=0,0,u=[],d=t.$route.query.isGrade,l=0,r.map(function(t,e){t.status=0==e||1==d,c+=t.total,t.deductLimit;var s=[];t.standardList.map(function(t){t.deductMarks=0,t.status=1==d,l+=t.deduct;var e=t.id,a=t.deduct,n=t.reason,o=t.urls;s.push({standardId:e,deduct:a||0,reason:n||"",urls:o||[]})}),u.push({categoryId:t.id,standardList:s})}),t.submitScoreData.categoryList=u,t.setSubmitScoreData(t.submitScoreData),t.total.totalPoints=c,t.total.deductMarks=1==d?l:t.deductMarks,1==d&&t.setdeductMarks(l),t.setTotalPoints(c),t.setSubcategories(r),t.bigCategoryList=r;case 24:case"end":return e.stop()}},e,t)}))()}})}),g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"check",staticClass:"check"},[s("RecordHeader",{attrs:{title:t.$route.query.name,showLeft:!0},on:{onHandleBack:t.onHandleBack}},[s("div",{staticClass:"tips",on:{click:function(e){return t.$router.push({path:"/checkTip",query:{name:"level"}})}}})]),t._v(" "),s("div",{staticClass:"contentBox"},[t._l(t.bigCategoryList,function(e,a){return s("div",{key:"bigCategoryList"+a,class:{paddingTop10:0===a}},[0===a?s("SubHeader",{staticClass:"firstTitle",attrs:{text:"分数统计",totalPoints:t.total.totalPoints,deductMarks:t.total.deductMarks}}):t._e(),t._v(" "),s("CheckTitle",{attrs:{title:e.name,index:a,status:e.status},on:{changeStatus:t.changeStatus}}),t._v(" "),s("CheckContent",{attrs:{paprentIndex:a,standardList:e.standardList,status:e.status}})],1)}),t._v(" "),1!=t.$route.query.isGrade?s("div",{staticClass:"btn-bottom"},[s("button",{class:{on:!t.btnBotStatus},on:{click:function(e){t.toastReset=!0}}},[t._v("重置")]),t._v(" "),s("button",{class:{on:t.btnBotStatus},on:{click:t.bindSubmit}},[t._v("提交")])]):t._e()],2),t._v(" "),t.toastShow?s("ToastBox",{staticClass:"toast",scopedSlots:t._u([{key:"content",fn:function(){return[s("div",{staticClass:"cont"},[s("p",[t._v("该检查得分："),s("span",[t._v(t._s(t.total.totalPoints-t.total.deductMarks)+"分")]),t._v(" "),s("span",[t._v("扣分："+t._s(t.total.deductMarks)+"分")])])])]},proxy:!0},{key:"bottons",fn:function(){return[s("div",{staticClass:"but"},[s("div",{staticClass:"btns",on:{click:function(e){t.toastShow=!1}}},[t._v("返回修改")]),t._v(" "),s("div",{staticClass:"btns",on:{click:t.bindComfirmSubmit}},[t._v("确认提交")])])]},proxy:!0}],null,!1,2998988862)}):t._e(),t._v(" "),t.toastReset?s("ToastBox",{staticClass:"toast",attrs:{content:"是否确认重置？"},scopedSlots:t._u([{key:"bottons",fn:function(){return[s("div",{staticClass:"but"},[s("div",{staticClass:"btns",on:{click:function(e){t.toastReset=!1}}},[t._v("取消")]),t._v(" "),s("div",{staticClass:"btns",on:{click:t.bindReset}},[t._v("确定")])])]},proxy:!0}],null,!1,3482912048)}):t._e(),t._v(" "),t.toastLeave?s("ToastBox",{staticClass:"toast",scopedSlots:t._u([{key:"bottons",fn:function(){return[s("div",{staticClass:"but"},[s("div",{staticClass:"btns",on:{click:function(e){t.toastLeave=!1}}},[t._v("取消")]),t._v(" "),s("div",{staticClass:"btns",on:{click:t.bindBackPage}},[t._v("确定")])])]},proxy:!0}],null,!1,8772531)},[[s("div",{staticClass:"contents",attrs:{slot:"content"},slot:"content"},[s("p",[t._v("未提交将清空数据"),s("br"),t._v("确定返回吗？")])])]],2):t._e()],1)},staticRenderFns:[]};var x=s("C7Lr")(S,g,!1,function(t){s("AM7W")},"data-v-42582e5a",null);e.default=x.exports},"9Zhk":function(t,e){},AM7W:function(t,e){},EHJ6:function(t,e,s){"use strict";var a={props:{title:{type:String,default:"提示"},content:{type:String,default:""}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrraper"},[s("div",{staticClass:"box"},[s("div",{staticClass:"title"},[s("div",{staticClass:"icon"}),t._v(" "),s("h2",[t._v(t._s(t.title))])]),t._v(" "),s("div",{staticClass:"content"},[t._t("content",[s("div",{staticClass:"def-cont",domProps:{innerHTML:t._s(t.content)}})])],2),t._v(" "),s("div",{staticClass:"buttons"},[t._t("bottons",[s("div",{staticClass:"btn",on:{click:function(e){return t.$eimt("onComfirm")}}},[t._v("确定")])])],2)])])},staticRenderFns:[]};var o=s("C7Lr")(a,n,!1,function(t){s("bFV4")},"data-v-2cda2800",null);e.a=o.exports},GRJJ:function(t,e){},NTxF:function(t,e){},bFV4:function(t,e){}});