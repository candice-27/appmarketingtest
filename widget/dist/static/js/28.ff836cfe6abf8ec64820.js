webpackJsonp([28],{"162o":function(t,e,s){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(a.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new i(a.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},s("mypn"),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(e,s("DuR2"))},"1OyT":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("Xxa5"),a=s.n(n),i=s("exGp"),o=s.n(i),c=s("Dd8w"),r=s.n(c),u=s("3whc"),d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"subHeader"},[s("h5",[t._v(t._s(t.text))]),t._v(" "),s("div",[s("span",{staticClass:"totalPoints"},[t._v("总分 "+t._s(t.totalPoints))]),t._v(" "),s("span",{staticClass:"deductMarks"},[t._v("扣分 "+t._s(t.deductMarks))])])])},staticRenderFns:[]};var l=s("VU/8")({props:["text","totalPoints","deductMarks"],components:{},data:function(){return{}}},d,!1,function(t){s("vJuA")},"data-v-402d438d",null).exports,f=s("NYxO"),m={props:["standardList","status","paprentIndex"],components:{},data:function(){return{}},computed:r()({},Object(f.d)({submitScoreData:function(t){return t.eggRecordDetails.submitScoreData}})),methods:r()({},Object(f.c)(["setSubmitScoreData","setCategoryListIndex","setStandardListIndex"]),{toCheckDetail:function(t,e){var s={standardId:t.id},n=this.submitScoreData.categoryList[this.paprentIndex].standardList,a=-1,i=-1;n.map(function(e,s){t&&e.standardId==t.id&&(a=s)}),-1==a?(n.push(s),i=n.indexOf(s)):i=a,this.setSubmitScoreData(this.submitScoreData),this.setCategoryListIndex(this.paprentIndex),this.setStandardListIndex(i);var o=document.querySelector("#app").scrollTop;sessionStorage.setItem("scrollTop",o),this.$router.push({path:"/checkDetail",query:{name:t.name,standardListIndex:e,isGrade:this.$route.query.isGrade}})}})},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"checkContent",class:t.status?"open":"close"},t._l(t.standardList,function(e,n){return s("li",{key:"checkContent"+n,class:{done:e.status},on:{click:function(s){return t.toCheckDetail(e,n)}}},[t._v(t._s(e.name))])}),0)},staticRenderFns:[]};var v=s("VU/8")(m,p,!1,function(t){s("vLTs")},"data-v-618be7e7",null).exports,h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"checkTitle"},[s("h5",{class:t.status?"open":"close"},[s("button",{on:{click:t.open}},[t._v(t._s(t.title))]),t._v(" "),s("button",{staticClass:"btn2",on:{click:t.close}},[t._v("收起")])])])},staticRenderFns:[]};var b=s("VU/8")({props:["title","index","status"],components:{},data:function(){return{}},methods:{close:function(){this.$emit("changeStatus",this.index,!1)},open:function(){this.$emit("changeStatus",this.index,!0)}}},h,!1,function(t){s("5wHY")},"data-v-47801963",null).exports,g={props:{title:{type:String,default:"提示"},content:{type:String,default:""}}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrraper"},[s("div",{staticClass:"box"},[s("div",{staticClass:"title"},[s("div",{staticClass:"icon"}),t._v(" "),s("h2",[t._v(t._s(t.title))])]),t._v(" "),s("div",{staticClass:"content"},[t._t("content",[s("div",{staticClass:"def-cont"},[t._v(t._s(t.content))])])],2),t._v(" "),s("div",{staticClass:"buttons"},[t._t("bottons",[s("div",{staticClass:"btn",on:{click:function(e){return t.$eimt("onComfirm")}}},[t._v("确定")])])],2)])])},staticRenderFns:[]};var k=s("VU/8")(g,_,!1,function(t){s("6WhH")},"data-v-f8031240",null).exports,S=s("Au9i"),y=s("PR0l"),C=(s("162o"),s("M4fF"),{components:{RecordHeader:u.a,SubHeader:l,CheckContent:v,CheckTitle:b,ToastBox:k},data:function(){return{total:{totalPoints:0,deductMarks:0},btnBotStatus:!0,bigCategoryList:[],subData:{},selectIndex:0,isPageCheck:!1,toastShow:!1}},beforeRouteLeave:function(t,e,s){["checkDetail","recordJxs","checkTip"].includes(t.name)?e.meta.keepAlive=!0:e.meta.keepAlive=!1,s()},created:function(){this._initData(),this.setdeductMarks(0)},computed:Object(f.d)({submitScoreData:function(t){return t.eggRecordDetails.submitScoreData},subcategories:function(t){return t.eggRecordDetails.subcategories},deductMarks:function(t){return t.eggRecordDetails.deductMarks}}),activated:function(){var t=0;this.subcategories.map(function(e,s){t+=e.total,e.deductLimit}),this.bigCategoryList=this.subcategories,this.total.totalPoints=t,this.total.deductMarks=this.deductMarks,document.querySelector("#app").scrollTop=sessionStorage.getItem("scrollTop")},methods:r()({},Object(f.c)(["setSubmitScoreData","setSubcategories","setTotalPoints","setdeductMarks"]),{changeStatus:function(t,e){this.bigCategoryList[t].status=e},bindReset:function(){this.btnBotStatus=!1,this.submitScoreData.categoryList.map(function(t){t.standardList=[]}),this.setSubmitScoreData(this.submitScoreData),this.subcategories.map(function(t){t.standardList.map(function(t){t.status=!1})}),this.setSubcategories(this.subcategories)},bindSubmit:function(){this.btnBotStatus=!0;var t=[];this.subcategories.map(function(e){e.standardList.map(function(e){e.status||t.push(e.name)})}),0==t.length?this.toastShow=!0:Object(S.Toast)("请给"+t[0]+"评分")},bindComfirmSubmit:function(){var t=this;return o()(a.a.mark(function e(){var s,n,i,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.toastShow=!1,s=t.submitScoreData,e.next=4,Object(y.o)(s);case 4:if(n=e.sent,i=n.code,o=n.msg,n.data,Object(S.Toast)(o),0==i){e.next=11;break}return e.abrupt("return");case 11:t.$router.go(-1);case 12:case"end":return e.stop()}},e,t)}))()},_initData:function(){var t=this;return o()(a.a.mark(function e(){var s,n,i,o,c,r,u,d,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={shopId:t.$route.query.shopId,categoryId:t.$route.query.id},e.next=3,Object(y.n)(s);case 3:if(n=e.sent,i=n.code,o=n.msg,c=n.categories,0==i){e.next=10;break}return Object(S.Toast)(o),e.abrupt("return");case 10:r=0,0,u=[],d=t.$route.query.isGrade,l=0,c.map(function(t,e){t.status=0==e||1==d,r+=t.total,t.deductLimit;var s=[];t.standardList.map(function(t){t.status=1==d,l+=t.deduct;var e=t.id,n=t.deduct,a=t.reason,i=t.urls;s.push({standardId:e,deduct:n,reason:a,urls:i||[]})}),u.push({categoryId:t.id,standardList:s})}),t.submitScoreData.categoryList=u,t.setSubmitScoreData(t.submitScoreData),t.total.totalPoints=r,t.total.deductMarks=1==d?l:t.deductMarks,1==d&&t.setdeductMarks(l),t.setTotalPoints(r),t.setSubcategories(c),t.bigCategoryList=c;case 24:case"end":return e.stop()}},e,t)}))()}})}),T={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"check",staticClass:"check"},[s("RecordHeader",{attrs:{title:t.$route.query.name}},[s("div",{staticClass:"tips",on:{click:function(e){return t.$router.push("/checkTip")}}})]),t._v(" "),s("div",{staticClass:"contentBox"},[t._l(t.bigCategoryList,function(e,n){return s("div",{key:"bigCategoryList"+n,class:{paddingTop10:0===n}},[0===n?s("SubHeader",{staticClass:"firstTitle",attrs:{text:"分数统计：",totalPoints:t.total.totalPoints,deductMarks:t.total.deductMarks}}):t._e(),t._v(" "),s("CheckTitle",{attrs:{title:e.name,index:n,status:e.status},on:{changeStatus:t.changeStatus}}),t._v(" "),s("CheckContent",{attrs:{paprentIndex:n,standardList:e.standardList,status:e.status}})],1)}),t._v(" "),1!=t.$route.query.isGrade?s("div",{staticClass:"btnBot"},[s("button",{class:{on:!t.btnBotStatus},on:{click:t.bindReset}},[t._v("重置")]),t._v(" "),s("button",{class:{on:t.btnBotStatus},on:{click:t.bindSubmit}},[t._v("提交")])]):t._e()],2),t._v(" "),t.toastShow?s("ToastBox",{staticClass:"toast",scopedSlots:t._u([{key:"content",fn:function(e){return[s("div",{staticClass:"cont"},[s("p",[t._v("该检查得分："),s("span",[t._v(t._s(t.total.totalPoints)+"分")]),t._v(" "),s("span",[t._v("扣分：-"+t._s(t.total.deductMarks)+"分")])]),t._v(" "),s("p",[t._v("注意：提交后无法修改分数")]),t._v(" "),s("div",{staticClass:"bot",on:{click:function(e){return t.$router.push("/recordJxs")}}},[t._v("查看检查记录 >>>")])])]}},{key:"bottons",fn:function(){return[s("div",{staticClass:"but"},[s("div",{staticClass:"btns",on:{click:function(e){t.toastShow=!1}}},[t._v("返回修改")]),t._v(" "),s("div",{staticClass:"btns",on:{click:t.bindComfirmSubmit}},[t._v("确认提交")])])]},proxy:!0}],null,!1,2336098401)}):t._e()],1)},staticRenderFns:[]};var x=s("VU/8")(C,T,!1,function(t){s("Nfwg")},"data-v-20745eba",null);e.default=x.exports},"5wHY":function(t,e){},"6WhH":function(t,e){},Nfwg:function(t,e){},mypn:function(t,e,s){(function(t,e){!function(t,s){"use strict";if(!t.setImmediate){var n,a,i,o,c,r=1,u={},d=!1,l=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick(function(){p(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,s=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=s,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){p(t.data)},n=function(t){i.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(a=l.documentElement,n=function(t){var e=l.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,a.removeChild(e),e=null},a.appendChild(e)}):n=function(t){setTimeout(p,0,t)}:(o="setImmediate$"+Math.random()+"$",c=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&p(+e.data.slice(o.length))},t.addEventListener?t.addEventListener("message",c,!1):t.attachEvent("onmessage",c),n=function(e){t.postMessage(o+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),s=0;s<e.length;s++)e[s]=arguments[s+1];var a={callback:t,args:e};return u[r]=a,n(r),r++},f.clearImmediate=m}function m(t){delete u[t]}function p(t){if(d)setTimeout(p,0,t);else{var e=u[t];if(e){d=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(s,n)}}(e)}finally{m(t),d=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,s("DuR2"),s("W2nU"))},vJuA:function(t,e){},vLTs:function(t,e){}});
//# sourceMappingURL=28.ff836cfe6abf8ec64820.js.map