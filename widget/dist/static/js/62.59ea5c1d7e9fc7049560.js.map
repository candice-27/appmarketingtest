{"version":3,"sources":["webpack:///src/pages/Personal/imgPreview.vue","webpack:///./src/pages/Personal/imgPreview.vue?8bcc","webpack:///./src/pages/Personal/imgPreview.vue","webpack:///./src/assets/imgs/trash.png"],"names":["vue_esm","component","mint_ui_common","name","imgPreview","data","title","actions","method","this","question","del","sheetVisible","index","startX","len","swipe","deviceW","path","components","mybanner","banner","created","computed","extends_default","Object","vuex_esm","picVal","state","filesList","Files","mounted","document","body","clientWidth","length","console","log","methods","openAction","list","fileList","splice","setPicVal","setFiles","$router","back","$refs","preview","style","transition","transform","start","e","event","preventDefault","changedTouches","clientX","move","dy","record","end","Math","abs","destroyed","array","window","beforeRouteLeave","to","from","next","meta","isUseCache","Personal_imgPreview","render","_vm","_h","$createElement","_c","_self","attrs","id","staticStyle","border","background","directives","rawName","value","expression","staticClass","src","__webpack_require__","alt","on","click","_v","ref","_l","imgs","key","touchstart","$event","touchmove","touchend","url","model","callback","$$v","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","module","exports"],"mappings":"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","file":"static/js/62.59ea5c1d7e9fc7049560.js","sourcesContent":["<template>\r\n    <div id=\"previewBox\">\r\n      <mybanner :title=\"title\" style=\"border:none;background:#fff\">\r\n        <img src=\"../../assets/imgs/trash.png\" alt=\"\" class=\"trash\" @click=\"openAction\" v-show=\"picVal.length>0\">\r\n      </mybanner>\r\n      <ul class=\"preview\" ref=\"preview\">\r\n        <li v-for=\"(imgs,index) in picVal\" :key=\"index\" @touchstart=\"start($event)\" @touchmove=\"move($event)\" @touchend=\"end($event)\">\r\n          <img :src=\"imgs.url\" alt=\"\">\r\n        </li>\r\n      </ul>\r\n      <mt-actionsheet :actions=\"actions\" v-model=\"sheetVisible\" id=\"ss\"></mt-actionsheet>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport mybanner from '../../components/banner'\r\nimport { Actionsheet, Toast } from 'mint-ui';\r\nimport { mapState, mapMutations } from 'vuex'\r\nVue.component(Actionsheet.name, Actionsheet);\r\nexport default {\r\n  data () {\r\n    let that=this;\r\n    return {\r\n      title:\"\",\r\n      actions:[\r\n      {\r\n        name:\"要删除这张图片吗\",\r\n        method:that.question\r\n      },\r\n      {\r\n        name:\"删除\",\r\n        method:that.del\r\n      }\r\n      ],\r\n      sheetVisible:false,\r\n      //picVal:[],\r\n      index:1,\r\n      startX:0,//记录触碰到屏幕的手指信息\r\n      //record:0,//记录每次触摸时上一次的偏移距离\r\n      len:0,\r\n      swipe:0,\r\n      //maxRight:50,//设定一个最大向右滑动的距离\r\n      //maxLeft:0,//求得最大向左滑动的距离\r\n     // maxLeftBounce:0,//向左反弹值\r\n      //maxRightBounce:0,//向右反弹值\r\n      deviceW:0,\r\n      path:''\r\n    }\r\n  },\r\n  components:{\r\n     mybanner\r\n  },\r\n  created(){\r\n    //this.picVal=JSON.parse(this.$route.query.picVal);\r\n   // this.path=this.$route.params.path;\r\n    //this.len=this.picVal.length;\r\n    //this.title=this.index+\"/\"+this.len;\r\n  },\r\n  computed:{\r\n    ...mapState({\r\n      picVal:state => state.picVal,\r\n      filesList:state => state.Files\r\n    })\r\n  },\r\n  mounted(){\r\n    this.deviceW=document.body.clientWidth;\r\n    //this.maxLeft=-50;\r\n    this.len=this.picVal.length;\r\n    this.title=this.index+\"/\"+this.len;\r\n    console.log(33344,this.picVal);\r\n    console.log(33344,this.filesList);\r\n  },\r\n  methods:{\r\n     ...mapMutations(['delFiles','delPicVal','setFiles','setPicVal']),\r\n    openAction(){\r\n      this.sheetVisible=true;\r\n    },\r\n    question(){\r\n      this.sheetVisible=true;\r\n      return;\r\n    },\r\n    del(){\r\n      if(this.picVal.length>0){\r\n        var list=this.picVal;\r\n        var fileList=this.filesList;\r\n        list.splice(this.index-1,1);\r\n        fileList.splice(this.index-1,1);\r\n        //this.picVal=list;\r\n        this.setPicVal(list);\r\n        this.setFiles(fileList);\r\n        console.log(this.picVal);\r\n        console.log(this.filesList);\r\n        if(this.index>1){\r\n          this.index--;\r\n          this.swipe=this.swipe-this.deviceW;\r\n        }\r\n        this.len=this.picVal.length;\r\n        if(this.len>0){\r\n          this.title=this.index+\"/\"+this.len;\r\n        }else{\r\n          this.$router.back(-1);\r\n          this.title=0+\"/\"+this.len;\r\n        }\r\n        this.$refs.preview.style.transition='transform .5s';\r\n        this.$refs.preview.style.transform='translateX(-'+this.swipe+'px)';\r\n        this.sheetVisible=false;\r\n      }\r\n    },\r\n    start(e,index){\r\n      e=e||event;\r\n      e.preventDefault();\r\n      if(e.changedTouches.length == 1) {\r\n        this.startX = e.changedTouches[0].clientX;\r\n        //console.log('startX: ',this.startX);\r\n      }\r\n    },\r\n    move(e,index){\r\n      e=e||event;\r\n      e.preventDefault();\r\n      if(e.changedTouches.length == 1){\r\n        this.$refs.preview.style.transition='none';\r\n        var dy = e.changedTouches[0].clientX-this.startX;\r\n        var allDis=this.record+dy;\r\n       /*  if(dy<0){\r\n          this.$refs.preview.style.transform='translateX(-'+(this.swipe+50)+'px)';\r\n        }\r\n        if(dy>0){\r\n           this.$refs.preview.style.transform='translateX(-'+(this.swipe-50)+'px)';\r\n        }\r\n        this.$refs.preview.style.transform='translateX(-'+this.swipe+'px)';\r\n */\r\n        }\r\n      \r\n      \r\n    },\r\n    end(e,index){\r\n      e=e||event;\r\n      e.preventDefault();\r\n       if(e.changedTouches.length == 1) {\r\n        var dy = e.changedTouches[0].clientX-this.startX;\r\n        //this.record=this.record+dy;\r\n        if(dy<0&&Math.abs(dy)>50){\r\n          if(this.index<this.picVal.length){\r\n            this.swipe=this.swipe+this.deviceW;\r\n            this.index++;\r\n          }\r\n          \r\n          this.title=this.index+\"/\"+this.len;\r\n          this.$refs.preview.style.transition='transform .5s';\r\n          this.$refs.preview.style.transform='translateX(-'+this.swipe+'px)';\r\n         \r\n        }\r\n        if(dy>0&&Math.abs(dy)>50){\r\n          if(this.index>1){\r\n            this.swipe=this.swipe-this.deviceW;\r\n            this.index--;\r\n          }\r\n          \r\n          this.title=this.index+\"/\"+this.len;\r\n          this.$refs.preview.style.transition='transform .5s';\r\n          this.$refs.preview.style.transform='translateX(-'+this.swipe+'px)';\r\n         \r\n        }\r\n       \r\n       } \r\n      }\r\n  },\r\n  destroyed(){\r\n    if(this.picVal.length>0){\r\n      var array=this.picVal;\r\n      window.picVal=array;\r\n    }  \r\n  },\r\n  beforeRouteLeave(to,from,next){\r\n    to.meta.isUseCache=true;\r\n    next();\r\n  }\r\n    \r\n\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n #previewBox{\r\n   width:100vw;\r\n   height:100vh;\r\n   overflow: hidden;\r\n   .banner span{\r\n     padding-right:0;\r\n   }\r\n   .swipe{\r\n     transform: translateX(0);\r\n   }\r\n   .trash{\r\n      width:5.066vw;\r\n      margin-right:4.266vw;\r\n   }\r\n   .preview{\r\n     width:300%;\r\n     height:100vh;\r\n     display: flex;\r\n     flex-direction: row;\r\n     align-items: center;\r\n     li{\r\n      width:100vw;\r\n      height:100vh;\r\n      display: flex;\r\n      flex-direction: row;\r\n      align-items: center;\r\n      justify-content: center;\r\n      img{\r\n        width:100vw;\r\n      }\r\n     }\r\n   }\r\n   #ss{\r\n     .mint-actionsheet-list{\r\n       \r\n        .mint-actionsheet-listitem:first-child{\r\n          color:#909090;\r\n            \r\n        }\r\n        .mint-actionsheet-listitem:last-child{\r\n          color:#DB6971;\r\n        }\r\n       \r\n      \r\n       \r\n     }\r\n   }\r\n }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/Personal/imgPreview.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"previewBox\"}},[_c('mybanner',{staticStyle:{\"border\":\"none\",\"background\":\"#fff\"},attrs:{\"title\":_vm.title}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.picVal.length>0),expression:\"picVal.length>0\"}],staticClass:\"trash\",attrs:{\"src\":require(\"../../assets/imgs/trash.png\"),\"alt\":\"\"},on:{\"click\":_vm.openAction}})]),_vm._v(\" \"),_c('ul',{ref:\"preview\",staticClass:\"preview\"},_vm._l((_vm.picVal),function(imgs,index){return _c('li',{key:index,on:{\"touchstart\":function($event){return _vm.start($event)},\"touchmove\":function($event){return _vm.move($event)},\"touchend\":function($event){return _vm.end($event)}}},[_c('img',{attrs:{\"src\":imgs.url,\"alt\":\"\"}})])}),0),_vm._v(\" \"),_c('mt-actionsheet',{attrs:{\"actions\":_vm.actions,\"id\":\"ss\"},model:{value:(_vm.sheetVisible),callback:function ($$v) {_vm.sheetVisible=$$v},expression:\"sheetVisible\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f07eb7d4\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Personal/imgPreview.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f07eb7d4\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./imgPreview.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./imgPreview.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./imgPreview.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f07eb7d4\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./imgPreview.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Personal/imgPreview.vue\n// module id = null\n// module chunks = ","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAYAAACoPemuAAADLUlEQVRYR+2YSWgUQRSG/9dDiERy8WYURAUXlLj0dHdCjip60biAuG+IBxFR9GLUk9tF0YN4EFQS94P7ye0YknqVdomoUVARXG5egmII008KpkNl0h0kMxkRpm/Vr+t/X73XVfWqCEU89fX1Y6urq48S0SRbRkQ+9/X1Heru7v45UnkaaUfTz/O8i0S0NUlDRC5prbeNVL8oMN/3NYBsivMuZvb+CVgQBI9FZGGScyJ6opRaVDIwz/M2ENFOAGMA5FKEJW+bBaA25ZteAK8BZACkZcbYfovIOa31FVtnSAff943Tsj/MPIjlvwL7BcBErVyRM8EhZq4ZNpVNTU11/f39fcz8Y5h/o1SpFt/3x1VVVVW3t7d/GxYsNrquW1NbWxuViiBJp7e31wnD0GRoyJM4WzzPW0pEd8qQThKRFVrrB4VkaWAriejWaEYr1haRVVrr238F1tDQsCyKonvlAHMcp7mzs/N+MWBmsf0AYFoK8Mf8+ykp9vcApuYX3IFPigITkW9RFC0Iw7DH87wlRGRGWGUBtDLzFtP2fb8VwCbL1g9gKTM/dF13huM4T4moLrYXBUZER5VSh2Mxz/MeEdHAPpjL5erCMPxu7K7rjs9kMvbUf8TMi+O+QRAcEZFDJQETkf1a61OxWEJUpjDzp3zEJgOI02petTHzZmtQ+4joZEnAABxk5uOW+HUiWhO3oyia0dXV9c60s9nsdMdxeqxZd0NrvdYaVAuAYxWwSsQKFtjKPxZPisS9MmFLqkSsEjERqSyw5mqgsiUNqu0KlwsialFKnbA24qsA1v3NJg7gGjOvt8qeAyIyUBAUW4/tVUqdscDaAGyM25lMZmJHR8dX025sbJyQy+W+WCO9zMwDhWMQBHtE5HSpqosLzLzdAnsGYJ7lfC4zv8zXY3MAvLBsz5l5vlUyDbq6KipiACIi2i0iBsikcNeg3ANviWiHeSci5wHMLLCfNSnNX1mZyDsjilgQBM0icrdAfFSaRLRcKTXkRJZ2rlxNRDdHhaRAVETWaK2H+EoEy2azsx3HeVUOMCKapZR6U+gr9arT9/3lBcewknMSUWtSGo2jP4dTxkWy4Z3CAAAAAElFTkSuQmCC\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/imgs/trash.png\n// module id = yN4H\n// module chunks = 62"],"sourceRoot":""}