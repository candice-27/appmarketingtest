webpackJsonp([79],{rFmw:function(t,a){},tF4t:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e("4YfN"),n=e.n(r),i=(e("84iU"),e("xd7I")),o=e("7LQH"),s=e("vGYV"),c=e("JFlM"),h=e("HVJf"),d=e("X9U8"),l=e("Ueg1"),y=e("MaX7"),u=e("cFe5"),m=e("7m0P"),b=e("YV7O"),p=e("bNyG");i.default.use(o.a),i.default.use(h.a);var g={name:"brand",components:{Bar:l.a,Pie:y.a,chartsTit:u.a,RouterLink:m.a,mybanner:b.a,SelectComponent:d.a,noData:p.a},data:function(){return{ajaxData:{},brandData:{},categoryData:{},type:this.$route.query.type,typeName:"brand"===this.$route.query.type?"品牌":"品类",port:"brand"===this.$route.query.type?"/v1/app/report/brand/proportion":"/v1/app/report/category/proportion",title:"",endTime:s.a.getLocalTime("end"),key1:!1,key2:!1,brandchanrtDom1:"",brandchanrtDom2:"",brandShow:!1,categoryShow:!1,i:0,brandPieShow:[!1,!1],categoryPieShow:[!1,!1]}},created:function(){var t=localStorage.getItem("ajaxData");this.ajaxData=JSON.parse(t),this.title=this.typeName+"报表"},mounted:function(){this.getBrandData(this.endTime),this.getCategoryData(this.endTime)},computed:n()({test:function(){}},Object(h.d)({startTimeSelect:function(t){return t.select.startTimeSelect},endTimeSelect:function(t){return t.select.endTimeSelect}})),watch:{endTimeSelect:function(){this.endTimeSelect&&""!=this.endTimeSelect&&(this.getBrandData(this.endTimeSelect),this.getCategoryData(this.endTimeSelect))},brandData:function(){if(this.key2&&this.brandData.series){Object(c.b)(this,"brand","horizontal",!0),this.brandchanrtDom1=c.a;try{this.brandchanrtDom1.resize()}catch(t){console.log(t)}}},categoryData:function(){if(this.key2&&this.categoryData.series){Object(c.b)(this,"category","horizontal"),this.brandchanrtDom2=c.a;try{this.brandchanrtDom2.resize()}catch(t){console.log(t)}}}},beforeDestroy:function(){this.brandchanrtDom1&&this.brandchanrtDom1.dispose(),this.brandchanrtDom2&&this.brandchanrtDom2.dispose()},methods:{goToChild:function(){this.$router.push({path:"/child"})},getBrandData:function(t){var a=this;this.i+=1,s.a.loading("open");var e=this;s.a.getAjax(this.port,{tenantId:this.ajaxData.tenantId,date:t,type:"sum"}).then(function(t){if(s.a.loading("close"),t){a.key1=!0,t=t.data,e.brandData=t;var r=t.series;r&&r.forEach(function(t,e){console.log("seriesData",r[e]),a.brandPieShow[e]=Object(c.d)(r[e].data)}),a.brandShow=Object(c.c)(t.series)}})},getCategoryData:function(t){var a=this;s.a.loading("open");var e=this;s.a.getAjax(this.port,{tenantId:this.ajaxData.tenantId,date:t,type:"count"}).then(function(t){if(s.a.loading("close"),t){a.key2=!0,t=t.data,e.categoryData=t;var r=t.series;r&&r.forEach(function(t,e){a.categoryPieShow[e]=Object(c.d)(r[e].data)}),a.categoryShow=Object(c.c)(t.series)}})},chartsEvent:function(t){"series"===t.componentType&&this.$router.push({path:"/brandCatogrySales"}),console.log("报表组件传回的数据：",t)}}},D={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"brand paddingTop"},[e("mybanner",{attrs:{title:t.title}}),t._v(" "),e("SelectComponent"),t._v(" "),e("ul",[t._l(t.brandData.series,function(a,r){return e("li",{key:r+"11"},[t.brandShow?t._e():e("div",{staticClass:"barBox"},[e("chartsTit",{attrs:{text:"各"+t.typeName+"金额占比-"+a.name}}),t._v(" "),t.brandPieShow[r]?t._e():e("Pie",{attrs:{yAxisData:t.brandData.yAxisData,seriesData:a.data,title:"各"+t.typeName+"金额占比-"+a.name,category:"整体"+t.typeName+"占比",height:120}}),t._v(" "),t.brandPieShow[r]?e("noData"):t._e()],1)])}),t._v(" "),e("li",[e("div",{staticClass:"barBox"},[e("chartsTit",{attrs:{text:"各"+t.typeName+"销售额对比"}},[e("h6",[t._v("单位：万元")])]),t._v(" "),t.brandShow?t._e():e("Bar",{attrs:{data:t.brandData,vertical:"horizontal",title:"各"+t.typeName+"金额对比",height:120,salesVal:!0},on:{chartsClick:t.chartsEvent}}),t._v(" "),t.brandShow?e("noData"):t._e()],1)])],2),t._v(" "),e("ul",[t._l(t.categoryData.series,function(a,r){return e("li",{key:r+"11"},[t.categoryShow?t._e():e("div",{staticClass:"barBox"},[e("chartsTit",{attrs:{text:"各"+t.typeName+"数量占比-"+a.name}}),t._v(" "),t.categoryPieShow[r]?t._e():e("Pie",{attrs:{yAxisData:t.categoryData.yAxisData,seriesData:a.data,title:"各"+t.typeName+"数量占比-"+a.name,category:"各"+t.typeName+"数量占比",height:120}}),t._v(" "),t.categoryPieShow[r]?e("noData"):t._e()],1)])}),t._v(" "),e("li",[e("div",{staticClass:"barBox"},[e("chartsTit",{attrs:{text:"各"+t.typeName+"数量对比"}},[e("h6",[t._v("单位：件")])]),t._v(" "),t.categoryShow?t._e():e("Bar",{attrs:{data:t.categoryData,vertical:"horizontal",title:"各"+t.typeName+"数量对比",height:120}}),t._v(" "),t.categoryShow?e("noData"):t._e()],1)])],2)],1)},staticRenderFns:[]};var v=e("C7Lr")(g,D,!1,function(t){e("rFmw")},"data-v-7bcf7a1c",null);a.default=v.exports}});