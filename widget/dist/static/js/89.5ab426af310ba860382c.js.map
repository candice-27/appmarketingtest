{"version":3,"sources":["webpack:///src/pages/Personal/intention/addIntention.vue","webpack:///./src/pages/Personal/intention/addIntention.vue?b9f6","webpack:///./src/pages/Personal/intention/addIntention.vue"],"names":["indexModel","addIntention","data","form","oppId","goodsList","addressId","shopId","arrivalDate","budget","deliverDate","residentTime","source","stylePref","progress","colorPref","competingGoods","buyReason","depositPaid","argreeDiscount","remark","urgency","level","recordList","isFirstEnter","goodsValue","shopName","sourceName","apartmentType","elevator","address","buyReasonName","stylePrefName","progressName","colorPrefName","selectIcon","readonly","failReason","isPrompt","customerId","path","status","url","go","components","mybanner","banner","yanInput","yanTextarea","dateSelect","titleBar","intentionSelect","storeSelect","durationSelect","sourceSelect","addressSelect","reasonSelect","styleSelect","progressSelect","classifySelect","recordPannel","yanLayerPrompt","colorSelect","discountSelect","yanOneInput","watch","$route","to","from","_this","this","name","obj","query","$store","state","addressList","map","item","index","console","log","assign_default","province","city","district","checkedList","length","goodsName","goodsId","crmId","quantity","shops","JSON","parse","localStorage","getItem","shopIndex","id","computed","extends_default","Object","vuex_esm","created","updateTitle","meta","keepAlive","activated","params","fullPath","getProduct","getShop","mounted","methods","_this2","addRecord","$router","replace","listen","js","tip","getAddress","_this3","then","res","code","provinceName","cityName","districtName","apartmentTypeName","msg","catch","reject","getShopName","valid","reg","test","compareTimeStamp","substring","submit","_this4","Akey","FormData","append","i","push","key","concat","lastKey","_i","get","delete","updateOpportunity","setCheckedList","updateSearchProductList","$destroy","back","openStore","type","updateClassify","option","updateUrgency","updateTime","value","anotherVal","updateDuration","updateReason","updateSource","updateStyle","updateProgress","updateColor","updateDeliver","updateDiscount","arr","discount","join","parseFloat","clearKeepAlive","beforeRouteLeave","next","intention_addIntention","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","background","attrs","title","on","click","_v","text","titleModule","info","_b","showIcon","formInfo","intention","store","update","time","duration","house","reason","style","maxlength","model","callback","$$v","$set","trim","expression","goods","color","deliver","paid","margin-bottom","label","checked","options","classify","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/89.5ab426af310ba860382c.js","sourcesContent":["<template>\r\n    <div class=\"addAdress\">\r\n      <mybanner :title=\"title\" style=\"background:#f8f8f8\">\r\n        <button type=\"button\" @click=\"submit\">保存</button>\r\n      </mybanner>\r\n      <title-bar :text=\"titleModule.info\"></title-bar>\r\n      <ul class=\"list\">\r\n        <li>\r\n          <intention-select v-bind=\"formInfo.intention\" :value=\"goodsValue\" :id=\"customerId\" :url=\"path\" :showIcon=\"selectIcon\"/>\r\n        </li>\r\n        <li @click=\"openStore\">\r\n         <store-select v-bind=\"formInfo.store\" :value=\"shopName\"  :showIcon=\"selectIcon\"/>\r\n        </li>\r\n        <li>\r\n          <date-select v-bind=\"formInfo.time\" :value=\"form.arrivalDate\" @update=\"updateTime\" :showIcon=\"selectIcon\"/>\r\n        </li>\r\n        <li>\r\n          <duration-select v-bind=\"formInfo.duration\" :value=\"form.residentTime\" @update=\"updateDuration\" :showIcon=\"selectIcon\"/>\r\n        </li>\r\n        <li>\r\n          <source-select v-bind=\"formInfo.source\" :value=\"sourceName\" @update=\"updateSource\" :showIcon=\"selectIcon\"/>\r\n        </li>\r\n      </ul>\r\n       <ul class=\"list\">\r\n        <li>\r\n          <address-select v-bind=\"formInfo.address\" :value=\"address\" :id=\"customerId\" :url=\"path\" :showIcon=\"selectIcon\"/>\r\n        </li>\r\n         <li>\r\n          <yan-input v-bind=\"formInfo.house\" :value=\"apartmentType\" :readonly='true' @click=\"listen\"/>\r\n        </li>\r\n        <li>\r\n          <yan-input v-bind=\"formInfo.elevator\" :value=\"elevator\" :readonly='true'  @click=\"listen\"/>\r\n        </li>\r\n        <li>\r\n          <reason-select v-bind=\"formInfo.reason\" :value=\"buyReasonName\" @update=\"updateReason\" :showIcon=\"selectIcon\"/>\r\n        </li>\r\n        <li>\r\n          <style-select v-bind=\"formInfo.style\" :value=\"stylePrefName\" @update=\"updateStyle\" :showIcon=\"selectIcon\"/>\r\n        </li>\r\n        <li>\r\n          <progress-select v-bind=\"formInfo.progress\" :value=\"progressName\" @update=\"updateProgress\" :showIcon=\"selectIcon\"/>\r\n        </li>\r\n      </ul>\r\n      <ul class=\"list\">\r\n         <li>\r\n          <!-- <yan-input v-bind=\"formInfo.goods\" v-model.trim=\"form.competingGoods\" :readonly='readonly' :maxlength='100'/> -->\r\n          <yan-one-input v-bind=\"formInfo.goods\" v-model.trim=\"form.competingGoods\" :readonly='readonly' :maxlength='100'/>\r\n        </li>\r\n        <li>\r\n          <color-select v-bind=\"formInfo.color\" :value=\"colorPrefName\" @update=\"updateColor\" :showIcon=\"selectIcon\"/>\r\n        </li>\r\n        <li>\r\n          <yan-input v-bind=\"formInfo.budget\" v-model.trim=\"form.budget\" :readonly='readonly' :maxlength='8'/>\r\n        </li>\r\n        <li>\r\n          <date-select v-bind=\"formInfo.deliver\" :value=\"form.deliverDate\" @update=\"updateDeliver\" :showIcon=\"selectIcon\"/>\r\n        </li>\r\n         <li>\r\n          <yan-input v-bind=\"formInfo.paid\" v-model.trim=\"form.depositPaid\" :readonly='readonly' :maxlength='8'/>\r\n        </li>\r\n        <li>\r\n          <discount-select v-bind=\"formInfo.discount\" :value=\"form.argreeDiscount\" @update=\"updateDiscount\" :showIcon=\"selectIcon\"/>\r\n        </li>\r\n      </ul>\r\n      <yan-textarea v-bind=\"formInfo.remark\" :maxlength='200' :readonly='readonly' v-model=\"form.remark\"></yan-textarea>\r\n      <div class=\"select\">\r\n        <classify-select style=\"margin-bottom:2.666vw\" label=\"意向分类\" @update=\"updateClassify\" name=\"classify\" :checked=\"form.level\" :options=\"formInfo.classify\"/>\r\n        <classify-select label=\"是否紧急\" @update=\"updateUrgency\" name=\"urgency\" :checked=\"urgency\" :options=\"formInfo.urgency\"/>\r\n      </div>\r\n     <!--  <div v-if=\"status==='New'\">\r\n         <title-bar :text=\"titleModule.report\">\r\n           <button type=\"button\" @click=\"addRecord\">添加记录</button>\r\n         </title-bar>\r\n         <record-pannel :recordList=\"form.recordList\"/>\r\n      </div>\r\n      <p class=\"last\">到底啦</p>\r\n      <yan-layer-prompt v-if=\"isPrompt\" placeholder=\"请输入流失原因\" v-model='failReason' @update='layerUpdate' @cancel=\"layerCancel\">\r\n        <span slot='update'>确定</span>\r\n        <span slot='cancel'>取消</span>\r\n      </yan-layer-prompt> -->\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport mybanner from '../../../components/banner'\r\nimport titleBar from '../../../components/common/titleBar'\r\nimport yanInput from '../../../components/yanInput'\r\nimport yanOneInput from '../../../components/yanOneInput'\r\nimport yanTextarea from '../../../components/yanTextarea'\r\nimport intentionSelect from '../../../components/mySelect/intentionSelect'\r\nimport storeSelect from '../../../components/mySelect/storeSelect'\r\nimport dateSelect from '../../../components/mySelect/dateSelect'\r\nimport durationSelect from '../../../components/mySelect/durationSelect'\r\nimport sourceSelect from '../../../components/mySelect/sourceSelect'\r\nimport addressSelect from '../../../components/mySelect/addressSelect'\r\nimport reasonSelect from '../../../components/mySelect/reasonSelect'\r\nimport styleSelect from '../../../components/mySelect/styleSelect'\r\nimport colorSelect from '../../../components/mySelect/colorSelect'\r\nimport progressSelect from '../../../components/mySelect/progressSelect'\r\nimport discountSelect from '../../../components/mySelect/discountSelect'\r\nimport classifySelect from '../../../components/mySelect/classifySelect'\r\nimport recordPannel from '../../../components/pannel/recordPannel'\r\nimport yanLayerPrompt from '../../../components/myLayer/yanLayerPrompt'\r\nimport { Toast } from 'mint-ui';\r\nimport { mapState, mapMutations } from 'vuex'\r\nimport mango from '../../../js'\r\nimport { IndexModel } from '../../../utils'\r\nconst indexModel=new IndexModel()\r\nexport default {\r\n  data () {\r\n    return {\r\n      form:{\r\n        oppId:'',\r\n        goodsList:[],\r\n        addressId:'',\r\n        shopId:'',\r\n        arrivalDate:'',  //进店日期\r\n        budget:'',\r\n        deliverDate:'',    //需求日期\r\n        residentTime:'',   //留店时长\r\n        source:'',  //客户来源\r\n        stylePref:'',   //风格\r\n        progress:'',   //进度\r\n        colorPref:'',    //颜色偏好\r\n        competingGoods:'',\r\n        buyReason:'',   //购买原因\r\n        depositPaid:'',     //已缴定金\r\n        argreeDiscount:'',    //协议折扣，例：80（百分之80折扣）\r\n        remark:'',\r\n        urgency:'',   //是否紧急\r\n        level:'A',   //等级\r\n        recordList:[]\r\n      },\r\n      isFirstEnter:false,\r\n      goodsValue:'',\r\n      shopName:'',\r\n      sourceName:'',\r\n      apartmentType:'',\r\n      elevator:'',\r\n      address:'',\r\n      buyReasonName:'',\r\n      stylePrefName:'',\r\n      progressName:'',\r\n      colorPrefName:'',\r\n      selectIcon:true,\r\n      readonly:false,\r\n      failReason:'',\r\n      isPrompt:false,\r\n      customerId:'',\r\n      path:'',\r\n      status:'',\r\n      urgency:'否',\r\n      url:'',\r\n      go:-1\r\n    }\r\n  },\r\n  components:{\r\n     mybanner,\r\n     yanInput,\r\n     yanTextarea,\r\n     dateSelect,\r\n     titleBar,\r\n     intentionSelect,\r\n     storeSelect,\r\n     durationSelect,\r\n     sourceSelect,\r\n     addressSelect,\r\n     reasonSelect,\r\n     styleSelect,\r\n     progressSelect,\r\n     classifySelect,\r\n     recordPannel,\r\n     yanLayerPrompt,\r\n     colorSelect,\r\n     discountSelect,\r\n     yanOneInput\r\n  },\r\n  watch:{\r\n    $route(to,from){\r\n      //console.log(from);\r\n      if(from.name==='selectAddress'){\r\n        let obj={};\r\n        if(this.$route.query.addressId){\r\n          this.$store.state.addressList.map((item,index) => {\r\n            console.log(item);\r\n            if(item.addressId===this.$route.query.addressId){\r\n              console.log('进来了');\r\n              obj=Object.assign({},item);\r\n            }\r\n          })\r\n          let address=`${obj.province}${obj.city}${obj.district}${obj.address}`;\r\n          let elevator=obj.elevator==='Y'?'有':'无';\r\n          this.address=address;\r\n          this.apartmentType=obj.apartmentType;\r\n          this.elevator=elevator;\r\n          this.form.addressId=this.$route.query.addressId;\r\n        }else{\r\n          this.address='未收集地址';\r\n          this.apartmentType='未收集户型';\r\n          this.elevator='未收集';    \r\n        }\r\n        \r\n      }\r\n      if(from.name==='intentionProduct'){\r\n        console.log('进来intentionProduct');\r\n        console.log(this.$store.state.checkedList.length);\r\n        //let list=JSON.parse(localStorage.getItem('product'));\r\n        if(this.$store.state.checkedList.length>0){\r\n          this.goodsValue=this.$store.state.checkedList[0].goodsName;\r\n          this.form.goodsList=this.$store.state.checkedList.map((item,index) => {\r\n            let obj={};\r\n            obj.goodsId=item.crmId;\r\n            obj.goodsName=item.goodsName;\r\n            obj.quantity=item.quantity;\r\n            return obj;\r\n          });\r\n        }else{\r\n          this.goodsValue='';\r\n          this.form.goodsList=[];\r\n        }\r\n      }\r\n      if(from.name==='chooseShop'){\r\n        console.log(\"进来chooseShop\");\r\n        let shops=JSON.parse(localStorage.getItem('shops'));\r\n        console.log(shops);\r\n        this.go=-2;\r\n        let shopIndex=localStorage.getItem('shopIndex');\r\n        console.log(shopIndex);\r\n        shops.map((item,index) => {\r\n          if(shopIndex==index){\r\n            this.form.shopId=item.id;\r\n            this.shopName=item.name;\r\n          }\r\n        })\r\n      }\r\n      \r\n    }\r\n  },\r\n  computed:{\r\n    ...mapState('addIntention',[\r\n      'title',\r\n      'formInfo',\r\n      'titleModule'\r\n    ]),\r\n    ...mapState(['checkedList'])\r\n  },\r\n  created(){\r\n    this.updateTitle('新建意向');\r\n    this.$route.meta.keepAlive=true;\r\n  },\r\n  activated(){\r\n    this.customerId=this.$route.params.customerId;\r\n    this.path=this.$route.fullPath;\r\n    this.url=this.$route.query.url;\r\n    console.log(this.checkedList);\r\n    this.getProduct();\r\n    this.getShop();\r\n    console.log(\"回退进了created\");\r\n    this.isFirstEnter=true;\r\n  },\r\n  mounted(){\r\n   \r\n  },\r\n  methods:{\r\n    ...mapMutations('addIntention',['updateTitle']),\r\n    ...mapMutations(['updateAddress','setCheckedList','updateSearchProductList']),\r\n    getShop(){\r\n      let shops=JSON.parse(localStorage.getItem('shops'));\r\n      console.log(shops);\r\n      let shopIndex=localStorage.getItem('shopIndex');\r\n      console.log(shopIndex);\r\n      shops.map((item,index) => {\r\n        if(shopIndex==index){\r\n          this.form.shopId=item.id;\r\n          this.shopName=item.name;\r\n        }\r\n      })\r\n    },\r\n    getProduct(){\r\n      if(this.$store.state.checkedList.length<=0){\r\n        this.goodsValue='';\r\n        this.form.goodsList=[];\r\n      }else{\r\n        this.goodsValue=this.$store.state.checkedList[0].goodsName;\r\n        this.form.goodsList=this.$store.state.checkedList.map((item,index) => {\r\n          let obj={};\r\n          obj.goodsId=item.crmId;\r\n          obj.goodsName=item.goodsName;\r\n          obj.quantity=item.quantity;\r\n          return obj;\r\n        });\r\n      }\r\n    },\r\n    addRecord(){\r\n     this.$router.replace({name:'followRecord',query:{oppId:this.oppId}});\r\n   },\r\n    listen(){\r\n      if(this.form.address===''){\r\n        mango.tip('请先选择地址');\r\n      }\r\n    },\r\n    getAddress(id){\r\n     indexModel.getAddress(id).then(res => {\r\n          if(res.code===0){\r\n            this.address=`${res.data.provinceName}${res.data.cityName}${res.data.districtName}${res.data.address}`;\r\n            this.apartmentType=res.data.apartmentTypeName;\r\n            this.elevator=res.data.elevator==='Y'?'有电梯':'无电梯';\r\n          }else{\r\n            mango.tip(res.msg);\r\n          }\r\n    }).catch((reject) => {\r\n        if (reject === 510) {\r\n          this.getAddress(id)\r\n        }\r\n      })\r\n   },\r\n   getShopName(id){\r\n    let shops=localStorage.getItem('shops');\r\n    //console.log(shops);\r\n    let list=JSON.parse(shops);\r\n    //console.log(list)\r\n    let name;\r\n    list.map((item,index) => {\r\n       //console.log(item);\r\n       if(item.id===id){\r\n         return name=item.name;\r\n       } \r\n     })\r\n     //console.log(arr);\r\n     return name;\r\n   },\r\n    valid(){\r\n      if(this.customerId===''){\r\n        mango.tip('客户ID不能为空');\r\n        return false;\r\n      }\r\n      if(this.form.goodsList.length<=0){\r\n        mango.tip('意向产品不能为空');\r\n        return false;\r\n      }\r\n      if(this.form.arrivalDate===''){\r\n        mango.tip('进店日期不能为空');\r\n        return false;\r\n      }\r\n      if(this.form.shopId===''){\r\n        mango.tip('门店不能为空');\r\n        return false;\r\n      }\r\n      if(this.form.residentTime===''){\r\n        mango.tip('留店时长不能为空');\r\n        return false;\r\n      }\r\n      if(this.form.source===''){\r\n        mango.tip('客户来源不能为空');\r\n        return false;\r\n      }\r\n      if(this.form.addressId===''){\r\n        mango.tip('请选择地址,如无地址请先新建地址');\r\n        return false;\r\n      }\r\n      var reg=/^\\d{1,}\\.{0,1}\\d{0,}$/;\r\n      if(this.form.budget!==''&&!reg.test(this.form.budget)){\r\n        mango.tip('预算金额必须为数字');\r\n        return false;\r\n      }\r\n      if(this.form.depositPaid!==''&&!reg.test(this.form.depositPaid)){\r\n        mango.tip('已交定金必须为数字');\r\n        return false;\r\n      }\r\n      if(this.form.deliverDate!==''){\r\n        if(!mango.compareTimeStamp(this.form.arrivalDate,this.form.deliverDate)){\r\n          mango.tip('需求日期不能小于到店日期');\r\n          return false;\r\n        }\r\n      }\r\n      if(this.form.budget.length>8){\r\n        this.form.budget=this.form.budget.substring(0,8);\r\n        mango.tip('预算金额不能超过8个字');\r\n        return false;\r\n      }\r\n       if(this.form.depositPaid.length>8){\r\n        this.form.depositPaid=this.form.depositPaid.substring(0,8);\r\n        mango.tip('已交定金不能超过8个字');\r\n        return false;\r\n      }\r\n      if(this.form.competingGoods.length>100){\r\n        this.form.competingGoods=this.form.competingGoods.substring(0,100);\r\n        mango.tip('竞品产品不能超过100个字');\r\n        return false;\r\n      }\r\n      if(this.form.remark.length>200){\r\n        this.form.remark=this.form.remark.substring(0,200);\r\n        mango.tip('备注信息不能超过200个字');\r\n        return false;\r\n      }\r\n      return true;\r\n\r\n    },\r\n    submit(){\r\n     if(this.valid()){\r\n        let Akey=[];\r\n        let form=new FormData();\r\n        form.append('customerId',this.customerId);\r\n        form.append('opportunity.oppId',this.form.oppId);\r\n         \r\n        if(this.form.goodsList.length>0){\r\n          for(let i=0;i<this.form.goodsList.length;i++){\r\n             form.append(`opportunity.goodsList[${i}].goodsId`,this.form.goodsList[i].goodsId);\r\n             form.append(`opportunity.goodsList[${i}].quantity`,this.form.goodsList[i].quantity);\r\n             Akey.push(`opportunity.goodsList[${i}].goodsId`);\r\n             Akey.push(`opportunity.goodsList[${i}].quantity`);\r\n          }\r\n        }\r\n        form.append('opportunity.addressId',this.form.addressId);\r\n        form.append('opportunity.shopId',this.form.shopId);\r\n        form.append('opportunity.arrivalDate',this.form.arrivalDate);\r\n        form.append('opportunity.deliverDate',this.form.deliverDate);\r\n        form.append('opportunity.residentTime',this.form.residentTime);\r\n        form.append('opportunity.source',this.form.source);\r\n        form.append('opportunity.stylePref',this.form.stylePref);\r\n        form.append('opportunity.progress',this.form.progress);\r\n        form.append('opportunity.colorPref',this.form.colorPref);\r\n        form.append('opportunity.competingGoods',this.form.competingGoods);\r\n        form.append('opportunity.buyReason',this.form.buyReason);\r\n        form.append('opportunity.budget',this.form.budget);\r\n        form.append('opportunity.depositPaid',this.form.depositPaid);\r\n        form.append('opportunity.argreeDiscount',this.form.argreeDiscount);\r\n        form.append('opportunity.remark',this.form.remark);\r\n        form.append('opportunity.urgency',this.form.urgency);\r\n        form.append('opportunity.level',this.form.level);\r\n\r\n        let Bkey=['customerId','opportunity.oppId','opportunity.addressId','opportunity.shopId','opportunity.arrivalDate',\r\n        'opportunity.deliverDate','opportunity.residentTime','opportunity.source','opportunity.stylePref','opportunity.progress',\r\n        'opportunity.colorPref','opportunity.competingGoods','opportunity.buyReason','opportunity.budget','opportunity.depositPaid',\r\n        'opportunity.argreeDiscount','opportunity.remark','opportunity.urgency','opportunity.level'];\r\n        let key=[...Akey,...Bkey];\r\n        let lastKey=[];\r\n        for(let i=0;i<key.length;i++){\r\n          if(form.get(key[i])!==''){\r\n            lastKey.push(key[i]);\r\n          }else{\r\n            form.delete(key[i]);\r\n          }\r\n        }\r\n        indexModel.updateOpportunity(form,[...lastKey]).then(res => {\r\n            if(res.code==0){\r\n              mango.tip(res.msg);\r\n              this.setCheckedList([]);\r\n              this.updateSearchProductList([]);\r\n               this.$destroy();\r\n               \r\n              this.$router.back(this.go);\r\n              console.log(\"执行了\");\r\n            }else{\r\n              mango.tip(res.msg);\r\n            }\r\n        })\r\n     }\r\n    },\r\n    \r\n    \r\n    \r\n    openStore(){\r\n      this.$router.push({name:'chooseShop',query: {type: 'addintention'}});\r\n      \r\n    },\r\n   updateClassify(option){\r\n    this.form.level=option;\r\n    console.log(\"选择\"+this.form.level);\r\n   },\r\n   updateUrgency(option){\r\n    this.urgency=option;\r\n    if(option==='是'){\r\n      this.form.urgency='true';\r\n    }else{\r\n       this.form.urgency='false';\r\n    }\r\n    console.log(\"选择\"+this.urgency);\r\n   },\r\n   //选择更新进店日期\r\n   updateTime(value,anotherVal){\r\n     this.form.arrivalDate=anotherVal;\r\n   },\r\n   //选择更新留店时长\r\n   updateDuration(value){\r\n     console.log(value);\r\n     if(!value){\r\n       this.form.residentTime='0分钟';\r\n       return;\r\n     }\r\n    this.form.residentTime=value;\r\n     \r\n    \r\n   },\r\n   //选择更新购买原因\r\n   updateReason(name,code){\r\n     this.buyReasonName=name;\r\n     this.form.buyReason=code;\r\n   },\r\n   //选择更新客户来源\r\n   updateSource(name,code){\r\n     this.sourceName=name;\r\n     this.form.source=code;\r\n   },\r\n   //选择更新装修风格\r\n   updateStyle(name,code){\r\n     this.stylePrefName=name;\r\n     this.form.stylePref=code;\r\n   },\r\n   //选择更新装修进度\r\n   updateProgress(name,code){\r\n     this.progressName=name;\r\n     this.form.progress=code;\r\n   },\r\n   //选择更新颜色偏好\r\n   updateColor(name,code){\r\n     this.colorPrefName=name;\r\n     this.form.colorPref=code;\r\n   },\r\n   //选择更新需求日期\r\n   updateDeliver(value,anotherVal){\r\n     this.form.deliverDate=anotherVal;\r\n   },\r\n   //选择更新折扣\r\n   updateDiscount(arr){\r\n     console.log(arr);\r\n     let discount=arr.join('.');\r\n     discount=parseFloat(discount)*10;\r\n     console.log(discount);\r\n     this.form.argreeDiscount=discount;\r\n   },\r\n   //离开清除缓存\r\n   clearKeepAlive(){\r\n      let obj={\r\n        oppId:'',\r\n        goodsList:[],\r\n        addressId:'',\r\n        shopId:'',\r\n        arrivalDate:'',  //进店日期\r\n        budget:'',\r\n        deliverDate:'',    //需求日期\r\n        residentTime:'',   //留店时长\r\n        source:'',  //客户来源\r\n        stylePref:'',   //风格\r\n        progress:'',   //进度\r\n        colorPref:'',    //颜色偏好\r\n        competingGoods:'',\r\n        buyReason:'',   //购买原因\r\n        depositPaid:'',     //已缴定金\r\n        argreeDiscount:'',    //协议折扣，例：80（百分之80折扣）\r\n        remark:'',\r\n        urgency:'',   //是否紧急\r\n        level:'A',   //等级\r\n        recordList:[]\r\n      }\r\n      this.form=obj;\r\n      this.goodsValue='';\r\n      this.shopName='';\r\n      this.sourceName='';\r\n      this.apartmentType='';\r\n      this.elevator='';\r\n      this.address='';\r\n      this.buyReasonName='';\r\n      this.stylePrefName='';\r\n      this.progressName='';\r\n      this.colorPrefName='';\r\n      this.selectIcon=true;\r\n      this.readonly=false;\r\n      this.failReason='';\r\n      this.isPrompt=false;\r\n      this.customerId='';\r\n      this.path='';\r\n      this.status='';\r\n      this.urgency='否';\r\n      this.url='';\r\n      this.go=-1;\r\n   }\r\n  },\r\n  //  beforeRouteEnter(to,from,next){\r\n   // console.log(\"进来addIntention\",to);\r\n    // if(from.name==='selectAddress'){\r\n    //   to.meta.keepAlive=true;\r\n    //   next();\r\n    // }\r\n    // if(from.name==='searchProduct'){\r\n    //   to.meta.keepAlive=true;\r\n    //   next();\r\n    // }\r\n    // if(from.name==='intentionProduct'){\r\n    //   to.meta.keepAlive=true;\r\n    //   next();\r\n    // }\r\n    // if(from.name==='chooseShop'){\r\n    //     to.meta.keepAlive=true;\r\n    //     next();\r\n      \r\n    // }\r\n    // if(from.name==='intention'){\r\n    //   to.meta.keepAlive=false;\r\n    //   next();\r\n    // }\r\n    // if(from.name==='/enquiryInfo'){\r\n    //   to.meta.keepAlive=false; \r\n    //   next();\r\n    // }\r\n    // if(from.name==='/CustomerInfo'){\r\n    //   to.meta.keepAlive=false;   \r\n    //   next();\r\n    // }\r\n    // to.meta.keepAlive=true;\r\n    // next();\r\n  // }\r\n  beforeRouteLeave(to,from,next){\r\n   console.log(to.name);\r\n   //console.log(from);\r\n    if(to.name==='/enquiryInfo'){\r\n        //from.meta.keepAlive=false;\r\n        if(!from.meta.keepAlive){\r\n          //this.setCheckedList([]);\r\n          this.clearKeepAlive();\r\n          this.$destroy();\r\n          next();    \r\n        }\r\n    }\r\n    if(to.name==='/CustomerInfo'){\r\n        //from.meta.keepAlive=false;\r\n        if(!from.meta.keepAlive){\r\n          //this.setCheckedList([]);\r\n          this.clearKeepAlive();\r\n           this.$destroy();\r\n          next();    \r\n        }\r\n         next();    \r\n    }\r\n    // if(to.name==='intentionProduct'){\r\n    //     //from.meta.keepAlive=false;\r\n      \r\n    //     from.meta.keepAlive=true;\r\n    //     next();\r\n      \r\n    // }\r\n    \r\n    next();\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n .addAdress{\r\n   width:100vw;\r\n   position: relative;\r\n   box-sizing: border-box;\r\n  padding-top:16.466vw;\r\n  padding-bottom: 6.133vw;\r\n  .list{\r\n    width:100vw;\r\n    border-top:1px solid #e1e1e1;\r\n    border-bottom: 1px solid #e1e1e1;\r\n    background: #fff;\r\n    margin-bottom:2.666vw;\r\n    li{\r\n      padding-left:4.266vw;\r\n      :first-child{\r\n         border-bottom: 1px solid #e1e1e1;\r\n      }\r\n    }\r\n    li:last-child{\r\n      :first-child{\r\n         border:none;\r\n      }\r\n    }\r\n  }\r\n  .next{\r\n    width:100vw;\r\n    padding-left:4.266vw;\r\n    border-top: 1px solid #e1e1e1;\r\n    border-bottom: 1px solid #e1e1e1;\r\n    box-sizing: border-box;\r\n    background: #fff;\r\n  }\r\n  .select{\r\n    margin:4.266vw 0;\r\n  }\r\n  .title{\r\n    color:#363636;\r\n    font-size:4vw;\r\n    padding:0 4.266vw;\r\n  }\r\n  .last{\r\n    color:#909090;\r\n    font-size: 3.2vw;\r\n    text-align: center;\r\n    margin-top:6.666vw;\r\n  }\r\n  .order{\r\n    border-top:1px solid #ccc;\r\n    border-bottom:1px solid #ccc;\r\n    background: #fff;  \r\n  }\r\n\r\n }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/Personal/intention/addIntention.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"addAdress\"},[_c('mybanner',{staticStyle:{\"background\":\"#f8f8f8\"},attrs:{\"title\":_vm.title}},[_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":_vm.submit}},[_vm._v(\"保存\")])]),_vm._v(\" \"),_c('title-bar',{attrs:{\"text\":_vm.titleModule.info}}),_vm._v(\" \"),_c('ul',{staticClass:\"list\"},[_c('li',[_c('intention-select',_vm._b({attrs:{\"value\":_vm.goodsValue,\"id\":_vm.customerId,\"url\":_vm.path,\"showIcon\":_vm.selectIcon}},'intention-select',_vm.formInfo.intention,false))],1),_vm._v(\" \"),_c('li',{on:{\"click\":_vm.openStore}},[_c('store-select',_vm._b({attrs:{\"value\":_vm.shopName,\"showIcon\":_vm.selectIcon}},'store-select',_vm.formInfo.store,false))],1),_vm._v(\" \"),_c('li',[_c('date-select',_vm._b({attrs:{\"value\":_vm.form.arrivalDate,\"showIcon\":_vm.selectIcon},on:{\"update\":_vm.updateTime}},'date-select',_vm.formInfo.time,false))],1),_vm._v(\" \"),_c('li',[_c('duration-select',_vm._b({attrs:{\"value\":_vm.form.residentTime,\"showIcon\":_vm.selectIcon},on:{\"update\":_vm.updateDuration}},'duration-select',_vm.formInfo.duration,false))],1),_vm._v(\" \"),_c('li',[_c('source-select',_vm._b({attrs:{\"value\":_vm.sourceName,\"showIcon\":_vm.selectIcon},on:{\"update\":_vm.updateSource}},'source-select',_vm.formInfo.source,false))],1)]),_vm._v(\" \"),_c('ul',{staticClass:\"list\"},[_c('li',[_c('address-select',_vm._b({attrs:{\"value\":_vm.address,\"id\":_vm.customerId,\"url\":_vm.path,\"showIcon\":_vm.selectIcon}},'address-select',_vm.formInfo.address,false))],1),_vm._v(\" \"),_c('li',[_c('yan-input',_vm._b({attrs:{\"value\":_vm.apartmentType,\"readonly\":true},on:{\"click\":_vm.listen}},'yan-input',_vm.formInfo.house,false))],1),_vm._v(\" \"),_c('li',[_c('yan-input',_vm._b({attrs:{\"value\":_vm.elevator,\"readonly\":true},on:{\"click\":_vm.listen}},'yan-input',_vm.formInfo.elevator,false))],1),_vm._v(\" \"),_c('li',[_c('reason-select',_vm._b({attrs:{\"value\":_vm.buyReasonName,\"showIcon\":_vm.selectIcon},on:{\"update\":_vm.updateReason}},'reason-select',_vm.formInfo.reason,false))],1),_vm._v(\" \"),_c('li',[_c('style-select',_vm._b({attrs:{\"value\":_vm.stylePrefName,\"showIcon\":_vm.selectIcon},on:{\"update\":_vm.updateStyle}},'style-select',_vm.formInfo.style,false))],1),_vm._v(\" \"),_c('li',[_c('progress-select',_vm._b({attrs:{\"value\":_vm.progressName,\"showIcon\":_vm.selectIcon},on:{\"update\":_vm.updateProgress}},'progress-select',_vm.formInfo.progress,false))],1)]),_vm._v(\" \"),_c('ul',{staticClass:\"list\"},[_c('li',[_c('yan-one-input',_vm._b({attrs:{\"readonly\":_vm.readonly,\"maxlength\":100},model:{value:(_vm.form.competingGoods),callback:function ($$v) {_vm.$set(_vm.form, \"competingGoods\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.competingGoods\"}},'yan-one-input',_vm.formInfo.goods,false))],1),_vm._v(\" \"),_c('li',[_c('color-select',_vm._b({attrs:{\"value\":_vm.colorPrefName,\"showIcon\":_vm.selectIcon},on:{\"update\":_vm.updateColor}},'color-select',_vm.formInfo.color,false))],1),_vm._v(\" \"),_c('li',[_c('yan-input',_vm._b({attrs:{\"readonly\":_vm.readonly,\"maxlength\":8},model:{value:(_vm.form.budget),callback:function ($$v) {_vm.$set(_vm.form, \"budget\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.budget\"}},'yan-input',_vm.formInfo.budget,false))],1),_vm._v(\" \"),_c('li',[_c('date-select',_vm._b({attrs:{\"value\":_vm.form.deliverDate,\"showIcon\":_vm.selectIcon},on:{\"update\":_vm.updateDeliver}},'date-select',_vm.formInfo.deliver,false))],1),_vm._v(\" \"),_c('li',[_c('yan-input',_vm._b({attrs:{\"readonly\":_vm.readonly,\"maxlength\":8},model:{value:(_vm.form.depositPaid),callback:function ($$v) {_vm.$set(_vm.form, \"depositPaid\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.depositPaid\"}},'yan-input',_vm.formInfo.paid,false))],1),_vm._v(\" \"),_c('li',[_c('discount-select',_vm._b({attrs:{\"value\":_vm.form.argreeDiscount,\"showIcon\":_vm.selectIcon},on:{\"update\":_vm.updateDiscount}},'discount-select',_vm.formInfo.discount,false))],1)]),_vm._v(\" \"),_c('yan-textarea',_vm._b({attrs:{\"maxlength\":200,\"readonly\":_vm.readonly},model:{value:(_vm.form.remark),callback:function ($$v) {_vm.$set(_vm.form, \"remark\", $$v)},expression:\"form.remark\"}},'yan-textarea',_vm.formInfo.remark,false)),_vm._v(\" \"),_c('div',{staticClass:\"select\"},[_c('classify-select',{staticStyle:{\"margin-bottom\":\"2.666vw\"},attrs:{\"label\":\"意向分类\",\"name\":\"classify\",\"checked\":_vm.form.level,\"options\":_vm.formInfo.classify},on:{\"update\":_vm.updateClassify}}),_vm._v(\" \"),_c('classify-select',{attrs:{\"label\":\"是否紧急\",\"name\":\"urgency\",\"checked\":_vm.urgency,\"options\":_vm.formInfo.urgency},on:{\"update\":_vm.updateUrgency}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-beba489e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Personal/intention/addIntention.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-beba489e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./addIntention.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./addIntention.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./addIntention.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-beba489e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./addIntention.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-beba489e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Personal/intention/addIntention.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}