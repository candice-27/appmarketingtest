webpackJsonp([50],{"/VY8":function(t,a){},ZEmc:function(t,a,e){"use strict";var n=e("vGYV"),i={name:"myDatePicker",components:{},props:["curMonthData"],data:function(){return{year:null,month:null,day:null,curDate:null,dateList:[],selectDate:""}},watch:{curMonthData:function(t){t.length&&(console.log(t),this.dateList=t.map(function(t){return t.createTime}),console.log(this.dateList))}},created:function(){this.getDate()},mounted:function(){},computed:{getBeginDay:function(){return console.log("getBeginDay",new Date(this.year,this.month-1,1).getDay()),new Date(this.year,this.month-1,1).getDay()},curDay:function(){return console.log("getBeginDay111",new Date(this.year,this.month,0).getDate()),new Date(this.year,this.month,0).getDate()},prevDay:function(){return console.log("getBeginDay2222",new Date(this.year,this.month-1,0).getDate()),new Date(this.year,this.month-1,0).getDate()}},methods:{getDate:function(){var t=new Date;this.year=t.getFullYear(),this.month=t.getMonth()+1,this.day=t.getDate(),this.curDate=this.year+"-"+this.month+"-"+this.day,this.selectDate=this.year+"-"+this.month+"-"+this.day},changeCurDay:function(t){this.day=t,this.selectDate=this.year+"-"+this.month+"-"+this.day,this.$emit("getCurDay",this.year+"年"+this.month+"月"+t+"日")},prevMonth:function(){1===this.month?(this.year--,this.month=12):this.month--,this.$emit("changeCurMonthData",this.year+"-"+(this.month<10?"0"+this.month:this.month))},nextMonth:function(){12===this.month?(this.year++,this.month=1):this.month++,this.$emit("changeCurMonthData",this.year+"-"+(this.month<10?"0"+this.month:this.month))},noSummary:function(t){this.curDate===this.year+"-"+this.month+"-"+t?this.$router.push({path:"/newPlan"}):n.a.tip("当日无总结！")},dateCompare:function(t,a){var e=[t.split("-"),a.split("-")],n=e[0],i=e[1];return console.log(parseInt(n[0]),parseInt(i[0])),parseInt(n[0])===parseInt(i[0])?!(parseInt(n[1])<=parseInt(i[1]))||parseInt(n[1])===parseInt(i[1])&&!(parseInt(n[2])<=parseInt(i[2])):!(parseInt(n[0])<parseInt(i[0]))},dateListCompare:function(t){return this.dateList.map(function(t){return t.substr(0,10)}).includes(t)}}},r={render:function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"myDatePicker"},[n("div",{staticClass:"date-header"},[n("div",{staticClass:"prev-month",on:{click:t.prevMonth}},[n("img",{attrs:{src:e("EsD4"),alt:""}})]),t._v(" "),n("div",{staticClass:"show-date"},[t._v(t._s(t.year+"."+(t.month<10?"0"+t.month:t.month)))]),t._v(" "),n("div",{staticClass:"next-month",on:{click:t.nextMonth}},[n("img",{attrs:{src:e("Zhbr"),alt:""}})])]),t._v(" "),n("div",{staticClass:"date-content"},[t._m(0),t._v(" "),n("ul",{staticClass:"week-day"},t._l(42,function(a,e){return n("li",{key:"every_day"+e,staticClass:"every-day"},[a-t.getBeginDay>0&&a-t.getBeginDay<=t.curDay?n("span",{class:{"now-day":t.year+"-"+t.month+"-"+(a-t.getBeginDay)===t.curDate,"active-day":t.year+"-"+t.month+"-"+(a-t.getBeginDay)===t.selectDate,summary:t.dateListCompare(t.year+"-"+(t.month<10?"0"+t.month:t.month)+"-"+(a-t.getBeginDay<10?"0"+(a-t.getBeginDay):a-t.getBeginDay)),"future-day":t.dateCompare(t.year+"-"+t.month+"-"+(a-t.getBeginDay),t.curDate)},on:{click:function(e){t.dateListCompare(t.year+"-"+(t.month<10?"0"+t.month:t.month)+"-"+(a-t.getBeginDay<10?"0"+(a-t.getBeginDay):a-t.getBeginDay))?t.changeCurDay(a-t.getBeginDay):t.noSummary(a-t.getBeginDay)}}},[t._v("\n        "+t._s(a-t.getBeginDay)+"\n        ")]):t._e()])}),0)])])},staticRenderFns:[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ul",{staticClass:"week-header"},[e("li",[t._v("日")]),t._v(" "),e("li",[t._v("一")]),t._v(" "),e("li",[t._v("二")]),t._v(" "),e("li",[t._v("三")]),t._v(" "),e("li",[t._v("四")]),t._v(" "),e("li",[t._v("五")]),t._v(" "),e("li",[t._v("六")])])}]};var s=e("C7Lr")(i,r,!1,function(t){e("/VY8")},"data-v-2913736e",null);a.a=s.exports},kC37:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("a3Yh"),i=e.n(n),r=e("ZEmc"),s=e("YV7O"),o=e("Ceoi"),h=e("+4/w"),u=e("GW3N"),c=e("0xDb"),l=e("vGYV"),y=e("Vhou"),D=(e("HVJf"),e("BvhE").Base64),m=new c.a,g={name:"dailyReporxt",components:{myDatePicker:r.a,banner:s.a,CurReport:o.a,DailySummary:h.a,DailyPlan:u.a},props:[],data:function(){return i()({dailyList:{cus:3,cusBusiness:2,guestSingleValue:52439,opp:3,tourist:1,trackRecord:2,turnoverRatio:1,volumeBusiness:157318},curDay:null,curDate:null,curNum:null,curMonthData:[],dailySummaryTextarea:"",dailyPlanTextarea:"",planList:[]},"dailyList",[])},computed:{},created:function(){y.a.$on("dailyPlanTextarea",function(t){console.log("dailyPlanTextarea",t)})},mounted:function(){this.curDay=this.getToday(),this.curDate=this.curDay.split(/年|月|日/);var t=new Date,a=[t.getFullYear(),t.getMonth()+1,t.getDate()],e=a[0],n=a[1],i=a[2];this.curNum=parseInt(t.getDate()),this.getCurMonthData(this.getCurMonth()),this.getDailyData({startDate:e+"-"+n+"-"+i,endDate:e+"-"+n+"-"+i})},methods:{getCurDay:function(t){this.curDay!==t&&(this.curDay=t,this.curDate=t.split(/年|月|日/),this.curNum=this.curDate[2],this.setSumAndPlan(this.curMonthData),this.getDailyData({startDate:this.curDate[0]+"-"+this.curDate[1]+"-"+this.curDate[2],endDate:this.curDate[0]+"-"+this.curDate[1]+"-"+this.curDate[2]}))},changeCurMonthData:function(t){this.getCurMonthData(t)},getCurMonth:function(){var t=new Date,a=[t.getFullYear(),t.getMonth()+1],e=a[1];return e<10&&(e="0"+e),a[0]+"-"+e},changeDailySummaryTextarea:function(t){this.dailySummaryTextarea=t},changeDailyPlanTextarea:function(t){this.dailyPlanTextarea=t},getToday:function(){var t=new Date;return t.getFullYear()+"年"+(t.getMonth()+1)+"月"+t.getDate()+"日"},getCurMonthData:function(t){var a=this;console.log(t),m.getCurMonthData({date:t}).then(function(t){(t=t.data)&&(console.log(t),a.curMonthData=t,a.curNum&&a.setSumAndPlan(t))}).catch(function(e){510===e&&a.getCurMonthData(t)})},setSumAndPlan:function(t){var a=parseInt(this.curNum);if(t){var e=t.map(function(t){return parseInt(t.createTime.substr(8,2))}).indexOf(a);if(e>=0){var n=this.curDate[0]+"/"+this.curDate[1]+"/"+this.curDate[2];new Date(n)<l.a.setReportTime()?(this.dailySummaryTextarea=t[e].summarize,this.dailyPlanTextarea=t[e].plan):(this.dailySummaryTextarea=D.decode(t[e].summarize),this.dailyPlanTextarea=D.decode(t[e].plan))}}},getDailyData:function(t){var a=this;m.getDailyReport(t).then(function(t){t.data&&(console.log(t),a.dailyList=t.data)}).catch(function(e){510===e&&a.getDailyData(t)})},newPlan:function(){""===this.dailySummaryTextarea&&""===this.dailyPlanTextarea?this.$router.push({path:"/newPlan"}):l.a.tip("当日已提交日报，请勿重复提交！")}}},d={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dailyReport"},[e("banner",{staticClass:"header",attrs:{title:"日报"}},[e("button",{staticClass:"newDailyReport",on:{click:t.newPlan}},[t._v("+")])]),t._v(" "),e("myDatePicker",{attrs:{curMonthData:t.curMonthData},on:{getCurDay:t.getCurDay,changeCurMonthData:t.changeCurMonthData}}),t._v(" "),e("CurReport",{attrs:{list:t.dailyList,curDay:t.curDay}}),t._v(" "),e("DailySummary",{attrs:{text:t.dailySummaryTextarea,disabled:!1},on:{changeDailySummaryTextarea:t.changeDailySummaryTextarea}}),t._v(" "),e("DailyPlan",{attrs:{text:t.dailyPlanTextarea,disabled:!1},on:{changeDailyPlanTextarea:t.changeDailyPlanTextarea}})],1)},staticRenderFns:[]};var p=e("C7Lr")(g,d,!1,function(t){e("wI2k")},"data-v-3e2afe9e",null);a.default=p.exports},wI2k:function(t,a){}});