webpackJsonp([50],{"D+Io":function(t,e){},"G+X7":function(t,e){},Z7P6:function(t,e){},ffhK:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("IHPB"),c=i.n(s),a=i("4YfN"),n=i.n(a),r=i("0xDb"),h=i("HVJf"),o=i("y5y3"),l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"eggBtn"},[s("div",{staticClass:"content"},[s("img",{attrs:{src:i("eMlk"),alt:""}}),t._v(" "),s("p",[t._v(t._s(t.text))])]),t._v(" "),s("div",{staticClass:"btn"},[s("button",{staticClass:"confirm",on:{click:t.confirm}},[t._v("确定")]),t._v(" "),s("button",{staticClass:"cancle",on:{click:t.cancle}},[t._v("取消")])])])},staticRenderFns:[]};var u=i("C7Lr")({props:["text","getVal"],methods:{confirm:function(){this.getVal(!0)},cancle:function(){this.getVal(!1)}}},l,!1,function(t){i("G+X7")},"data-v-c5b30306",null).exports,f=i("t7k9"),y={props:["historyTxt","isEmpty","clickHistoryTxt","searchType"],components:{clearBtn:u},data:function(){return{list:[],currentTime:[],text:"确定清空历史搜索？",clearVal:!1,isClear:""}},watch:{historyTxt:function(){this.historyTxt&&this.addLocalStorage()},isClear:function(){this.isClear?(this.emptyWay(),this.clearVal=!1):this.clearVal=!1,this.isClear=""}},created:function(){this.getHistoryList(this.searchType)},methods:{getVal:function(t){this.isClear=t},addLocalStorage:function(){var t=(new Date).getTime();this.filterArr(),this.list=[this.historyTxt].concat(c()(this.list)),this.currentTime=[t].concat(c()(this.currentTime)),this.sliceArr();var e={list:this.list,currentTime:this.currentTime};Object(f.g)(e,this.searchType)},filterArr:function(){var t=this;this.list.length&&this.list.forEach(function(e,i){if(e==t.historyTxt){var s=t.list.slice(0,i),a=t.list.slice(i+1),n=t.currentTime.slice(0,i),r=t.currentTime.slice(i+1);t.list=[].concat(c()(s),c()(a)),t.currentTime=[].concat(c()(n),c()(r))}})},sliceArr:function(){this.list.length>=10&&(this.list=this.list.slice(0,10),this.currentTime=this.currentTime.slice(0,10))},getHistoryList:function(t){if(Object(f.f)(t)){var e=Object(f.f)(t).list,i=Object(f.f)(t).currentTime;e?(this.list=e,this.currentTime=i):(this.list=[],this.currentTime=[])}},emptyHisList:function(){"gallery"==this.searchType?this.clearVal=!0:this.emptyWay()},clickTitle:function(t){console.log(1111,this.list[t]),this.clickHistoryTxt(this.list[t])},emptyWay:function(){this.list=[],this.currentTime=[],window.localStorage.removeItem(this.searchType),this.isEmpty(!1)}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"eggHistorySearch"},[i("div",{staticClass:"title"},[i("span",[t._v("历史搜索")]),t._v(" "),i("button",{on:{touchend:t.emptyHisList}},[t._v("清除")])]),t._v(" "),i("ul",t._l(t.list,function(e,s){return i("li",{key:s,on:{touchend:function(e){return t.clickTitle(s)}}},[t._v("\n      "+t._s(e)+"\n    ")])}),0),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.clearVal,expression:"clearVal"}],staticClass:"clearBtn"},[i("clearBtn",{staticClass:"btn",attrs:{text:t.text,getVal:t.getVal}})],1)])},staticRenderFns:[]};var T=i("C7Lr")(y,d,!1,function(t){i("D+Io")},"data-v-7392cbe9",null).exports,m=new r.a,p={components:{Search:o.a,historySearch:T},data:function(){return{searchVal:"",list:[],hasHistory:!1,matchTxt:!0,unMatchTxt:!1,historyTxt:"",searchType:"",key:!1,account:"",padding:"",marginTop:""}},computed:n()({},Object(h.d)({titleList:function(t){return t.searchBox.titleList}})),watch:{searchVal:function(){this.hasHistory=!1,""===this.searchVal&&(this.unMatchTxt=!1,this.matchTxt=!1),this.key&&(this.getSearchVal(this.searchVal),this.key=!1),this.emptySearchVal(this.searchType)}},created:function(){this.searchType=this.$route.query.type,this.compareTime(this.searchType),this.showHistory(),this.account=this._localAjax().account,this.isIPhoneX()},mounted:function(){},methods:n()({monitorInpub:function(){var t=document.getElementById("debounce"),e=this.getRequest(),i=this.debounce(e,200);t.addEventListener("keyup",function(t){""!==t.target.value&&i(t.target.value)})},search:function(){var t=this.getRequest(),e=this.debounce(t,200);""!==this.searchVal&&e(this.searchVal)},getRequest:function(){return"question"==this.searchType?this.QuestionSearch:this.articleSearch},debounce:function(t,e){return function(i){var s=this,c=i;clearTimeout(t.id),t.id=setTimeout(function(){t.call(s,c)},e)}},getSearchVal:function(t){"question"==this.searchType?this.QuestionSearch(t):this.articleSearch(t)},articleSearch:function(t){var e=this,i=this.$route.query.classify;m.getArticleSearch(t,this.account,i).then(function(t){if(t.data){var i=t.data.splice(0,200);e.setTitle(i),e.showMatchList(i),e.showErrorTips(i),e.list=Object(f.b)(i,e.searchVal)}}).catch(function(t){console.log(t)})},QuestionSearch:function(t){var e=this;m.getQuestionSearch(t,this.account).then(function(t){if(t.data){var i=t.data;e.setTitle(i),e.showMatchList(i),e.showErrorTips(i),e.list=Object(f.b)(i,e.searchVal)}}).catch(function(t){console.log(t)})},compareTime:function(t){if(Object(f.f)(t)){var e=[],i=Object(f.f)(t).currentTime,s=Object(f.f)(t).list,a=(new Date).getTime();i.forEach(function(t,i){(a-t)/864e5>5&&(e=[].concat(c()(e),[i]))});var n={list:s.slice(0,e[0]),currentTime:i.slice(0,e[0])};this.judgeObj(n,t)}}},Object(h.c)(["setTitle"]),{showHistory:function(){"question"==this.searchType?this.judgeHistory("question"):this.searchType=="msIndex"+this.$route.query.classify&&this.judgeHistory(this.searchType)},judgeHistory:function(t){Object(f.f)(t)&&(this.hasHistory=!0)},toArticle:function(t){var e=this,i=this.list[t].id;i&&(this.historyTxt=this.searchVal,setTimeout(function(){e.searchType=="msIndex"+e.$route.query.classify?Object(f.h)(e.$router,"/articleDetails",{articleId:i,type:"article"}):Object(f.h)(e.$router,"/questionDetail",{id:i,type:"question"}),e.historyTxt=""},100))},clickHistoryTxt:function(t){this.searchVal=t,this.key=!0},deleteVal:function(t){this.unMatchTxt=!1,this.searchVal=t},isEmpty:function(t){this.hasHistory=t},cancleBtn:function(){this.$router.go(-1)},showMatchList:function(t){t.length?(this.matchTxt=!0,this.unMatchTxt=!1):this.matchTxt=!1},showErrorTips:function(t){!t.length&&this.searchVal.length?this.unMatchTxt=!0:this.unMatchTxt=!1},emptySearchVal:function(t){if(Object(f.f)(t)){var e=Object(f.f)(t).list;!this.searchVal.length&&e.length&&(this.hasHistory=!0,this.matchTxt=!1)}},judgeObj:function(t,e){t.list.length?Object(f.g)(t,e):window.localStorage.removeItem(e)},isIPhoneX:function(){"iphonex"===this.phoneSize()?(this.padding="5.86vw",this.marginTop="-5.86vw"):(this.padding="",this.marginTop="")}})},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search",style:{paddingTop:t.padding,marginTop:t.marginTop}},[i("div",{staticClass:"search_box"},[i("Search",{staticClass:"searchComp",attrs:{id:"debounce",deleteVal:t.deleteVal},on:{input:t.search},model:{value:t.searchVal,callback:function(e){t.searchVal="string"==typeof e?e.trim():e},expression:"searchVal"}}),t._v(" "),i("button",{staticClass:"cancle",on:{click:t.cancleBtn}},[t._v("取消")])],1),t._v(" "),i("historySearch",{directives:[{name:"show",rawName:"v-show",value:t.hasHistory,expression:"hasHistory"}],attrs:{historyTxt:t.historyTxt,isEmpty:t.isEmpty,clickHistoryTxt:t.clickHistoryTxt,searchType:t.searchType}}),t._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:t.matchTxt,expression:"matchTxt"}],staticClass:"matchTxt"},t._l(t.list,function(e,s){return i("li",{key:s,domProps:{innerHTML:t._s(e.title)},on:{click:function(e){return t.toArticle(s)}}})}),0),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.unMatchTxt,expression:"unMatchTxt"}],staticClass:"search_nothing"},[i("p",[t._v("很抱歉，没有找到相关内容")]),t._v(" "),i("div",{staticClass:"search_bg"})])],1)},staticRenderFns:[]};var g=i("C7Lr")(p,v,!1,function(t){i("Z7P6")},"data-v-15dbb0c8",null);e.default=g.exports}});
//# sourceMappingURL=50.e02bc598e229b1946800.js.map