webpackJsonp([84],{"7nfx":function(e,t){},R4PO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("4YfN"),n=a.n(s),i=a("YV7O"),o=a("fzaL"),r=a("OVlV"),c=a("fi7s"),u=a("90w1"),p=a("HVJf"),l=a("vGYV"),m=a("0xDb"),d=a("BvhE").Base64,f=new m.a,h={data:function(){return{messageTip:{showMessageBox:!1,btnNum:1,type:!0,tip:"提交成功！感谢您的反馈~"},path:"/feedback",isClear:!0}},components:{mybanner:i.a,Btn:o.a,yanInput:r.a,messageBox:c.a,upload:u.a},computed:n()({},Object(p.d)("feedback",["title","contactObj","messageBox"]),Object(p.d)(["Files"]),{remark:{get:function(){return this.$store.state.feedback.remark},set:function(e){this.updateRemark(e)}},phone:{get:function(){return this.$store.state.feedback.contact},set:function(e){this.updateContact(e)}}}),methods:n()({},Object(p.c)("feedback",["setMessageBox","updateRemark","updateContact","updateImgList"]),Object(p.c)(["setFiles","setPicVal"]),{submit:function(){var e=this;if(this.valid()){var t=new FormData;if(this.Files.length>0)for(var a=0;a<this.Files.length;a++)t.append("dataFile",this.Files[a]);var s=this.updateParams(),n=[];for(var i in s)t.append(i,s[i]),n.push(i);f.feedback(t,n,s).then(function(t){0===t.code?(e.messageTip.tip=t.msg,e.messageTip.showMessageBox=!0,e.setMessageBox(e.messageTip),e.updateRemark(""),e.updateContact(""),e.setFiles([]),e.setPicVal([])):(e.messageTip.tip=t.msg,e.messageTip.type=!1,e.messageTip.showMessageBox=!0,e.setMessageBox(e.messageTip),e.updateRemark(""),e.updateContact(""),e.setFiles([]),e.setPicVal([]))}).catch(function(t){510===t&&e.submit()})}},updateParams:function(){var e={},t={phone:this.phone,feedbackInfo:d.encode(this.remark)};for(var a in t)(t[a]||0===t[a])&&(e[a]=t[a]);return e},cancel:function(){this.messageTip.showMessageBox=!1,this.setMessageBox(this.messageTip),this.messageTip.type&&this.$router.go(-1)},getImgs:function(e){console.log(e),this.updateImgList(e)},valid:function(){if(""==this.remark)return l.a.tip("反馈信息不能为空"),!1;return!(""!==this.phone&&!/^1[34578]\d{9}$/.test(this.phone))||(l.a.tip("请输入正确的手机号码"),!1)}}),beforeRouteEnter:function(e,t,a){e.meta.isUseCache?a():a(function(e){e.updateRemark(""),e.updateContact(""),e.setFiles([]),e.setPicVal([]),e.path="/feedback",e.isClear=!0})}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"feedback"},[a("mybanner",{staticStyle:{position:"static",border:"none"},attrs:{title:e.title}}),e._v(" "),a("div",{staticClass:"textareaBox"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.remark,expression:"remark"}],attrs:{name:"",id:"",placeholder:"请描述你的反馈意见，我们将不断改进",maxlength:"250"},domProps:{value:e.remark},on:{input:function(t){t.target.composing||(e.remark=t.target.value)}}}),e._v(" "),a("span",[e._v(e._s(e.remark.length)+"/250")])]),e._v(" "),a("upload",{ref:"upload",attrs:{path:e.path,picLen:"3",clear:e.isClear}}),e._v(" "),a("div",{staticClass:"form"},[a("yan-input",e._b({attrs:{showIcon:!1},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}},"yan-input",e.contactObj,!1))],1),e._v(" "),a("btn",{attrs:{text:"提交"},nativeOn:{click:function(t){return e.submit(t)}}}),e._v(" "),e.messageBox.showMessageBox?a("message-box",{attrs:{type:e.messageBox.type,btnNum:e.messageBox.btnNum},scopedSlots:e._u([{key:"btn-group",fn:function(){return[a("button",{attrs:{type:"button"},on:{click:e.remove}},[e._v("移除")]),e._v(" "),a("button",{attrs:{type:"button"},on:{click:e.cancel}},[e._v("取消")])]},proxy:!0},{key:"btn",fn:function(){return[a("button",{attrs:{type:"button"},on:{click:e.cancel}},[e._v("确定")])]},proxy:!0}],null,!1,1033094542)},[e._v("\n    "+e._s(e.messageBox.tip)+"\n  ")]):e._e()],1)},staticRenderFns:[]};var b=a("C7Lr")(h,g,!1,function(e){a("7nfx")},"data-v-556313c8",null);t.default=b.exports}});
//# sourceMappingURL=84.39c2f653b2062a9fb682.js.map