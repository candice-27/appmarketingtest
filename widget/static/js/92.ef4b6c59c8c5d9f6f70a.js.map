{"version":3,"sources":["webpack:///src/pages/charts/PerCapita/PeopleWork.vue","webpack:///./src/pages/charts/PerCapita/PeopleWork.vue?41f2","webpack:///./src/pages/charts/PerCapita/PeopleWork.vue"],"names":["vue_esm","use","vue_router_esm","vuex_esm","PeopleWork","name","components","Bar","bar","chartsTit","title","RouterLink","routerLink","mybanner","banner","SelectComponent","selectComponent","noData","data","ajaxData","peopleWorkData","areaPeopleWorkData","height","endTime","js","getLocalTime","cityMsg","key1","key2","peoWorkchanrtDom1","peoWorkchanrtDom2","i","peopleWorkShow","areaPeopleWorkShow","created","_ref","localStorage","getItem","this","JSON","parse","mounted","getpeopleWorkData","cityName","cityLevel","getareaPeopleWorkData","Object","msManage","computed","extends_default","test","citySelect","state","select","startTimeSelect","endTimeSelect","watch","series","chartsInit","resize","error","console","log","beforeDestroy","dispose","methods","date","city","level","_this2","loading","_this","getAjax","tenantId","then","res","sortYears","_this3","newData","getNewArr","yAxisData","idsData","$set","PerCapita_PeopleWork","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","text","directives","rawName","value","expression","ref","style","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/92.ef4b6c59c8c5d9f6f70a.js","sourcesContent":["<template>\r\n  <div class=\"peopleWork paddingTop\">\r\n    <mybanner :title='title'/>\r\n    <SelectComponent></SelectComponent>\r\n    <div class=\"barBox\">\r\n      <chartsTit :text=\"'人效-整体'\">\r\n        <h6>单位：万元</h6>\r\n      </chartsTit>\r\n      <div v-show=\"!peopleWorkShow\" :style=\"{height: `100vw`}\" ref=\"peopleWorkContainer\" ></div>\r\n      <noData v-show=\"peopleWorkShow\"></noData>\r\n      <!-- <Bar\r\n      :data=\"peopleWorkData\"\r\n      :vertical=\"'vertical'\"\r\n      :height=\"100\"\r\n      :salesVal=\"true\"></Bar> -->\r\n    </div>\r\n    <div class=\"barBox\">\r\n      <chartsTit :text=\"'人效-各店'\">\r\n        <h6>单位：万元</h6>\r\n      </chartsTit>\r\n      <div v-show=\"!areaPeopleWorkShow\" ref=\"areaPeopleWorkContainer\" ></div>\r\n      <noData v-show=\"areaPeopleWorkShow\"></noData>\r\n      <!-- <Bar\r\n      :data=\"areaPeopleWorkData\"\r\n      :vertical=\"'horizontal'\"\r\n      :height=\"300\"\r\n      :salesVal=\"true\"></Bar> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport mango from '../../../js'\r\nimport chartsInit,{chanrtDom, emptyData} from '../../../utils/chartsInit'\r\nimport {waterMark} from '../../../utils/msManage'\r\nimport Vuex, { mapState, mapMutations, mapGetters } from 'vuex'\r\nimport SelectComponent from '../../../components/select/selectComponent'\r\nVue.use(VueRouter)\r\nVue.use(Vuex)\r\nimport Bar from '../../../components/charts/bar'\r\nimport chartsTit from '../../../components/charts/title'\r\nimport RouterLink from '../../../components/charts/routerLink'\r\nimport mybanner from '../../../components/banner'\r\nimport noData from '../../../components/charts/noData'\r\n\r\nexport default {\r\n  name:'peopleWork',\r\n  components:{\r\n    Bar,\r\n    chartsTit,\r\n    RouterLink,\r\n    mybanner,\r\n    SelectComponent,\r\n    noData\r\n  },data(){\r\n    return{\r\n      ajaxData: {},\r\n      peopleWorkData: {}, \r\n      areaPeopleWorkData: {},\r\n      height: 100,\r\n      title:'人效报表',\r\n      endTime: mango.getLocalTime('end'),\r\n      cityMsg: '',\r\n      key1:false,\r\n      key2:false,\r\n      peoWorkchanrtDom1:'',\r\n      peoWorkchanrtDom2:'',\r\n      i:0,\r\n      peopleWorkShow: false,\r\n      areaPeopleWorkShow: false\r\n    }\r\n  }, created() {\r\n    // 获取本地存储信息\r\n    let [ajaxData, cityMsg] = [localStorage.getItem('ajaxData'), localStorage.getItem('cityMsg')]\r\n    this.cityMsg = cityMsg ? JSON.parse(cityMsg) : {}\r\n    this.ajaxData = JSON.parse(ajaxData)\r\n  },\r\n  mounted(){\r\n    this.getpeopleWorkData(this.endTime, this.cityMsg.cityName, this.cityMsg.cityLevel)\r\n    this.getareaPeopleWorkData(this.endTime, this.cityMsg.cityName, this.cityMsg.cityLevel)\r\n    waterMark('.barBox')\r\n  },\r\n  computed: {\r\n    test() {\r\n      // console.log(333, this.$store)\r\n    },\r\n    ...mapState({\r\n      citySelect: state => state.select.citySelect,\r\n      startTimeSelect: state => state.select.startTimeSelect,\r\n      endTimeSelect: state => state.select.endTimeSelect\r\n    })\r\n  },\r\n  watch: {\r\n    citySelect() {\r\n      if (this.endTimeSelect && this.endTimeSelect != '') {\r\n        this.getpeopleWorkData(this.endTimeSelect, this.citySelect.cityName, this.citySelect.cityLevel)\r\n        this.getareaPeopleWorkData(this.endTimeSelect, this.citySelect.cityName, this.citySelect.cityLevel)\r\n      }\r\n    },\r\n    endTimeSelect() {\r\n      if (this.endTimeSelect && this.endTimeSelect != '') {\r\n        this.getpeopleWorkData(this.endTimeSelect, this.citySelect.cityName, this.citySelect.cityLevel)\r\n        this.getareaPeopleWorkData(this.endTimeSelect, this.citySelect.cityName, this.citySelect.cityLevel)\r\n      }\r\n    },\r\n    peopleWorkData() {\r\n      const chartsName = 'peopleWork'\r\n      if(this.key1) {\r\n        if (this[`${chartsName}Data`].series) {\r\n          // 检测数据是否为空\r\n          this[`${chartsName}Show`] = emptyData(this[`${chartsName}Data`].series)\r\n          chartsInit(this, chartsName, 'vertical', true)\r\n          this.peoWorkchanrtDom1 = chanrtDom\r\n        }\r\n      }\r\n    },\r\n    areaPeopleWorkData() {\r\n      const chartsName = 'areaPeopleWork'\r\n      if(this.key2) {\r\n        if (this[`${chartsName}Data`].series) {\r\n          // 检测数据是否为空\r\n          this[`${chartsName}Show`] = emptyData(this[`${chartsName}Data`].series)\r\n          chartsInit(this, chartsName, 'horizontal', true)\r\n          this.peoWorkchanrtDom2 = chanrtDom\r\n          if(this.i > 1){\r\n            try {\r\n              this.peoWorkchanrtDom2.resize()\r\n            } catch (error) {\r\n              console.log(error)\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  beforeDestroy(){\r\n    if(this.peoWorkchanrtDom1) {\r\n      this.peoWorkchanrtDom1.dispose()\r\n    }\r\n    if(this.peoWorkchanrtDom2) {\r\n      this.peoWorkchanrtDom2.dispose()\r\n    }\r\n  },\r\n  methods:{\r\n    ...mapMutations([\r\n      'setHomeTit',\r\n      'setHomeText',\r\n      'setHomeArr'\r\n    ]),\r\n    // goToChild() {\r\n    //   this.$router.push({ path: '/child' })\r\n    // },\r\n    // 人效-整体\r\n    getpeopleWorkData(date, city, level) {\r\n      mango.loading('open')\r\n      let _this = this\r\n      mango.getAjax('/v1/app/report/people/work', {\r\n        cityLevel: level,\r\n        cityName: city,\r\n        // cityName: '苏州市',\r\n        date: date,\r\n        tenantId: this.ajaxData.tenantId\r\n      }).then((res) => {\r\n        mango.loading('close')\r\n        if (res) {\r\n          this.key1 = true\r\n          res = res.data\r\n          mango.sortYears(res)\r\n          //res.yAxisData = [mango.chartsBotTit(res)]\r\n          // res.average = res.siblings\r\n          _this.peopleWorkData = res\r\n        }\r\n      })\r\n    },\r\n    getareaPeopleWorkData(date, city, level) {  //接口没有\r\n      this.i += 1\r\n      mango.loading('open')\r\n      let _this = this\r\n      mango.getAjax('/v1/app/report/people/work/shop', {\r\n        date: date,\r\n        tenantId: this.ajaxData.tenantId,\r\n        cityLevel: level,\r\n        // cityName: '苏州市'\r\n        cityName: city\r\n      }).then((res) => {\r\n        mango.loading('close')\r\n        if (res) {\r\n          let newData = mango.getNewArr(res.data.series[0].data,res.data.series[1].data,res.data.yAxisData,res.data.idsData)\r\n          this.$set(res.data,'idsData',newData[3])\r\n          this.$set(res.data.series[0],'data',newData[1])\r\n          this.$set(res.data.series[1],'data',newData[2])\r\n          this.$set(res.data,'yAxisData',newData[0])\r\n          this.key2 = true\r\n          res = res.data\r\n          // _this.height = 200\r\n          _this.areaPeopleWorkData = res\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/charts/PerCapita/PeopleWork.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"peopleWork paddingTop\"},[_c('mybanner',{attrs:{\"title\":_vm.title}}),_vm._v(\" \"),_c('SelectComponent'),_vm._v(\" \"),_c('div',{staticClass:\"barBox\"},[_c('chartsTit',{attrs:{\"text\":'人效-整体'}},[_c('h6',[_vm._v(\"单位：万元\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.peopleWorkShow),expression:\"!peopleWorkShow\"}],ref:\"peopleWorkContainer\",style:({height: \"100vw\"})}),_vm._v(\" \"),_c('noData',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.peopleWorkShow),expression:\"peopleWorkShow\"}]})],1),_vm._v(\" \"),_c('div',{staticClass:\"barBox\"},[_c('chartsTit',{attrs:{\"text\":'人效-各店'}},[_c('h6',[_vm._v(\"单位：万元\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.areaPeopleWorkShow),expression:\"!areaPeopleWorkShow\"}],ref:\"areaPeopleWorkContainer\"}),_vm._v(\" \"),_c('noData',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.areaPeopleWorkShow),expression:\"areaPeopleWorkShow\"}]})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-297b6aee\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/charts/PerCapita/PeopleWork.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./PeopleWork.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./PeopleWork.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-297b6aee\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./PeopleWork.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/charts/PerCapita/PeopleWork.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}