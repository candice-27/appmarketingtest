{"version":3,"sources":["webpack:///src/pages/charts/AreaEffectiveness/areaEffectiveness.vue","webpack:///./src/pages/charts/AreaEffectiveness/areaEffectiveness.vue?0dab","webpack:///./src/pages/charts/AreaEffectiveness/areaEffectiveness.vue"],"names":["vue_esm","use","vue_router_esm","vuex_esm","areaEffectiveness","name","components","Bar","bar","chartsTit","title","RouterLink","routerLink","mybanner","banner","SelectComponent","selectComponent","noData","data","ajaxData","areaEffectivenessData","areaEffectivenessShopData","endTime","js","getLocalTime","cityMsg","areaEffchanrtDom1","areaEffchanrtDom2","key1","key2","i","areaEffectivenessShow","areaEffectivenessShopShow","created","_ref","localStorage","getItem","this","JSON","parse","mounted","getareaEffectivenessData","cityName","cityLevel","getareaEffectivenessShopData","Object","msManage","computed","extends_default","test","citySelect","state","select","startTimeSelect","endTimeSelect","watch","chartsName","series","chartsInit","resize","error","console","log","beforeDestroy","dispose","methods","date","city","level","_this2","loading","_this","getAjax","tenantId","then","res","sortYears","_this3","newData","getNewArr","yAxisData","idsData","$set","AreaEffectiveness_areaEffectiveness","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","text","directives","rawName","value","expression","ref","style","height","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/94.b7f259ae481812ccc30e.js","sourcesContent":["<template>\r\n  <div class=\"areaEffectiveness paddingTop\">\r\n    <mybanner :title='title'/>\r\n    <SelectComponent></SelectComponent>\r\n    <div class=\"barBox\">\r\n      <chartsTit :text=\"'坪效-整体'\">\r\n         <h6>单位：元</h6>\r\n      </chartsTit>\r\n      <div v-show=\"!areaEffectivenessShow\" :style=\"{height: `100vw`}\" ref=\"areaEffectivenessContainer\" ></div>\r\n      <noData v-show=\"areaEffectivenessShow\"></noData>\r\n      <!-- <Bar\r\n      :data=\"areaEffectivenessData\"\r\n      :vertical=\"'vertical'\"\r\n      :height=\"100\"></Bar> -->\r\n    </div>\r\n    <div class=\"barBox\">\r\n      <chartsTit :text=\"'坪效-各店'\">\r\n        <h6>单位：元</h6>\r\n      </chartsTit>\r\n      <div v-show=\"!areaEffectivenessShopShow\" ref=\"areaEffectivenessShopContainer\" ></div>\r\n      <noData v-show=\"areaEffectivenessShopShow\"></noData>\r\n      <!-- <Bar\r\n      :data=\"areaEffectivenessShopData\"\r\n      :vertical=\"'horizontal'\"\r\n      :height=\"250\"></Bar> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport mango from '../../../js'\r\nimport chartsInit,{chanrtDom, emptyData} from '../../../utils/chartsInit'\r\nimport {waterMark} from '../../../utils/msManage'\r\nimport Vuex, { mapState, mapMutations, mapGetters } from 'vuex'\r\nimport SelectComponent from '../../../components/select/selectComponent'\r\nVue.use(VueRouter)\r\nVue.use(Vuex)\r\nimport Bar from '../../../components/charts/bar'\r\nimport chartsTit from '../../../components/charts/title'\r\nimport RouterLink from '../../../components/charts/routerLink'\r\nimport mybanner from '../../../components/banner'\r\nimport noData from '../../../components/charts/noData'\r\n\r\nexport default {\r\n  name:'areaEffectiveness',\r\n  components:{\r\n    Bar,\r\n    chartsTit,\r\n    RouterLink,\r\n    mybanner,\r\n    SelectComponent,\r\n    noData\r\n  },\r\n  data(){\r\n    return{\r\n      ajaxData: {},\r\n      areaEffectivenessData: {}, \r\n      areaEffectivenessShopData: {},\r\n      title:'坪效报表',\r\n      endTime: mango.getLocalTime('end'),\r\n      cityMsg: '',\r\n      areaEffchanrtDom1:'',\r\n      areaEffchanrtDom2:'',\r\n      key1:false,\r\n      key2:false,\r\n      i:0,\r\n      areaEffectivenessShow: false,\r\n      areaEffectivenessShopShow: false\r\n    }\r\n  },\r\n  created() {\r\n    // 获取本地存储信息\r\n    let [ajaxData, cityMsg] = [localStorage.getItem('ajaxData'), localStorage.getItem('cityMsg')]\r\n    this.cityMsg = cityMsg ? JSON.parse(cityMsg) : {}\r\n    this.ajaxData = JSON.parse(ajaxData)\r\n  },\r\n  mounted(){\r\n    this.getareaEffectivenessData(this.endTime, this.cityMsg.cityName, this.cityMsg.cityLevel)\r\n    this.getareaEffectivenessShopData(this.endTime, this.cityMsg.cityName, this.cityMsg.cityLevel)\r\n    waterMark('.barBox')\r\n  },\r\n  computed: {\r\n    test() {\r\n      // console.log(333, this.$store)\r\n    },\r\n    ...mapState({\r\n      citySelect: state => state.select.citySelect,\r\n      startTimeSelect: state => state.select.startTimeSelect,\r\n      endTimeSelect: state => state.select.endTimeSelect\r\n    })\r\n  },\r\n  watch: {\r\n    citySelect() {\r\n      if (this.endTimeSelect && this.endTimeSelect != '') {\r\n        this.getareaEffectivenessData(this.endTimeSelect, this.citySelect.cityName, this.citySelect.cityLevel)\r\n        this.getareaEffectivenessShopData(this.endTimeSelect, this.citySelect.cityName, this.citySelect.cityLevel)\r\n      }\r\n    },\r\n    endTimeSelect() {\r\n      if (this.endTimeSelect && this.endTimeSelect != '') {\r\n        this.getareaEffectivenessData(this.endTimeSelect, this.citySelect.cityName, this.citySelect.cityLevel)\r\n        this.getareaEffectivenessShopData(this.endTimeSelect, this.citySelect.cityName, this.citySelect.cityLevel)\r\n      }\r\n    },\r\n    areaEffectivenessData() {\r\n      const chartsName = 'areaEffectiveness'\r\n      if(this.key1) {\r\n        if (this[`${chartsName}Data`].series) {\r\n          // 检测数据是否为空\r\n          this[`${chartsName}Show`] = emptyData(this[`${chartsName}Data`].series)\r\n          chartsInit(this, chartsName, 'vertical')\r\n          this.areaEffchanrtDom1 = chanrtDom\r\n        }\r\n      }\r\n    },\r\n    areaEffectivenessShopData() {\r\n      const chartsName = 'areaEffectivenessShop'\r\n      if(this.key2) {\r\n        if (this[`${chartsName}Data`].series) {\r\n          // 检测数据是否为空\r\n          this[`${chartsName}Show`] = emptyData(this[`${chartsName}Data`].series)\r\n          chartsInit(this, chartsName, 'horizontal')\r\n          this.areaEffchanrtDom2 = chanrtDom\r\n          if(this.i > 1){\r\n            try {\r\n              this.areaEffchanrtDom2.resize()\r\n            } catch (error) {\r\n              console.log(error)\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  beforeDestroy(){\r\n     //销毁实例\r\n    if(this.areaEffchanrtDom1) {\r\n      this.areaEffchanrtDom1.dispose()\r\n    }\r\n    if(this.areaEffchanrtDom2) {\r\n      this.areaEffchanrtDom2.dispose()\r\n    }\r\n  },\r\n  methods:{\r\n    // 坪效-整体\r\n    getareaEffectivenessData(date, city, level) {\r\n      mango.loading('open')\r\n      let _this = this\r\n      mango.getAjax('/v1/app/report/area/effectiveness', {\r\n        cityLevel: level,\r\n        cityName: city,\r\n        // cityName: '苏州市',\r\n        date: date,\r\n        tenantId: this.ajaxData.tenantId\r\n      }).then((res) => {\r\n        mango.loading('close')\r\n        if (res) {\r\n          this.key1 = true\r\n          res = res.data\r\n          mango.sortYears(res)\r\n          //res.yAxisData = [mango.chartsBotTit(res)]\r\n          _this.areaEffectivenessData = res\r\n        }\r\n      })\r\n    },\r\n    getareaEffectivenessShopData(date, city, level) {\r\n      this.i += 1\r\n      mango.loading('open')\r\n      let _this = this\r\n      mango.getAjax('/v1/app/report/area/effectiveness/shop', {\r\n        date: date,\r\n        tenantId: this.ajaxData.tenantId,\r\n        cityLevel: level,\r\n        // cityName: '苏州市'\r\n        cityName: city\r\n      }).then((res) => {\r\n        mango.loading('close')\r\n        if (res) {\r\n          let newData = mango.getNewArr(res.data.series[0].data,res.data.series[1].data,res.data.yAxisData,res.data.idsData)\r\n          this.$set(res.data,'idsData',newData[3])\r\n          this.$set(res.data.series[0],'data',newData[1])\r\n          this.$set(res.data.series[1],'data',newData[2])\r\n          this.$set(res.data,'yAxisData',newData[0])\r\n          this.key2 = true\r\n          res = res.data\r\n          // _this.height = 200\r\n          _this.areaEffectivenessShopData = res\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/charts/AreaEffectiveness/areaEffectiveness.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"areaEffectiveness paddingTop\"},[_c('mybanner',{attrs:{\"title\":_vm.title}}),_vm._v(\" \"),_c('SelectComponent'),_vm._v(\" \"),_c('div',{staticClass:\"barBox\"},[_c('chartsTit',{attrs:{\"text\":'坪效-整体'}},[_c('h6',[_vm._v(\"单位：元\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.areaEffectivenessShow),expression:\"!areaEffectivenessShow\"}],ref:\"areaEffectivenessContainer\",style:({height: \"100vw\"})}),_vm._v(\" \"),_c('noData',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.areaEffectivenessShow),expression:\"areaEffectivenessShow\"}]})],1),_vm._v(\" \"),_c('div',{staticClass:\"barBox\"},[_c('chartsTit',{attrs:{\"text\":'坪效-各店'}},[_c('h6',[_vm._v(\"单位：元\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.areaEffectivenessShopShow),expression:\"!areaEffectivenessShopShow\"}],ref:\"areaEffectivenessShopContainer\"}),_vm._v(\" \"),_c('noData',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.areaEffectivenessShopShow),expression:\"areaEffectivenessShopShow\"}]})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-13704ad6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/charts/AreaEffectiveness/areaEffectiveness.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./areaEffectiveness.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./areaEffectiveness.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-13704ad6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./areaEffectiveness.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/charts/AreaEffectiveness/areaEffectiveness.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}