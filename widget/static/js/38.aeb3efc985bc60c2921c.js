webpackJsonp([38],{"/Uri":function(t,e,s){"use strict";var o=s("xd7I"),i=s("wSez"),n=s("WdeC");o.default.component(i.Picker.name,i.Picker),o.default.component(i.Popup.name,i.Popup);var a={name:"mySelect",props:["leftText","val","selectList"],components:{customerLi:n.a},data:function(){return{slots:[{values:this.selectList}],popupVisible:!1,key:!1,indexVal:""}},mounted:function(){this.indexVal=this.val},methods:{select:function(){this.indexVal?(this.$refs.picker.setSlotValue(0,this.indexVal),this.$emit("valChange",this.indexVal)):(this.$refs.picker.setSlotValue(0,this.selectList[0]),this.indexVal=this.selectList[0],this.$emit("valChange",this.selectList[0])),this.popupVisible=!0},onValuesChange:function(t,e){this.key?(this.$emit("valChange",e[0]),this.indexVal=e[0]):this.key=!0}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"mySelect"},[s("ul",[s("customerLi",{tag:"li",attrs:{leftText:t.leftText,icon:!0},nativeOn:{click:function(e){return t.select(e)}}},[s("span",[t._v(t._s(t.indexVal||"请选择"+t.leftText))])]),t._v(" "),s("li",[s("mt-popup",{attrs:{position:"bottom"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[s("mt-picker",{ref:"picker",attrs:{slots:t.slots},on:{change:t.onValuesChange}})],1)],1)],1)])},staticRenderFns:[]};var c=s("C7Lr")(a,r,!1,function(t){s("mti6")},null,null);e.a=c.exports},DiPy:function(t,e){},LNe9:function(t,e){},QS0M:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("4YfN"),i=s.n(o),n=s("HVJf"),a=s("xd7I"),r=s("wSez"),c=s("WdeC"),u=s("8BZo"),l=s("2wM2"),m=s("vGYV"),h=s("CqDD");a.default.component(r.Picker.name,r.Picker),a.default.component(r.Popup.name,r.Popup);var p={name:"demandForm",components:{customerLi:c.a,bigBtn:u.a,shopSelect:l.a},props:["defaultVal"],data:function(){return{demand:{},popupVisible:!1,slots:[],progressList:[{values:["装修中","装修完成","毛坯阶段","水电木工","油漆吊顶","橱柜安装","地板安装","木门安装","洁具安装","灯饰安装"]}],buyReasonList:[{values:["旧床换新","新房购置","婚房购置"]}],roomNumList:[{values:[1,2,3,4,"5及以上"]}],colorPrefList:[{values:["暖色","冷色"]}],stylePrefList:[{values:["现代","中式古典","欧式","美式","新中式"]}],shopNameList:[{values:[]}],proto:"",roomNum:"",shopName:"",shopId:"",shops:[]}},computed:i()({},Object(n.d)({customerDemand:function(t){return t.customer.customerDemand},shopVal:function(t){return t.select.shopVal}})),destroyed:function(){this.setShopVal("")},created:function(){var t=localStorage.getItem("ajaxData");this.ajaxData=JSON.parse(t);var e=localStorage.getItem("shops");this.shops=JSON.parse(e)},mounted:function(){if(this.defaultVal){this.demand=this.customerDemand,this._isRoomNum();var t=this.customerDemand.shopId;this._changeShopName(t)}},methods:i()({},Object(n.c)(["setShopVal"]),{shopChange:function(t){this.setShopVal(t),this.getShopID(this.shopVal)},_isRoomNum:function(){5===this.customerDemand.roomNum?this.roomNum="5及以上":this.roomNum=this.customerDemand.roomNum},_changeShopName:function(t){var e=this;t&&this.shops.forEach(function(s,o){s.id===t&&e.setShopVal(s.name)})},getShopID:function(t){var e=this;this.shops&&(this.shops.forEach(function(s,o){s.name===t&&(e.shopId=s.id)}),this.$set(this.demand,"shopId",this.shopId))},setOptions:function(t,e){this.demand[""+t]?this.$refs.Picker.setSlotValue(0,this.demand[""+t]):this.demand[""+t]=e[0].values[0]},selectProgress:function(){this.slots=this.progressList,this.proto="progress",this.setOptions("progress",this.progressList),this.popupVisible=!0},selectBuyReason:function(){this.slots=this.buyReasonList,this.proto="buyReason",this.setOptions("buyReason",this.buyReasonList),this.popupVisible=!0},selectRoomNum:function(){var t=this;this.slots=this.roomNumList,this.proto="roomNum",setTimeout(function(){t.demand.roomNum?t.$refs.Picker.setSlotValue(0,t.roomNum):t.roomNum=t.roomNumList[0].values[0]},100),this.popupVisible=!0},selectColorPref:function(){this.slots=this.colorPrefList,this.proto="colorPref",this.setOptions("colorPref",this.colorPrefList),this.popupVisible=!0},selectStylePref:function(){this.slots=this.stylePrefList,this.proto="stylePref",this.setOptions("stylePref",this.stylePrefList),this.popupVisible=!0},onValuesChange:function(t,e){console.log("选择的装修进度",e),"roomNum"==this.proto?(this.roomNum=e[0],"5及以上"===this.roomNum?this.demand.roomNum=5:this.demand.roomNum=this.roomNum):this.demand[this.proto]=e[0]},emitEvent:function(){this.$emit("changeDemand",this.demand)}})},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"demandForm"},[s("ul",[s("customerLi",{tag:"li",attrs:{leftText:"意向产品"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.demand.intention,expression:"demand.intention"}],attrs:{placeholder:"请填写意向产品",type:"text"},domProps:{value:t.demand.intention},on:{change:t.emitEvent,input:function(e){e.target.composing||t.$set(t.demand,"intention",e.target.value)}}})]),t._v(" "),s("customerLi",{tag:"li",attrs:{leftText:"颜色偏好",icon:!0},nativeOn:{click:function(e){return t.selectColorPref(e)}}},[s("span",[t._v(t._s(t.demand.colorPref||"请填写颜色偏好"))])]),t._v(" "),s("customerLi",{tag:"li",attrs:{leftText:"风格偏好",icon:!0},nativeOn:{click:function(e){return t.selectStylePref(e)}}},[s("span",[t._v(t._s(t.demand.stylePref||"请填写风格偏好"))])]),t._v(" "),s("customerLi",{tag:"li",attrs:{leftText:"购买原因",icon:!0},nativeOn:{click:function(e){return t.selectBuyReason(e)}}},[s("span",[t._v(t._s(t.demand.buyReason||"请选择购买原因"))])]),t._v(" "),s("customerLi",{tag:"li",attrs:{leftText:"装修进度",icon:!0},nativeOn:{click:function(e){return t.selectProgress(e)}}},[s("span",[t._v(t._s(t.demand.progress||"请选择装修进度"))])]),t._v(" "),s("customerLi",{tag:"li",attrs:{leftText:"房间数量",icon:!0},nativeOn:{click:function(e){return t.selectRoomNum(e)}}},[s("span",[t._v(t._s(t.roomNum||"请填写房间数量"))])]),t._v(" "),s("shopSelect",{tag:"li",on:{shopChange:t.shopChange}}),t._v(" "),s("li",{staticClass:"textarea"},[s("h3",[t._v("备注：")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.demand.remark,expression:"demand.remark"}],attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"描述一下情况吧"},domProps:{value:t.demand.remark},on:{change:t.emitEvent,input:function(e){e.target.composing||t.$set(t.demand,"remark",e.target.value)}}})])],1),t._v(" "),s("div",{staticClass:"mintComponent"},[s("mt-popup",{attrs:{position:"bottom"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[s("mt-picker",{ref:"Picker",attrs:{slots:t.slots},on:{change:t.onValuesChange}})],1)],1)])},staticRenderFns:[]};var f=s("C7Lr")(p,d,!1,function(t){s("LNe9")},"data-v-35caf2fb",null).exports,v=s("/Uri");a.default.component(r.Picker.name,r.Picker),a.default.component(r.Popup.name,r.Popup);var g={name:"customerDemand",components:{customerLi:c.a,bigBtn:u.a,shopSelect:l.a,mySelect:v.a},data:function(){return{customerDemand:{},popupVisible:!1,slots:[],progressList:[{values:["装修中","装修完成","毛坯阶段","水电木工","油漆吊顶","橱柜安装","地板安装","木门安装","洁具安装","灯饰安装"]}],buyReasonList:[{values:["旧床换新","新房购置","婚房购置"]}],roomNumList:[{values:[1,2,3,4,"5及以上"]}],colorPrefList:[{values:["暖色","冷色"]}],stylePrefList:[{values:["现代","中式古典","欧式","美式","新中式"]}],shopNameList:[{values:[]}],proto:"",roomNum:"",shopName:"",shopId:"",shops:[],sexList:["男","女"]}},computed:i()({},Object(n.d)({customerInfo:function(t){return t.dealOrderInfoDetails.dealOrderInfoDetails},shopVal:function(t){return t.select.shopVal}})),destroyed:function(){this.setShopVal("")},watch:{},created:function(){var t=localStorage.getItem("ajaxData");this.ajaxData=JSON.parse(t);var e=localStorage.getItem("shops");this.shops=JSON.parse(e)},methods:i()({},Object(n.c)(["setShopVal"]),{shopChange:function(t){this.setShopVal(t)},getShopID:function(t){var e=this;this.shopVal&&this.shops.forEach(function(s,o){s.name===t&&(e.shopId=s.id)})},getDemand:function(){var t=this;m.a.getAjax(this,"demand",i()({account:this.ajaxData.account,tenantId:this.ajaxData.tenantId,id:this.$route.params.id},Object(h.g)(this.customerDemand,"demand")),"v2","post").then(function(t){console.log("保存数据成功",t)}).catch(function(e){510===e&&t.getDemand()})},setOptions:function(t,e){this.customerDemand[""+t]?this.$refs.Picker.setSlotValue(0,this.customerDemand[""+t]):this.customerDemand[""+t]=e[0].values[0]},selectProgress:function(){this.slots=this.progressList,this.proto="progress",this.setOptions("progress",this.progressList),this.popupVisible=!0},selectBuyReason:function(){this.slots=this.buyReasonList,this.proto="buyReason",this.setOptions("buyReason",this.buyReasonList),this.popupVisible=!0},selectRoomNum:function(){this.slots=this.roomNumList,this.proto="roomNum",""===this.roomNum?this.roomNum=this.roomNumList[0].values[0]:this.$refs.Picker.setSlotValue(0,this.roomNum),this.popupVisible=!0},selectColorPref:function(){this.slots=this.colorPrefList,this.proto="colorPref",this.setOptions("colorPref",this.colorPrefList),this.popupVisible=!0},selectStylePref:function(){this.slots=this.stylePrefList,this.proto="stylePref",this.setOptions("stylePref",this.stylePrefList),this.popupVisible=!0},sexChange:function(t){console.log("通用选择组件选择的值",t)},onValuesChange:function(t,e){console.log("选择的装修进度",e),"roomNum"==this.proto?(this.roomNum=e[0],"5及以上"===this.roomNum?this.customerDemand.roomNum=5:this.customerDemand.roomNum=this.roomNum):this.customerDemand[this.proto]=e[0]},hasShopId:function(){this.shopVal&&(this.getShopID(this.shopVal),this.$set(this.customerDemand,"shopId",this.shopId))},saveCustomerDemand:function(){var t=this,e=this.$route.params.id;this.hasShopId(),this.customerDemand.shopId?m.a.getAjax(this,"customer/update",i()({customerId:e,account:this.ajaxData.account,tenantId:this.ajaxData.tenantId,"details.phone":this.customerInfo.phone,shopId:this.customerDemand.shopId},Object(h.g)(this.customerDemand,"demand")),"v2","post").then(function(t){t&&m.a.tip("保存成功！")}).catch(function(e){510===e&&t.saveCustomerDemand()}):m.a.tip("请选择门店")}})},D={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"customerDemand"},[s("ul",[s("customerLi",{tag:"li",attrs:{leftText:"意向产品"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.customerDemand.intention,expression:"customerDemand.intention"}],attrs:{placeholder:"请填写意向产品",type:"text"},domProps:{value:t.customerDemand.intention},on:{input:function(e){e.target.composing||t.$set(t.customerDemand,"intention",e.target.value)}}})]),t._v(" "),s("customerLi",{tag:"li",attrs:{leftText:"颜色偏好",icon:!0},nativeOn:{click:function(e){return t.selectColorPref(e)}}},[s("span",[t._v(t._s(t.customerDemand.colorPref||"请填写颜色偏好"))])]),t._v(" "),s("customerLi",{tag:"li",attrs:{leftText:"风格偏好",icon:!0},nativeOn:{click:function(e){return t.selectStylePref(e)}}},[s("span",[t._v(t._s(t.customerDemand.stylePref||"请填写风格偏好"))])]),t._v(" "),s("customerLi",{tag:"li",attrs:{leftText:"购买原因",icon:!0},nativeOn:{click:function(e){return t.selectBuyReason(e)}}},[s("span",[t._v(t._s(t.customerDemand.buyReason||"请选择购买原因"))])]),t._v(" "),s("customerLi",{tag:"li",attrs:{leftText:"装修进度",icon:!0},nativeOn:{click:function(e){return t.selectProgress(e)}}},[s("span",[t._v(t._s(t.customerDemand.progress||"请选择装修进度"))])]),t._v(" "),s("customerLi",{tag:"li",attrs:{leftText:"房间数量",icon:!0},nativeOn:{click:function(e){return t.selectRoomNum(e)}}},[s("span",[t._v(t._s(t.roomNum||"请填写房间数量"))])]),t._v(" "),s("shopSelect",{tag:"li",on:{shopChange:t.shopChange}}),t._v(" "),t._m(0),t._v(" "),s("li",[s("big-btn",{attrs:{text:"保存"},nativeOn:{click:function(e){return t.saveCustomerDemand(e)}}})],1)],1),t._v(" "),s("div",{staticClass:"mintComponent"},[s("mt-popup",{attrs:{position:"bottom"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[s("mt-picker",{ref:"Picker",attrs:{slots:t.slots},on:{change:t.onValuesChange}})],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"textarea"},[e("h3",[this._v("备注：")]),this._v(" "),e("textarea",{attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"描述一下情况吧"}})])}]};s("C7Lr")(g,D,!1,function(t){s("zqpg")},"data-v-0ea4b5b4",null).exports;var V={name:"changeDemand",components:{demandForm:f,mybanner:s("YV7O").a},data:function(){return{}},computed:i()({},Object(n.d)({customerDemand:function(t){return t.customer.customerDemand}})),created:function(){var t=localStorage.getItem("ajaxData");this.ajaxData=JSON.parse(t)},mounted:function(){},methods:i()({},Object(n.c)(["setCustomerDemand"]),{saveDemand:function(){var t=this;m.a.getAjax(this,"demand/update",i()({account:this.ajaxData.account},Object(h.c)(this.customerDemand)),"v2","post").then(function(e){e.status?r.MessageBox.alert("保存成功！").then(function(e){t.$router.go(-1)}):m.a.tip(e.msg)}).catch(function(e){510===e&&t.saveDemand()})},changeDemand:function(t){this.setCustomerDemand(t)}})},_={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"changeDemand"},[e("mybanner",{attrs:{title:"更改需求"}},[e("button",{on:{click:this.saveDemand}},[this._v("保存")])]),this._v(" "),e("demandForm",{staticClass:"paddingTop",attrs:{defaultVal:!0},on:{changeDemand:this.changeDemand}})],1)},staticRenderFns:[]};var b=s("C7Lr")(V,_,!1,function(t){s("DiPy")},"data-v-9e015214",null);e.default=b.exports},mti6:function(t,e){},zqpg:function(t,e){}});
//# sourceMappingURL=38.aeb3efc985bc60c2921c.js.map