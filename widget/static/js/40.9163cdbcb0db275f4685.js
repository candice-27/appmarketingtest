webpackJsonp([40],{"1OyT":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("lC5x"),n=e.n(a),i=e("J0Oq"),o=e.n(i),r=e("4YfN"),c=e.n(r),u=e("3whc"),d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"subHeader"},[e("h5",[t._v(t._s(t.text))]),t._v(" "),e("div",[e("span",{staticClass:"totalPoints"},[t._v("总分 "+t._s(t.totalPoints))]),t._v(" "),e("span",{staticClass:"deductMarks"},[t._v("扣分 "+t._s(t.deductMarks))])])])},staticRenderFns:[]};var l=e("C7Lr")({props:["text","totalPoints","deductMarks"],components:{},data:function(){return{}}},d,!1,function(t){e("GRJJ")},"data-v-6e5011f3",null).exports,p=e("HVJf"),v={props:["standardList","status","paprentIndex"],components:{},data:function(){return{}},computed:c()({},Object(p.d)({submitScoreData:function(t){return t.eggRecordDetails.submitScoreData}})),methods:c()({},Object(p.c)(["setSubmitScoreData","setCategoryListIndex","setStandardListIndex"]),{toCheckDetail:function(t,s){var e={standardId:t.id},a=this.submitScoreData.categoryList[this.paprentIndex].standardList,n=-1,i=-1;a.map(function(s,e){t&&s.standardId==t.id&&(n=e)}),-1==n?(a.push(e),i=a.indexOf(e)):i=n,this.setSubmitScoreData(this.submitScoreData),this.setCategoryListIndex(this.paprentIndex),this.setStandardListIndex(i);var o=document.querySelector("#app").scrollTop;sessionStorage.setItem("scrollTop",o),this.$router.push({path:"/checkDetail",query:{name:t.name,standardListIndex:s,isGrade:this.$route.query.isGrade}})}})},f={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",{staticClass:"checkContent",class:t.status?"open":"close"},t._l(t.standardList,function(s,a){return e("li",{key:"checkContent"+a,class:{done:s.status},on:{click:function(e){return t.toCheckDetail(s,a)}}},[t._v(t._s(s.name))])}),0)},staticRenderFns:[]};var b=e("C7Lr")(v,f,!1,function(t){e("Li3G")},"data-v-08203438",null).exports,h={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"checkTitle"},[e("h5",{class:t.status?"open":"close"},[e("button",{on:{click:t.open}},[t._v(t._s(t.title))]),t._v(" "),e("button",{staticClass:"btn2",on:{click:t.close}},[t._v("收起")])])])},staticRenderFns:[]};var m=e("C7Lr")({props:["title","index","status"],components:{},data:function(){return{}},methods:{close:function(){this.$emit("changeStatus",this.index,!1)},open:function(){this.$emit("changeStatus",this.index,!0)}}},h,!1,function(t){e("NTxF")},"data-v-78780e71",null).exports,_={props:{title:{type:String,default:"提示"},content:{type:String,default:""}}},k={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wrraper"},[e("div",{staticClass:"box"},[e("div",{staticClass:"title"},[e("div",{staticClass:"icon"}),t._v(" "),e("h2",[t._v(t._s(t.title))])]),t._v(" "),e("div",{staticClass:"content"},[t._t("content",[e("div",{staticClass:"def-cont"},[t._v(t._s(t.content))])])],2),t._v(" "),e("div",{staticClass:"buttons"},[t._t("bottons",[e("div",{staticClass:"btn",on:{click:function(s){return t.$eimt("onComfirm")}}},[t._v("确定")])])],2)])])},staticRenderFns:[]};var C=e("C7Lr")(_,k,!1,function(t){e("XsnW")},"data-v-47908d7f",null).exports,S=e("wSez"),g=e("PR0l"),x=(e("7Adc"),{components:{RecordHeader:u.a,SubHeader:l,CheckContent:b,CheckTitle:m,ToastBox:C},data:function(){return{total:{totalPoints:0,deductMarks:0},btnBotStatus:!0,bigCategoryList:[],subData:{},selectIndex:0,isPageCheck:!1,toastShow:!1,toastReset:!1}},beforeRouteLeave:function(t,s,e){["checkDetail","recordJxs","checkTip","recordJxs"].includes(t.name)?s.meta.keepAlive=!0:s.meta.keepAlive=!1,e()},created:function(){this._initData(),this.setdeductMarks(0)},computed:Object(p.d)({submitScoreData:function(t){return t.eggRecordDetails.submitScoreData},subcategories:function(t){return t.eggRecordDetails.subcategories},deductMarks:function(t){return t.eggRecordDetails.deductMarks}}),activated:function(){var t=0,s=0;this.subcategories.map(function(e,a){t+=e.total,e.standardList.map(function(t){s+=t.deductMarks})}),this.bigCategoryList=this.subcategories,this.total.totalPoints=t,this.total.deductMarks=s,document.querySelector("#app").scrollTop=sessionStorage.getItem("scrollTop")},methods:c()({},Object(p.c)(["setSubmitScoreData","setSubcategories","setTotalPoints","setdeductMarks"]),{changeStatus:function(t,s){this.bigCategoryList[t].status=s},bindReset:function(){this.total.deductMarks=0,this.toastReset=!1,this.btnBotStatus=!1,this.submitScoreData.categoryList.map(function(t){t.standardList=[]}),this.setSubmitScoreData(this.submitScoreData),this.subcategories.map(function(t){t.standardList.map(function(t){t.status=!1})}),this.setdeductMarks(0),this.setSubcategories(this.subcategories)},bindSubmit:function(){this.btnBotStatus=!0;var t=[];this.subcategories.map(function(s){s.standardList.map(function(s){s.status||t.push(s.name)})}),this.toastShow=!0},bindComfirmSubmit:function(){var t=this;return o()(n.a.mark(function s(){var e,a,i,o;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.toastShow=!1,e=t.submitScoreData,s.next=4,Object(g.q)(e);case 4:if(a=s.sent,i=a.code,o=a.msg,a.data,Object(S.Toast)(o),0==i){s.next=11;break}return s.abrupt("return");case 11:t.$router.go(-1);case 12:case"end":return s.stop()}},s,t)}))()},_initData:function(){var t=this;return o()(n.a.mark(function s(){var e,a,i,o,r,c,u,d,l;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e={shopId:t.$route.query.shopId,categoryId:t.$route.query.id},s.next=3,Object(g.p)(e);case 3:if(a=s.sent,i=a.code,o=a.msg,r=a.categories,0==i){s.next=10;break}return Object(S.Toast)(o),s.abrupt("return");case 10:c=0,0,u=[],d=t.$route.query.isGrade,l=0,r.map(function(t,s){t.status=0==s||1==d,c+=t.total,t.deductLimit;var e=[];t.standardList.map(function(t){t.deductMarks=0,t.status=1==d,l+=t.deduct;var s=t.id,a=t.deduct,n=t.reason,i=t.urls;e.push({standardId:s,deduct:a||0,reason:n||"",urls:i||[]})}),u.push({categoryId:t.id,standardList:e})}),t.submitScoreData.categoryList=u,t.setSubmitScoreData(t.submitScoreData),t.total.totalPoints=c,t.total.deductMarks=1==d?l:t.deductMarks,1==d&&t.setdeductMarks(l),t.setTotalPoints(c),t.setSubcategories(r),t.bigCategoryList=r;case 24:case"end":return s.stop()}},s,t)}))()}})}),y={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"check",staticClass:"check"},[e("RecordHeader",{attrs:{title:t.$route.query.name}},[e("div",{staticClass:"tips",on:{click:function(s){return t.$router.push("/checkTip")}}})]),t._v(" "),e("div",{staticClass:"contentBox"},[t._l(t.bigCategoryList,function(s,a){return e("div",{key:"bigCategoryList"+a,class:{paddingTop10:0===a}},[0===a?e("SubHeader",{staticClass:"firstTitle",attrs:{text:"分数统计：",totalPoints:t.total.totalPoints,deductMarks:t.total.deductMarks}}):t._e(),t._v(" "),e("CheckTitle",{attrs:{title:s.name,index:a,status:s.status},on:{changeStatus:t.changeStatus}}),t._v(" "),e("CheckContent",{attrs:{paprentIndex:a,standardList:s.standardList,status:s.status}})],1)}),t._v(" "),1!=t.$route.query.isGrade?e("div",{staticClass:"btn-bottom"},[e("button",{class:{on:!t.btnBotStatus},on:{click:function(s){t.toastReset=!0}}},[t._v("重置")]),t._v(" "),e("button",{class:{on:t.btnBotStatus},on:{click:t.bindSubmit}},[t._v("提交")])]):t._e()],2),t._v(" "),t.toastShow?e("ToastBox",{staticClass:"toast",scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"cont"},[e("p",[t._v("该检查得分："),e("span",[t._v(t._s(t.total.totalPoints-t.total.deductMarks)+"分")]),t._v(" "),e("span",[t._v("扣分："+t._s(t.total.deductMarks)+"分")])])])]},proxy:!0},{key:"bottons",fn:function(){return[e("div",{staticClass:"but"},[e("div",{staticClass:"btns",on:{click:function(s){t.toastShow=!1}}},[t._v("返回修改")]),t._v(" "),e("div",{staticClass:"btns",on:{click:t.bindComfirmSubmit}},[t._v("确认提交")])])]},proxy:!0}],null,!1,2998988862)}):t._e(),t._v(" "),t.toastReset?e("ToastBox",{staticClass:"toast",attrs:{content:"是否确认重置？"},scopedSlots:t._u([{key:"bottons",fn:function(){return[e("div",{staticClass:"but"},[e("div",{staticClass:"btns",on:{click:function(s){t.toastReset=!1}}},[t._v("取消")]),t._v(" "),e("div",{staticClass:"btns",on:{click:t.bindReset}},[t._v("确定")])])]},proxy:!0}],null,!1,3482912048)}):t._e()],1)},staticRenderFns:[]};var L=e("C7Lr")(x,y,!1,function(t){e("U3kR")},"data-v-2d392ee6",null);s.default=L.exports},GRJJ:function(t,s){},Li3G:function(t,s){},NTxF:function(t,s){},U3kR:function(t,s){},XsnW:function(t,s){}});