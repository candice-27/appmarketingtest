webpackJsonp([96],{"4ajb":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("4YfN"),s=a.n(i),c=(a("84iU"),a("xd7I")),n=a("ZWLj"),r=a("vGYV"),o=a("JFlM"),h=a("t7k9"),f=a("HVJf"),v=a("X9U8"),l=a("Ueg1"),d=a("cFe5"),S=a("7m0P"),m=a("YV7O"),y=a("bNyG");c.default.use(n.a),c.default.use(f.a);var p={name:"areaEffectiveness",components:{Bar:l.a,chartsTit:d.a,RouterLink:S.a,mybanner:m.a,SelectComponent:v.a,noData:y.a},data:function(){return{ajaxData:{},areaEffectivenessData:{},areaEffectivenessShopData:{},title:"坪效报表",endTime:r.a.getLocalTime("end"),cityMsg:"",areaEffchanrtDom1:"",areaEffchanrtDom2:"",key1:!1,key2:!1,i:0,areaEffectivenessShow:!1,areaEffectivenessShopShow:!1}},created:function(){var e=[localStorage.getItem("ajaxData"),localStorage.getItem("cityMsg")],t=e[0],a=e[1];this.cityMsg=a?JSON.parse(a):{},this.ajaxData=JSON.parse(t)},mounted:function(){this.getareaEffectivenessData(this.endTime,this.cityMsg.cityName,this.cityMsg.cityLevel),this.getareaEffectivenessShopData(this.endTime,this.cityMsg.cityName,this.cityMsg.cityLevel),Object(h.i)(".barBox")},computed:s()({test:function(){}},Object(f.d)({citySelect:function(e){return e.select.citySelect},startTimeSelect:function(e){return e.select.startTimeSelect},endTimeSelect:function(e){return e.select.endTimeSelect}})),watch:{citySelect:function(){this.endTimeSelect&&""!=this.endTimeSelect&&(this.getareaEffectivenessData(this.endTimeSelect,this.citySelect.cityName,this.citySelect.cityLevel),this.getareaEffectivenessShopData(this.endTimeSelect,this.citySelect.cityName,this.citySelect.cityLevel))},endTimeSelect:function(){this.endTimeSelect&&""!=this.endTimeSelect&&(this.getareaEffectivenessData(this.endTimeSelect,this.citySelect.cityName,this.citySelect.cityLevel),this.getareaEffectivenessShopData(this.endTimeSelect,this.citySelect.cityName,this.citySelect.cityLevel))},areaEffectivenessData:function(){var e="areaEffectiveness";this.key1&&this[e+"Data"].series&&(this[e+"Show"]=Object(o.c)(this[e+"Data"].series),Object(o.b)(this,e,"vertical"),this.areaEffchanrtDom1=o.a)},areaEffectivenessShopData:function(){var e="areaEffectivenessShop";if(this.key2&&this[e+"Data"].series&&(this[e+"Show"]=Object(o.c)(this[e+"Data"].series),Object(o.b)(this,e,"horizontal"),this.areaEffchanrtDom2=o.a,this.i>1))try{this.areaEffchanrtDom2.resize()}catch(e){console.log(e)}}},beforeDestroy:function(){this.areaEffchanrtDom1&&this.areaEffchanrtDom1.dispose(),this.areaEffchanrtDom2&&this.areaEffchanrtDom2.dispose()},methods:{getareaEffectivenessData:function(e,t,a){var i=this;r.a.loading("open");var s=this;r.a.getAjax("/v1/app/report/area/effectiveness",{cityLevel:a,cityName:t,date:e,tenantId:this.ajaxData.tenantId}).then(function(e){r.a.loading("close"),e&&(i.key1=!0,e=e.data,r.a.sortYears(e),s.areaEffectivenessData=e)})},getareaEffectivenessShopData:function(e,t,a){var i=this;this.i+=1,r.a.loading("open");var s=this;r.a.getAjax("/v1/app/report/area/effectiveness/shop",{date:e,tenantId:this.ajaxData.tenantId,cityLevel:a,cityName:t}).then(function(e){if(r.a.loading("close"),e){var t=r.a.getNewArr(e.data.series[0].data,e.data.series[1].data,e.data.yAxisData,e.data.idsData);i.$set(e.data,"idsData",t[3]),i.$set(e.data.series[0],"data",t[1]),i.$set(e.data.series[1],"data",t[2]),i.$set(e.data,"yAxisData",t[0]),i.key2=!0,e=e.data,s.areaEffectivenessShopData=e}})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"areaEffectiveness paddingTop"},[a("mybanner",{attrs:{title:e.title}}),e._v(" "),a("SelectComponent"),e._v(" "),a("div",{staticClass:"barBox"},[a("chartsTit",{attrs:{text:"坪效-整体"}},[a("h6",[e._v("单位：元")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.areaEffectivenessShow,expression:"!areaEffectivenessShow"}],ref:"areaEffectivenessContainer",style:{height:"100vw"}}),e._v(" "),a("noData",{directives:[{name:"show",rawName:"v-show",value:e.areaEffectivenessShow,expression:"areaEffectivenessShow"}]})],1),e._v(" "),a("div",{staticClass:"barBox"},[a("chartsTit",{attrs:{text:"坪效-各店"}},[a("h6",[e._v("单位：元")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.areaEffectivenessShopShow,expression:"!areaEffectivenessShopShow"}],ref:"areaEffectivenessShopContainer"}),e._v(" "),a("noData",{directives:[{name:"show",rawName:"v-show",value:e.areaEffectivenessShopShow,expression:"areaEffectivenessShopShow"}]})],1)],1)},staticRenderFns:[]},D=a("C7Lr")(p,u,!1,null,null,null);t.default=D.exports}});