{"version":3,"sources":["webpack:///src/pages/msManage/articleDetails.vue","webpack:///./src/pages/msManage/articleDetails.vue?8132","webpack:///./src/pages/msManage/articleDetails.vue"],"names":["indexModel","utils","articleDetails","components","CollectBtn","eggCollectBtn","Banner","banner","data","isBegin","articleId","collection","myhtml","top","account","imgSrc","logoImageUrl","created","this","$route","query","_localAjax","getArticleDetail","isIPhoneX","mounted","Object","msManage","methods","browser","sUserAgent","navigator","userAgent","toLowerCase","bIsIpad","match","bIsIphoneOs","bIsMidp","bIsUc7","bIsUc","bIsAndroid","bIsCE","bIsWM","showImage","e","console","log","target","nodeName","src","length","index","indexOf","activeImg","_this","id","then","res","remark","temp","srcReg","arr","i","push","collect","cancelCollect","remove","changeCollectBtn","phone","phoneSize","msManage_articleDetails","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","_v","style","nativeOn","touchend","$event","directives","name","rawName","value","expression","_s","staticStyle","color","font-size","author","createTime","split","join","_e","domProps","innerHTML","on","click","stopPropagation","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/88.5cff84c85e6ba24e7fa5.js","sourcesContent":["<template>\r\n  <div class=\"article paddingTop\">\r\n    <banner :title=\"'文章详情'\"/>\r\n    <collect-btn class=\"collentBtn\" \r\n        :collection='collection'\r\n        v-on:touchend.native='changeCollectBtn'\r\n        :style=\"{'top': top}\"\r\n        />\r\n    <div class=\"titleBar\">\r\n      <div class=\"title\"><img v-show=\"logoImageUrl!==''\" :src=\"logoImageUrl\"/>{{articleDetails.title}}</div>\r\n      <!-- <span>{{ articleDetails.createTime }}</span> -->\r\n      <div v-if=\"articleDetails.author\" style=\"color:#909090;font-size:14px\">\r\n        作者：{{articleDetails.author}}&nbsp;&nbsp;\r\n        <span v-if=\"articleDetails.createTime\">{{articleDetails.createTime.split(' ')[0].split('-').join('.')}}</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"cont\" v-html=\"myhtml\" @click.stop=\"showImage\">\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {IndexModel} from '../../utils/index'\r\nconst indexModel = new IndexModel()\r\nimport {removeItem, addItem, b64DecodeUnicode, changeImgStyle, changeVedioStyle,waterMark} from '../../utils/msManage'\r\nimport Banner from '../../components/banner'\r\nimport CollectBtn from '../../components/msManage/eggCollectBtn'\r\nexport default {\r\n  components: {CollectBtn,Banner},\r\n  data() {\r\n    return {\r\n      isBegin: true,\r\n      articleId: '',\r\n      collection: false,\r\n      myhtml: '',\r\n      articleDetails: '',\r\n      top: '',\r\n      account: '',\r\n      imgSrc:[],\r\n      logoImageUrl:''\r\n    }\r\n  },\r\n  created() {\r\n    this.articleId = this.$route.query.articleId\r\n    this.account = this._localAjax().account\r\n    this.getArticleDetail()\r\n    this.isIPhoneX()\r\n  },\r\n  mounted() {\r\n    // var a = document.getElementsByTagName(\"html\")\r\n    // console.log(a)\r\n    waterMark('.article',1);\r\n   \r\n    \r\n  },\r\n  methods: {\r\n    browser() {\r\n      let flag;\r\n      let sUserAgent = navigator.userAgent.toLowerCase();\r\n      let bIsIpad = sUserAgent.match(/ipad/i) == \"ipad\";\r\n      let bIsIphoneOs = sUserAgent.match(/iphone os/i) == \"iphone os\";\r\n      let bIsMidp = sUserAgent.match(/midp/i) == \"midp\";\r\n      let bIsUc7 = sUserAgent.match(/rv:1.2.3.4/i) == \"rv:1.2.3.4\";\r\n      let bIsUc = sUserAgent.match(/ucweb/i) == \"ucweb\";\r\n      let bIsAndroid = sUserAgent.match(/android/i) == \"android\";\r\n      let bIsCE = sUserAgent.match(/windows ce/i) == \"windows ce\";\r\n      let bIsWM = sUserAgent.match(/windows mobile/i) == \"windows mobile\";\r\n      if (!(bIsIpad || bIsIphoneOs || bIsMidp || bIsUc7 || bIsUc || bIsAndroid || bIsCE || bIsWM)){\r\n        //alert('pc')\r\n        flag=false\r\n      }else{\r\n        //alert('phone')\r\n        flag=true\r\n      }\r\n      return flag\r\n    },\r\n    showImage(e){\r\n      console.log(e.target.nodeName.toLowerCase());\r\n      if(e.target.nodeName.toLowerCase()==='img'){\r\n          console.log(e.target.src);\r\n          if(this.imgSrc.length>0){\r\n            let index=this.imgSrc.indexOf(e.target.src)\r\n            if(index>-1){\r\n              console.log(index);\r\n              let that = this\r\n               this.browser();\r\n            /*   if(this.browser()){ */\r\n               /*  var UIPhotoViewer=api.require('UIPhotoViewer');\r\n                alert(UIPhotoViewer);\r\n                UIPhotoViewer.open({\r\n                    images: that.imgSrc,\r\n                    bgColor: '#000',\r\n                    activeIndex:index\r\n                }, function(ret, err) {\r\n                    if (ret) {\r\n                        alert(JSON.stringify(ret));\r\n                    } else {\r\n                        alert(JSON.stringify(err));\r\n                    }\r\n                }); */\r\n              /* } */\r\n              \r\n            }else{\r\n              this.activeImg=0;\r\n            }\r\n          }\r\n      }\r\n    },\r\n    //获取文章详情\r\n    getArticleDetail() {\r\n      const id = this.articleId\r\n      indexModel.getArticleDetail(id, this.account).then(res => {\r\n        this.articleDetails = res.data\r\n        this.logoImageUrl = res.data.logoImageUrl\r\n        if(res.data.remark) {\r\n          let temp = res.data.remark\r\n          this.myhtml = changeImgStyle(b64DecodeUnicode(temp))\r\n          this.myhtml = changeVedioStyle(this.myhtml)\r\n          let imgReg=/<img.*?(?:>|\\/>)/gi;\r\n          let srcReg=/src=[\\'\\\"]?([^\\'\\\"]*)[\\'\\\"]?/i;\r\n          let arr=this.myhtml.match(imgReg);\r\n          if(arr){\r\n            for(let i=0;i<arr.length;i++){\r\n              this.imgSrc.push(arr[i].match(srcReg)[1]);\r\n            }\r\n          }\r\n          \r\n        }\r\n        this.collection = res.data.collect\r\n      })\r\n    },\r\n    //收藏\r\n    collect() {\r\n      let id = this.articleId\r\n      indexModel.collect(1, id, this.account).then(res => {\r\n        console.log('res')\r\n      })\r\n    },\r\n    //取消收藏\r\n    cancelCollect() {\r\n      let id = this.articleId\r\n      indexModel.remove(1, id, this.account).then(res => {\r\n        console.log('canclecollect')\r\n      })\r\n    },\r\n    // 切换收藏按钮\r\n    changeCollectBtn() {\r\n      this.collection = !this.collection\r\n      if(this.collection) {\r\n        //收藏接口\r\n        this.collect()\r\n      }else {\r\n        //移除收藏接口\r\n        this.cancelCollect()\r\n      }\r\n    },\r\n    //收藏的样式\r\n    isIPhoneX (){\r\n      let phone = this.phoneSize()\r\n      if(phone === 'iphonex') {\r\n        this.top = '11vw'\r\n      }else if(phone === 'iphone') {\r\n        this.top = '6vw'\r\n      }else {\r\n        this.top = '6vw'\r\n      }\r\n    }\r\n    \r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.article {\r\n  // padding: 4.26vw;\r\n  text-align: center;\r\n  padding-top: 20vw;\r\n  position: relative;\r\n  box-sizing: border-box;\r\n  \r\n  // width: 100vw;\r\n  // overflow: hidden;\r\n\r\n  .collentBtn {\r\n      position: fixed;\r\n      right: 4.26vw;\r\n      top: 0;\r\n      z-index: 99;\r\n    }\r\n  .titleBar {\r\n    .title {\r\n      color: #353535;\r\n      font-size: 5.33vw;\r\n      width: 80vw;\r\n      text-align: center;\r\n      margin: 0 auto;\r\n      font-weight: bold;\r\n      margin-bottom:1.4vw;\r\n      img{\r\n          display: inline-block;\r\n          width: 4.8vw;\r\n          height: 4.8vw;\r\n         // background: red;\r\n          vertical-align:-3px;\r\n          margin-right:2px;\r\n          background-repeat: no-repeat;\r\n          background-position: center center;\r\n          background-size: 4.8vw 4.8vw;\r\n      }\r\n    }\r\n    span {\r\n      color: #909090;\r\n      font-size: 3.73vw;\r\n    }\r\n  }\r\n  .cont {\r\n    text-align: left;\r\n    word-wrap: break-word !important;\r\n    width: 100vw;\r\n    overflow: hidden;\r\n    padding: 4.26vw;\r\n    box-sizing: border-box;\r\n    h2,p {\r\n      color: #363636;\r\n      font-size: 3.73vw;\r\n    }\r\n  }\r\n    \r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/msManage/articleDetails.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article paddingTop\"},[_c('banner',{attrs:{\"title\":'文章详情'}}),_vm._v(\" \"),_c('collect-btn',{staticClass:\"collentBtn\",style:({'top': _vm.top}),attrs:{\"collection\":_vm.collection},nativeOn:{\"touchend\":function($event){return _vm.changeCollectBtn($event)}}}),_vm._v(\" \"),_c('div',{staticClass:\"titleBar\"},[_c('div',{staticClass:\"title\"},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.logoImageUrl!==''),expression:\"logoImageUrl!==''\"}],attrs:{\"src\":_vm.logoImageUrl}}),_vm._v(_vm._s(_vm.articleDetails.title))]),_vm._v(\" \"),(_vm.articleDetails.author)?_c('div',{staticStyle:{\"color\":\"#909090\",\"font-size\":\"14px\"}},[_vm._v(\"\\n      作者：\"+_vm._s(_vm.articleDetails.author)+\"  \\n      \"),(_vm.articleDetails.createTime)?_c('span',[_vm._v(_vm._s(_vm.articleDetails.createTime.split(' ')[0].split('-').join('.')))]):_vm._e()]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"cont\",domProps:{\"innerHTML\":_vm._s(_vm.myhtml)},on:{\"click\":function($event){$event.stopPropagation();return _vm.showImage($event)}}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-2b9fbe1f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/msManage/articleDetails.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2b9fbe1f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./articleDetails.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./articleDetails.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./articleDetails.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2b9fbe1f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./articleDetails.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2b9fbe1f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/msManage/articleDetails.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}