webpackJsonp([34,61],{COMg:function(t,e){},"Ty/G":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("4YfN"),n=i.n(s),a=(i("xd7I"),i("YV7O")),o=i("fzaL"),r={props:["index","num"],data:function(){return{startX:0,endX:0,distance:0,moveX:0,swipe:""}},methods:{start:function(t){this.restSlide(),(t=t||event).preventDefault(),1==t.touches.length&&(this.startX=t.touches[0].clientX)},move:function(t){(t=t||event).preventDefault();var e=t.currentTarget.parentElement.parentElement.parentElement,i=this.$refs.yanDel.offsetWidth;1==t.touches.length&&(this.moveX=t.touches[0].clientX,this.distance=this.moveX-this.startX,this.distance<0&&(e.dataset.type=1,this.swipe="translateX("+5*this.distance+"px)",this.distance>=i&&(e.dataset.type=1,this.swipe="transform:translateX(-"+i+"px)")),(this.distance>0||0==this.distance)&&(this.swipe="transform:translateX(0px)",e.dataset.type=0))},end:function(t){(t=t||event).preventDefault();var e=t.currentTarget.parentElement.parentElement.parentElement,i=this.$refs.yanDel.offsetWidth;1==t.changedTouches.length&&(this.endX=t.changedTouches[0].clientX,this.distance=this.endX-this.startX,5*-this.distance<i/2?(this.swipe="transform:translateX(0px)",e.dataset.type=0):(e.dataset.type=1,this.swipe="transform:translateX(-"+i+"px)"))},restSlide:function(){for(var t=document.querySelectorAll(".yan-swipe-left"),e=0;e<t.length;e++)t[e].style="transform:translateX(0px)"},cut:function(t){this.$emit("cut",t)},add:function(t){this.$emit("add",t)},del:function(t){this.restSlide(),this.$emit("del",t)}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"yan-swipe-left",style:t.swipe,attrs:{"data-type":"0"}},[i("div",{staticClass:"yan-box"},[i("div",{staticClass:"yan-box-left"},[i("div",{staticClass:"yan-box-value",on:{touchstart:t.start,touchmove:t.move,touchend:t.end}},[t._t("default")],2),t._v(" "),i("div",{staticClass:"yan-edit"},[i("i",{staticClass:"cut",on:{click:function(e){return t.cut(t.index)}}}),t._v(" "),i("span",[t._v(t._s(t.num))]),t._v(" "),i("i",{staticClass:"add",on:{click:function(e){return t.add(t.index)}}})])])]),t._v(" "),i("div",{ref:"yanDel",staticClass:"yan-del",on:{click:function(e){return t.del(t.index)}}},[t._v("删除")])])},staticRenderFns:[]};var l=i("C7Lr")(r,c,!1,function(t){i("COMg")},"data-v-d055f6d6",null).exports,d=(i("wSez"),i("HVJf")),u=(i("zxhB"),{data:function(){return{path:"",id:""}},components:{mybanner:a.a,Btn:o.a,customerProduct:l},computed:n()({},Object(d.d)("intentionProduct",["title"]),Object(d.d)(["checkedList"])),created:function(){this.path=this.$route.query.redirect,this.id=this.$route.params.customerId},mounted:function(){var t=this;console.log(this.checkedList);for(var e=[],i=0;i<this.checkedList.length;i++)e.push(this.checkedList[i].crmId);var s=[];if(e.length>0){e.map(function(t,e){-1==s.indexOf(t)&&s.push(t)});var n=[];s.length>0&&(s.map(function(e,i){var s=0,a=void 0,o=void 0;t.checkedList.map(function(t,i){e===t.crmId&&(s+=parseInt(t.quantity),a=t.goodsName,o=t.id)}),n.push({crmId:e,goodsName:a,id:o,quantity:s})}),this.setCheckedList(n))}},methods:n()({},Object(d.c)(["addGoodsNum","cutGoodsNum","delGoods","setCheckedList"]),{update:function(){var t=this.$store.state.checkedList;this.setCheckedList(t),this.$router.go(-1)},jump:function(){this.$router.replace({name:"searchProduct",params:{customerId:this.id},query:{redirect:this.path}})},del:function(t){this.delGoods(t)},add:function(t){this.addGoodsNum(t)},cut:function(t){this.cutGoodsNum(t)}}),beforeRouteLeave:function(t,e,i){"addintention"===t.name&&(t.meta.isUseCache=!0,i()),"updateintention"===t.name&&(console.log("意向updateintention"),t.meta.isUseCache=!0,i()),i()}}),h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"address"},[i("mybanner",{staticStyle:{background:"#f8f8f8"},attrs:{title:t.title}},[i("button",{attrs:{type:"button"},on:{click:t.update}},[t._v("保存")])]),t._v(" "),t.checkedList.length>0?i("div",{staticClass:"list"},t._l(t.checkedList,function(e,s){return i("customer-product",{key:s,attrs:{index:s,num:e.quantity},on:{add:function(e){return t.add(s)},cut:function(e){return t.cut(s)},del:function(e){return t.del(s)}}},[t._v("\n      "+t._s(e.goodsName)+"\n    ")])}),1):i("div",{staticClass:"no-record"},[t._v("暂无记录")]),t._v(" "),i("btn",{staticStyle:{position:"absolute",bottom:"6.4vw",left:"0",right:"0"},attrs:{text:"添加意向产品"},nativeOn:{click:function(e){return t.jump(e)}}})],1)},staticRenderFns:[]};var f=i("C7Lr")(u,h,!1,function(t){i("iQ0j")},"data-v-cbbe7e6e",null);e.default=f.exports},dt95:function(t,e){},iQ0j:function(t,e){},trNZ:function(t,e){},zxhB:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("4YfN"),n=i.n(s),a=i("HVJf"),o=i("YV7O"),r=i("y5y3"),c=i("srjt"),l=i("xd7I"),d=i("0xDb"),u=(i("vGYV"),i("wSez")),h=new d.a;l.default.component(u.Loadmore.name,u.Loadmore);var f={data:function(){return{list:[],allLoaded:!1,page:1,limit:20,key:!1,noData:!1}},computed:n()({},Object(a.d)({parmas:function(t){return t.treeList.parmas},listScroll:function(t){return t.loadmore.listScroll},msManageList:function(t){return t.loadmore.msManageList},artList:function(t){return t.loadmore.artList},listAllScroll:function(t){return t.loadmore.listAllScroll}})),watch:{parmas:function(){var t=this;(this.hasData(),this.key)?this.hasList(this.parmas.name1)===this.msManageList.length?(this.getInitList([]),this.getQuestionList(1,20)):(this.getList(this.parmas.name1),this.allLoaded=!1,this.$nextTick(function(){t.listenScrollTop()})):(this.initGetData(),this.key=!0)}},mounted:function(){1!==this.$route.query.type?(this.key=!0,this.listenScrollTop(),this.hasData()):this.initData()},methods:n()({},Object(a.c)(["setListScroll","getList","setMsManageList","getInitList","getScroll","setListAllScroll"]),{recordScrollPosition:function(t){var e={id:this.parmas.name1,scroll:t.target.scrollTop};this.setListAllScroll(e)},listenScrollTop:function(){var t=this;this.$refs.questionScroll.addEventListener("scroll",this.recordScrollPosition,!1),this.getScroll(this.parmas.name1),this.$nextTick(function(){t.$refs.questionScroll.scrollTop=t.listScroll})},hasData:function(){var t=this.parmas.name1,e=void 0;this.msManageList.forEach(function(i){i[0].id===t&&(e=i[1].list)}),e&&e.length?this.noData=!1:this.noData=!0},initData:function(){this.setListScroll(0),this.$refs.questionScroll.scrollTop=this.listScroll},initGetData:function(){var t=this,e=this.parmas.name1;h.questionList(e,1,20).then(function(e){t.saveList(e.data),t.getInitList(e.data),t.listenScrollTop(),e.data&&e.data.length<20&&(t.allLoaded=!0),t.hasData()})},getQuestionList:function(t,e){var i=this,s=this.parmas.name1;h.questionList(s,t,e).then(function(t){t.data&&(t.data.length?(i.allLoaded=!1,i.list=i.artList.concat(t.data),i.saveList(i.list),i.getList(i.parmas.name1),i.listenScrollTop()):(i.saveList(),i.getList(i.parmas.name1),i.allLoaded=!0),i.hasData())})},toQuestionDetails:function(t){var e=this.artList[t].id;this.$router.push({path:"/questionDetail",query:{id:e}})},loadBottom:function(){this.$refs.load.onBottomLoaded(),this.pullDownData()},pullDownData:function(){this.allLoaded=!0;var t=this.artList.length/20+1;Math.floor(t)<t?this.allLoaded=!0:(this.page=t,this.getQuestionList(this.page,this.limit))},hasList:function(t){var e=0;return this.msManageList.forEach(function(i){i[0].id==t?e-=1:e+=1}),e},saveList:function(t){var e=[{id:this.parmas.name1},{list:t}];this.setMsManageList(e),this.hasData()}})},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{ref:"questionScroll"},[s("mt-loadmore",{ref:"load",attrs:{"bottom-method":t.loadBottom,"bottom-all-loaded":t.allLoaded,"auto-fill":!1}},t._l(t.artList,function(e,n){return s("li",{key:n,on:{click:function(e){return e.preventDefault(),t.toQuestionDetails(n)}}},[s("span",[t._v(t._s(e.title))]),t._v(" "),s("img",{attrs:{src:i("4ral"),alt:""}})])}),0),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.noData,expression:"noData"}],staticClass:"search_nothing"},[s("p",[t._v("很抱歉，没有找到相关内容")]),t._v(" "),s("div",{staticClass:"search_bg"})])],1)},staticRenderFns:[]};var p=i("C7Lr")(f,m,!1,function(t){i("dt95")},"data-v-5d81e920",null).exports,v={components:{banner:o.a,EggSearch:r.a,EggTreeList:c.a,EggQuestionList:p},data:function(){return{title:"",questionList:"questionList",origin:!0,paddingTop:"",top:""}},computed:n()({},Object(a.d)({list:function(t){return t.treeList.list}})),created:function(){this.initTitle(),this.initTop(),this.initParmas(),this.isIPhoneX()},methods:n()({},Object(a.c)(["setParmas"]),{initTitle:function(){this.title=this.$route.query.name},initParmas:function(){1===this.$route.query.type&&this.setParmas({})},getParmas:function(t){this.setParmas(t)},getStatus:function(t){this.questionList=t?"questionList":"questionList1"},initTop:function(){this.list.length?this.list[0].child?this.questionList="questionList":this.list[0].child||(this.questionList="questionList1"):this.questionList="questionList0"},isIPhoneX:function(){var t=this.phoneSize();"iphonex"===t?(this.paddingTop="22",this.top="36"):(this.paddingTop="16",this.top="30")}})},L={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"question"},[i("banner",{attrs:{title:t.title}}),t._v(" "),i("div",{staticClass:"search_box"},[i("EggSearch",{style:{paddingTop:t.paddingTop+"vw"},attrs:{origin:t.origin,type:"question"}})],1),t._v(" "),i("div",[i("EggTreeList",{style:{top:t.top+"vw"},attrs:{getParmas:t.getParmas,getStatus:t.getStatus}})],1),t._v(" "),i("div",{class:t.questionList},[i("EggQuestionList")],1)],1)},staticRenderFns:[]};var g=i("C7Lr")(v,L,!1,function(t){i("trNZ")},"data-v-ee7ee454",null);e.default=g.exports}});
//# sourceMappingURL=34.ea6c465da3ddc9656adf.js.map