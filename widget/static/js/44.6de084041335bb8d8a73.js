webpackJsonp([44],{"/Uri":function(e,t,n){"use strict";var a=n("xd7I"),s=n("wSez"),i=n("WdeC");a.default.component(s.Picker.name,s.Picker),a.default.component(s.Popup.name,s.Popup);var o={name:"mySelect",props:["leftText","val","selectList"],components:{customerLi:i.a},data:function(){return{slots:[{values:this.selectList}],popupVisible:!1,key:!1,indexVal:""}},mounted:function(){this.indexVal=this.val},methods:{select:function(){this.indexVal?(this.$refs.picker.setSlotValue(0,this.indexVal),this.$emit("valChange",this.indexVal)):(this.$refs.picker.setSlotValue(0,this.selectList[0]),this.indexVal=this.selectList[0],this.$emit("valChange",this.selectList[0])),this.popupVisible=!0},onValuesChange:function(e,t){this.key?(this.$emit("valChange",t[0]),this.indexVal=t[0]):this.key=!0}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"mySelect"},[n("ul",[n("customerLi",{tag:"li",attrs:{leftText:e.leftText,icon:!0},nativeOn:{click:function(t){return e.select(t)}}},[n("span",[e._v(e._s(e.indexVal||"请选择"+e.leftText))])]),e._v(" "),n("li",[n("mt-popup",{attrs:{position:"bottom"},model:{value:e.popupVisible,callback:function(t){e.popupVisible=t},expression:"popupVisible"}},[n("mt-picker",{ref:"picker",attrs:{slots:e.slots},on:{change:e.onValuesChange}})],1)],1)],1)])},staticRenderFns:[]};var l=n("C7Lr")(o,r,!1,function(e){n("xUra")},null,null);t.a=l.exports},KPbf:function(e,t){},WbRR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("4YfN"),s=n.n(a),i=n("YV7O"),o=n("/Uri"),r=n("oelh"),l=n("WdeC"),c={name:"demand",components:{mySelect:o.a,remark:r.a,customerLi:l.a},props:["defaultVal"],data:function(){return{demand:{},progressList:["装修中","装修完成","毛坯阶段","水电木工","油漆吊顶","橱柜安装","地板安装","木门安装","洁具安装","灯饰安装"],buyReasonList:["旧床换新","新房购置","婚房购置"],roomNumList:[1,2,3,4,"5及以上"],colorPrefList:["暖色","冷色"],stylePrefList:["现代","中式古典","欧式","美式","新中式"],shopNameList:[],shops:[]}},created:function(){var e=localStorage.getItem("ajaxData");this.ajaxData=JSON.parse(e);var t=localStorage.getItem("shops");t=JSON.parse(t),this.shopNameList=t.map(function(e){return e.name}),this.shops=t},methods:{progressChange:function(e){this.demand.progress=e,this.emitEvent()},buyReasonChange:function(e){this.demand.buyReason=e,this.emitEvent()},roomNumChange:function(e){this.demand.roomNum=e,this.emitEvent()},colorPrefChange:function(e){this.demand.colorPref=e,this.emitEvent()},stylePrefChange:function(e){this.demand.stylePref=e,this.emitEvent()},shopNameChange:function(e){this.demand.shopId=this.getShopId(e),this.emitEvent()},intentionChange:function(){this.emitEvent()},remarkChange:function(){this.emitEvent()},emitEvent:function(){this.$emit("getDemand",this.demand)},getShopId:function(e){for(var t=["",this.shops],n=t[0],a=t[1],s=0;s<a.length;s++)if(a[s].name===e){n=a[s].id;break}return n}}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"demand"},[n("ul",[n("customerLi",{tag:"li",attrs:{leftText:"意向产品"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.demand.intention,expression:"demand.intention"}],attrs:{placeholder:"请填写意向产品",type:"text"},domProps:{value:e.demand.intention},on:{change:e.intentionChange,input:function(t){t.target.composing||e.$set(e.demand,"intention",t.target.value)}}})]),e._v(" "),n("mySelect",{tag:"li",attrs:{leftText:"装修进度",selectList:e.progressList},on:{valChange:e.progressChange}}),e._v(" "),n("mySelect",{tag:"li",attrs:{leftText:"购买原因",selectList:e.buyReasonList},on:{valChange:e.buyReasonChange}}),e._v(" "),n("mySelect",{tag:"li",attrs:{leftText:"房间数量",selectList:e.roomNumList},on:{valChange:e.roomNumChange}}),e._v(" "),n("mySelect",{tag:"li",attrs:{leftText:"颜色偏好",selectList:e.colorPrefList},on:{valChange:e.colorPrefChange}}),e._v(" "),n("mySelect",{tag:"li",attrs:{leftText:"装修风格",selectList:e.stylePrefList},on:{valChange:e.stylePrefChange}}),e._v(" "),n("mySelect",{tag:"li",attrs:{leftText:"所属门店",selectList:e.shopNameList},on:{valChange:e.shopNameChange}}),e._v(" "),n("li",{staticClass:"noPadding"},[n("remark",{attrs:{title:"备注"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.demand.remark,expression:"demand.remark"}],attrs:{placeholder:"写点什么"},domProps:{value:e.demand.remark},on:{change:e.remarkChange,input:function(t){t.target.composing||e.$set(e.demand,"remark",t.target.value)}}})])],1)],1)])},staticRenderFns:[]};var d=n("C7Lr")(c,m,!1,function(e){n("KPbf")},"data-v-5f7e0c62",null).exports,h=n("vGYV"),u=n("CqDD"),p=n("wSez"),f={name:"newCustomerDemand",components:{myBanner:i.a,demand:d},data:function(){return{demand:{}}},computed:{},created:function(){var e=localStorage.getItem("ajaxData");this.ajaxData=JSON.parse(e);var t=localStorage.getItem("shops");this.shops=JSON.parse(t)},mounted:function(){},methods:{newDemand:function(){var e=this;if(this.demand.shopId){var t=this.$route.params.customerId;h.a.getAjax(this,"customer/update",s()({customerId:t,account:this.ajaxData.account,tenantId:this.ajaxData.tenantId,shopId:this.demand.shopId},Object(u.g)(this.demand,"demand")),"v2","post").then(function(t){t&&p.MessageBox.alert("新建成功！").then(function(t){e.$router.go(-1)})}).catch(function(t){510===t&&e.newDemand()})}else h.a.tip("请选择门店")},getDemand:function(e){this.demand=e}}},g={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"newCustomerDemand"},[t("my-banner",{attrs:{title:"新建需求"}},[t("button",{on:{click:this.newDemand}},[this._v("新建")])]),this._v(" "),t("demand",{staticClass:"toppadding",on:{getDemand:this.getDemand}})],1)},staticRenderFns:[]};var v=n("C7Lr")(f,g,!1,function(e){n("gX3l")},"data-v-0d0b46b4",null);t.default=v.exports},gX3l:function(e,t){},xUra:function(e,t){}});