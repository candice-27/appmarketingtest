webpackJsonp([56],{"41Ld":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("4YfN"),s=a.n(r),i=a("xd7I"),o=a("YV7O"),n=a("fzaL"),c=a("OVlV"),l=a("ZaQL"),u=a("UaEH"),p=a("kjQs"),d=a("wSez"),m=a("0xDb");i.default.component(d.Picker.name,d.Picker),i.default.component(d.Popup.name,d.Popup);var f=new m.a,h={props:["value","label","placeholder","showIcon","required"],data:function(){return{popupVisible:!1,slots:[{flex:1,values:["请选择"],className:"slot1",textAlign:"center"}],arr:[]}},mounted:function(){this.getStyle()},methods:{onValuesChange:function(t,e){this.arr=t.getValues(),console.log(this.arr)},open:function(){this.popupVisible=!0},cancel:function(){this.popupVisible=!1},update:function(){this.$emit("update",this.arr[0].name,this.arr[0].code),this.popupVisible=!1},getStyle:function(){var t=this;f.getArea("DR_APARTMENT_TYPE").then(function(e){0===e.code&&(t.slots[0].values=e.data)}).catch(function(e){510===e&&t.getStyle()})}}},v={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"inputBox"},[r("label",{on:{click:t.open}},[r("span",[t._v(t._s(t.label)),r("span",{directives:[{name:"show",rawName:"v-show",value:t.required,expression:"required"}],staticClass:"yan-red"},[t._v("*")])]),t._v(" "),r("input",{attrs:{type:"text",readonly:"",placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})]),t._v(" "),t.showIcon?r("div",{staticClass:"icon-right"},[r("img",{attrs:{src:a("4ral"),alt:""}})]):t._e(),t._v(" "),r("mt-popup",{attrs:{position:"bottom"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[r("mt-picker",{attrs:{slots:t.slots,showToolbar:!0,"value-key":"name"},on:{change:t.onValuesChange}},[r("div",{staticClass:"btn-group"},[r("div",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),r("div",{on:{click:t.update}},[t._v("确定")])])])],1)],1)},staticRenderFns:[]};var y=a("C7Lr")(h,v,!1,function(t){a("SPnk")},"data-v-0532eb3e",null).exports;i.default.component(d.Picker.name,d.Picker),i.default.component(d.Popup.name,d.Popup);var b={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"inputBox"},[r("label",{on:{click:t.openElevatorSelect}},[r("span",[t._v(t._s(t.label)),r("span",{directives:[{name:"show",rawName:"v-show",value:t.required,expression:"required"}],staticClass:"yan-red"},[t._v("*")])]),t._v(" "),r("input",{attrs:{type:"text",readonly:"",placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})]),t._v(" "),t.showIcon?r("div",{staticClass:"icon-right"},[r("img",{attrs:{src:a("4ral"),alt:""}})]):t._e(),t._v(" "),r("mt-popup",{attrs:{position:"bottom"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[r("mt-picker",{attrs:{slots:t.slots,showToolbar:!0,"value-key":"name"},on:{change:t.onValuesChange}},[r("div",{staticClass:"btn-group"},[r("div",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),r("div",{on:{click:t.update}},[t._v("确定")])])])],1)],1)},staticRenderFns:[]};var k=a("C7Lr")({props:["value","label","placeholder","showIcon","required"],data:function(){return{popupVisible:!1,slots:[{flex:1,values:[{name:"有",value:"Y"},{name:"无",value:""}],className:"slot1",textAlign:"center"}],arr:[]}},methods:{onValuesChange:function(t,e){this.arr=t.getValues()},openElevatorSelect:function(){this.popupVisible=!0},cancel:function(){this.popupVisible=!1},update:function(){this.$emit("update",this.arr[0].name,this.arr[0].value),this.popupVisible=!1}}},b,!1,function(t){a("ijXH")},"data-v-7d9cacf2",null).exports,_=a("HVJf"),g=a("vGYV");a("pPmT");i.default.component(d.Picker.name,d.Picker);var I=new m.a,x=(a("BvhE").Base64,{data:function(){return{form:{address:"",remark:"",apartmentType:"",elevator:"",customerId:"",id:"",country:"CN",province:"",city:"",district:""},elevator:"",area:"",apartmentType:"",selectIcon:!0,inputIcon:!1,status:!0}},components:{mybanner:o.a,Btn:n.a,yanInput:c.a,yanTextarea:u.a,areaSelect:p.a,houseSelect:y,elevatorSelect:k,yanOneInput:l.a},computed:s()({},Object(_.d)("addAddress",["title","formInfo"])),created:function(){this.$set(this.form,"customerId",this.$route.params.customerId),this.$route.query.addressId?(this.form.id=this.$route.query.addressId,this.updateTitle("编辑地址"),this.getAddress(this.form.id)):this.updateTitle("新建地址")},mounted:function(){},methods:s()({},Object(_.c)("addAddress",["updateTitle"]),{getAddress:function(t){var e=this;I.getAddress(t).then(function(t){0===t.code?(e.form.address=t.data.address,e.form.remark=t.data.remark,e.form.apartmentType=t.data.apartmentType,e.form.elevator="Y"===t.data.elevator?"Y":"",e.form.country=t.data.country,e.form.province=t.data.province,e.form.city=t.data.city,e.form.district=t.data.district,e.elevator="Y"===t.data.elevator?"是":"否",e.area=""+t.data.provinceName+t.data.cityName+t.data.districtName,e.apartmentType=t.data.apartmentTypeName):g.a.tip(t.msg)}).catch(function(a){510===a&&e.getAddress(t)})},jump:function(){this.updateAddress()},updateArea:function(t,e){this.area=t,this.$set(this.form,"province",e.split("-")[0]),this.$set(this.form,"city",e.split("-")[1]),this.$set(this.form,"district",e.split("-")[2])},updateElevator:function(t,e){this.elevator=t,this.$set(this.form,"elevator",e)},updateApartmentType:function(t,e){this.apartmentType=t,this.$set(this.form,"apartmentType",e)},updateAddress:function(){var t=this;if(this.valid()){console.log(":::",this.form);var e={address:this.form.address,remark:this.form.remark,apartmentType:this.form.apartmentType,elevator:this.form.elevator,customerId:this.form.customerId,country:this.form.country,province:this.form.province,city:this.form.city,district:this.form.district};I.updateAddress(e).then(function(e){0===e.code?(g.a.tip(e.msg),t.$router.back(-1)):g.a.tip("更新失败")}).catch(function(e){510===e&&t.updateAddress()})}},changeStr:function(t){return t.replace(/[\ud800-\udbff][\udc00-\udfff]/g,"")},valid:function(){if(""==this.customerId)return g.a.tip("客户id为空"),!1;if(""==this.form.province||""==this.form.city||""==this.form.district)return g.a.tip("请选择地区"),!1;if(""==this.form.address)return g.a.tip("请填写详细地址"),!1;if(""==this.form.apartmentType)return g.a.tip("请选择户型"),!1;if(""==this.elevator)return g.a.tip("请选择有无电梯"),!1;if(this.form.address.length>200)return this.form.address=this.form.address.substring(0,200),g.a.tip("地址不能超过200字"),!1;if(!/^[\u4E00-\u9FA5a-zA-Z0-9]{1,}$/.test(this.form.address))return g.a.tip("地址只能输入中英文或数字,不能包含空格"),!1;if(this.form.remark.length>200)return this.form.remark=this.form.remark.substring(0,200),g.a.tip("备注不能超过200字"),!1;return""!==this.form.remark&&/[\ud800-\udbff][\udc00-\udfff]/g.test(this.form.remark)?(this.form.remark=this.changeStr(this.form.remark),g.a.tip("备注不支持表情"),!1):!(""!==this.form.remark&&!/^[\u4E00-\u9FA5a-zA-Z0-9\s]{1,}$/.test(this.form.remark))||(g.a.tip("备注不支持特殊符号"),!1)}})}),T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addAdress"},[a("mybanner",{staticStyle:{background:"#fff"},attrs:{title:t.title}}),t._v(" "),a("ul",{staticClass:"list"},[a("li",[a("area-select",t._b({staticClass:"li_border",attrs:{readonly:"",showIcon:t.selectIcon},on:{update:t.updateArea},model:{value:t.area,callback:function(e){t.area=e},expression:"area"}},"area-select",t.formInfo.areaInfo,!1))],1),t._v(" "),a("li",[a("yan-one-input",t._b({staticClass:"li_border",attrs:{showIcon:t.inputIcon,maxlength:200},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address","string"==typeof e?e.trim():e)},expression:"form.address"}},"yan-one-input",t.formInfo.addressInfo,!1))],1),t._v(" "),a("li",[a("house-select",t._b({staticClass:"li_border",attrs:{showIcon:t.selectIcon},on:{update:t.updateApartmentType},model:{value:t.apartmentType,callback:function(e){t.apartmentType=e},expression:"apartmentType"}},"house-select",t.formInfo.apartmentType,!1))],1),t._v(" "),a("li",[a("elevator-select",t._b({attrs:{showIcon:t.selectIcon},on:{update:t.updateElevator},model:{value:t.elevator,callback:function(e){t.elevator=e},expression:"elevator"}},"elevator-select",t.formInfo.elevatorInfo,!1))],1)]),t._v(" "),a("yan-textarea",t._b({attrs:{maxlength:200},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark","string"==typeof e?e.trim():e)},expression:"form.remark"}},"yan-textarea",t.formInfo.remarkInfo,!1)),t._v(" "),a("btn",{attrs:{text:"保存"},nativeOn:{click:function(e){return t.jump(e)}}})],1)},staticRenderFns:[]};var V=a("C7Lr")(x,T,!1,function(t){a("B1dj")},"data-v-149f1587",null);e.default=V.exports},B1dj:function(t,e){},SPnk:function(t,e){},ijXH:function(t,e){}});
//# sourceMappingURL=56.882d23c05934fd83d3d5.js.map