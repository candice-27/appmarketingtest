{"version":3,"sources":["webpack:///./src/utils/Bus.js","webpack:///src/components/work/dailyReport/myDatePicker.vue","webpack:///./src/components/work/dailyReport/myDatePicker.vue?981b","webpack:///./src/components/work/dailyReport/myDatePicker.vue","webpack:///src/pages/work/dailyReport.vue","webpack:///./src/pages/work/dailyReport.vue?330f","webpack:///./src/pages/work/dailyReport.vue"],"names":["Bus","__webpack_require__","Vue","myDatePicker","name","components","props","data","year","month","day","curDate","dateList","selectDate","watch","curMonthData","val","length","console","log","this","map","element","createTime","created","getDate","mounted","computed","getBeginDay","Date","getDay","curDay","prevDay","methods","date","getFullYear","getMonth","changeCurDay","$emit","prevMonth","nextMonth","noSummary","$router","push","path","js","tip","dateCompare","date1","date2","_ref","split","arr1","arr2","parseInt","dateListCompare","item","substr","includes","dailyReport_myDatePicker","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","attrs","src","alt","_v","_s","_m","_l","index","key","class","now-day","active-day","summary","future-day","$event","_e","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","Base64","indexModel","utils","dailyReport","banner","CurReport","curReport","DailySummary","dailySummary","DailyPlan","dailyPlan","defineProperty_default","dailyList","cus","cusBusiness","guestSingleValue","opp","tourist","trackRecord","turnoverRatio","volumeBusiness","curNum","dailySummaryTextarea","dailyPlanTextarea","planList","$on","getToday","_ref2","getCurMonthData","getCurMonth","getDailyData","startDate","endDate","QueryYourself","getCurDay","setSumAndPlan","changeCurMonthData","_ref3","changeDailySummaryTextarea","str","changeDailyPlanTextarea","_this","then","res","catch","reject","num","indexOf","setReportTime","summarize","plan","decode","_this2","getDailyReport","newPlan","work_dailyReport","title","list","text","disabled"],"mappings":"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","file":"static/js/44.a57be835e8c51128b202.js","sourcesContent":["import Vue from 'vue'\r\nconst Bus = new Vue()\r\nexport default Bus\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Bus.js","<template>\r\n  <div class=\"myDatePicker\">\r\n    <div class=\"date-header\">\r\n      <div class=\"prev-month\" @click=\"prevMonth\">\r\n        <img src=\"../../../assets/imgs/prev.png\" alt=\"\">\r\n      </div>\r\n      <div class=\"show-date\">{{`${year}.${month<10?`0${month}`:month}`}}</div>\r\n      <div class=\"next-month\" @click=\"nextMonth\">\r\n         <img src=\"../../../assets/imgs/next.png\" alt=\"\">\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"date-content\">\r\n      <ul class=\"week-header\">\r\n        <li>日</li>\r\n        <li>一</li>\r\n        <li>二</li>\r\n        <li>三</li>\r\n        <li>四</li>\r\n        <li>五</li>\r\n        <li>六</li>\r\n      </ul>\r\n\r\n      <ul class=\"week-day\">\r\n        <li class=\"every-day\" v-for=\"(item, index) in 42\" :key=\"`every_day${index}`\">\r\n          <!-- <span\r\n          v-if=\"item - getBeginDay <= 0\"\r\n          class=\"other-day\">{{item - getBeginDay + prevDay}}</span> -->\r\n          <span\r\n          v-if=\"item - getBeginDay > 0 && item - getBeginDay <= curDay\"\r\n          :class=\"{\r\n            'now-day': `${year}-${month}-${item - getBeginDay}` === curDate,\r\n            'active-day': `${year}-${month}-${item - getBeginDay}` === selectDate,\r\n            'summary': dateListCompare(`${year}-${month < 10 ? `0${month}` : month}-${item - getBeginDay < 10 ? `0${item - getBeginDay}` : item - getBeginDay}`),\r\n            'future-day': dateCompare(`${year}-${month}-${item - getBeginDay}`, curDate)\r\n          }\"\r\n          @click=\"dateListCompare(`${year}-${month < 10 ? `0${month}` : month}-${item - getBeginDay < 10 ? `0${item - getBeginDay}` : item - getBeginDay}`) ? changeCurDay(item - getBeginDay) : noSummary(item - getBeginDay)\">\r\n          {{item - getBeginDay}}\r\n          </span>\r\n          <!-- <span\r\n          v-if=\"item - getBeginDay > curDay\"\r\n          class=\"other-day\">{{item - getBeginDay - curDay}}</span> -->\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport mango from '../../../js/'\r\n\r\nexport default {\r\n  name: 'myDatePicker',\r\n  components:{\r\n\r\n  },\r\n  props:['curMonthData'],\r\n  data(){\r\n    return{\r\n      year: null,\r\n      month: null,\r\n      day: null,\r\n      curDate: null, // 当天日期\r\n      dateList: [], // 当月有总结的日期。\r\n      selectDate: ''\r\n    }\r\n  },\r\n  watch: {\r\n    curMonthData(val) {\r\n      if (val.length) {\r\n        console.log(val);\r\n        this.dateList = val.map(element => element.createTime)\r\n        console.log(this.dateList)\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getDate()\r\n  },\r\n  mounted() {\r\n    \r\n  },\r\n  computed: {\r\n    getBeginDay() {\r\n      console.log('getBeginDay',new Date(this.year, this.month - 1, 1).getDay())\r\n      return new Date(this.year, this.month - 1, 1).getDay()\r\n    },\r\n    curDay() {\r\n      console.log('getBeginDay111',new Date(this.year, this.month, 0).getDate())\r\n      return new Date(this.year, this.month, 0).getDate()\r\n    },\r\n    prevDay() {\r\n      console.log('getBeginDay2222',new Date(this.year, this.month - 1, 0).getDate())\r\n      return new Date(this.year, this.month - 1, 0).getDate()\r\n    }\r\n  },\r\n  methods:{\r\n    getDate() {\r\n      let date = new Date()\r\n      this.year = date.getFullYear()\r\n      this.month = date.getMonth() + 1\r\n      this.day = date.getDate()\r\n      this.curDate = `${this.year}-${this.month}-${this.day}`\r\n      this.selectDate = `${this.year}-${this.month}-${this.day}`\r\n    },\r\n    changeCurDay(day) {\r\n      this.day = day\r\n      this.selectDate = `${this.year}-${this.month}-${this.day}`\r\n      this.$emit('getCurDay', `${this.year}年${this.month}月${day}日`)\r\n    },\r\n    prevMonth() {\r\n      if (this.month === 1) {\r\n        this.year --\r\n        this.month = 12\r\n      } else {\r\n        this.month --\r\n      }\r\n      this.$emit('changeCurMonthData', `${this.year}-${this.month < 10 ? `0${this.month}` : this.month}`)\r\n    },\r\n    nextMonth() {\r\n      if (this.month === 12) {\r\n        this.year ++\r\n        this.month = 1\r\n      } else {\r\n        this.month ++\r\n      }\r\n      this.$emit('changeCurMonthData', `${this.year}-${this.month < 10 ? `0${this.month}` : this.month}`)\r\n    },\r\n    noSummary(curDay) {\r\n      if (this.curDate === `${this.year}-${this.month}-${curDay}`) {\r\n        this.$router.push({path: '/newPlan'})\r\n      } else {\r\n        mango.tip(`当日无总结！`)\r\n      }\r\n    },\r\n    dateCompare(date1, date2) {\r\n      let [arr1, arr2] = [date1.split('-'), date2.split('-')]\r\n      console.log(parseInt(arr1[0]), parseInt(arr2[0]))\r\n      if (parseInt(arr1[0]) === parseInt(arr2[0])) { // 选择年份小于等于当前年份\r\n        if (parseInt(arr1[1]) <= parseInt(arr2[1])) {\r\n          if (parseInt(arr1[1]) === parseInt(arr2[1])) {\r\n            if (parseInt(arr1[2]) <= parseInt(arr2[2])) {\r\n              return false\r\n            } else {\r\n              return true\r\n            }\r\n          } else {\r\n            return false\r\n          }\r\n        } else {\r\n          return true\r\n        }\r\n      } else if (parseInt(arr1[0]) < parseInt(arr2[0])) {\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    },\r\n    dateListCompare(date) {\r\n      let arr = this.dateList.map(item => item.substr(0, 10))\r\n      //console.log('22',arr.includes(date))\r\n      return arr.includes(date)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n.myDatePicker{\r\n  margin: 21.266vw 4.8vw 0 4.8vw;\r\n  //margin: 0 4.8vw 0 4.8vw;\r\n  // padding: 1px;\r\n  background: #fff;\r\n  border-radius: 2vw;\r\n  .date-header{\r\n    width: 100%;\r\n    display: flex;\r\n    line-height: 10.466vw;\r\n    height:10.66vw;\r\n    border-bottom: 1px solid #E1E1E1;\r\n  }\r\n  .prev-month, .next-month{\r\n    height: 10.6vw;\r\n    width: 14.28%;\r\n    line-height: 10.6vw;\r\n    font-size: 12px;\r\n    text-align: center;\r\n    color: #363636;\r\n    cursor: pointer;\r\n    img{\r\n      width:2.933vw;\r\n    }\r\n  }\r\n  .show-date{\r\n    flex: 1;\r\n    height: 10.6vw;\r\n    line-height: 10.6vw;\r\n    text-align: center;\r\n    color: #363636;\r\n    font-size:16px;\r\n  }\r\n\r\n  .week-header{\r\n    display: flex;\r\n    li{\r\n      flex: 1;\r\n      font-size: 16px;\r\n      text-align: center;\r\n      line-height: 30px;\r\n      font-weight: 400;\r\n      color: #666;\r\n    }\r\n    li:first-child, li:last-child{\r\n      color: #FF964B;\r\n    }\r\n  }\r\n  .week-day{\r\n    width: 100%;\r\n      li{\r\n      display: inline-block;\r\n      width: 14.28%;\r\n      text-align: center;\r\n      cursor: pointer;\r\n      padding: 1vw 0 4.4vw 0;\r\n      span{\r\n        position: relative;\r\n        display: block;\r\n        width: 8vw;\r\n        height: 8vw;\r\n        font-size: 14px;\r\n        line-height: 8vw;\r\n        margin: auto;\r\n      }\r\n      span:after{\r\n        content: '';\r\n        display: block;\r\n        width: 2.4vw;\r\n        height: 2.4vw;\r\n        margin: auto;\r\n        background: url('../../../assets/imgs/no.png') no-repeat;\r\n        background-size: 2.4vw 2.4vw;\r\n        background-position: bottom center;\r\n        padding: 1vw 0;\r\n      }\r\n      span.summary:after{\r\n        background: url('../../../assets/imgs/yes.png') no-repeat;\r\n        background-size: 2.4vw 2.4vw;\r\n        background-position: bottom center;\r\n      }\r\n      span.now-day:after{\r\n        background: url('../../../assets/imgs/now.png') no-repeat;\r\n        background-size: 2.4vw 2.4vw;\r\n        background-position: bottom center;\r\n      }\r\n      span.future-day:after{\r\n        background: none;\r\n      }\r\n    }\r\n  }\r\n  .other-day{\r\n    color: #ccc;\r\n  }\r\n  span.active-day{\r\n    background: #007fff;\r\n    border-radius: 4vw;\r\n    color: #fff;\r\n    // box-sizing: border-box;\r\n    // border: 2px solid #007fff;\r\n    // height: 46px;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/work/dailyReport/myDatePicker.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"myDatePicker\"},[_c('div',{staticClass:\"date-header\"},[_c('div',{staticClass:\"prev-month\",on:{\"click\":_vm.prevMonth}},[_c('img',{attrs:{\"src\":require(\"../../../assets/imgs/prev.png\"),\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"show-date\"},[_vm._v(_vm._s((_vm.year + \".\" + (_vm.month<10?(\"0\" + _vm.month):_vm.month))))]),_vm._v(\" \"),_c('div',{staticClass:\"next-month\",on:{\"click\":_vm.nextMonth}},[_c('img',{attrs:{\"src\":require(\"../../../assets/imgs/next.png\"),\"alt\":\"\"}})])]),_vm._v(\" \"),_c('div',{staticClass:\"date-content\"},[_vm._m(0),_vm._v(\" \"),_c('ul',{staticClass:\"week-day\"},_vm._l((42),function(item,index){return _c('li',{key:(\"every_day\" + index),staticClass:\"every-day\"},[(item - _vm.getBeginDay > 0 && item - _vm.getBeginDay <= _vm.curDay)?_c('span',{class:{\n          'now-day': (_vm.year + \"-\" + _vm.month + \"-\" + (item - _vm.getBeginDay)) === _vm.curDate,\n          'active-day': (_vm.year + \"-\" + _vm.month + \"-\" + (item - _vm.getBeginDay)) === _vm.selectDate,\n          'summary': _vm.dateListCompare((_vm.year + \"-\" + (_vm.month < 10 ? (\"0\" + _vm.month) : _vm.month) + \"-\" + (item - _vm.getBeginDay < 10 ? (\"0\" + (item - _vm.getBeginDay)) : item - _vm.getBeginDay))),\n          'future-day': _vm.dateCompare((_vm.year + \"-\" + _vm.month + \"-\" + (item - _vm.getBeginDay)), _vm.curDate)\n        },on:{\"click\":function($event){_vm.dateListCompare((_vm.year + \"-\" + (_vm.month < 10 ? (\"0\" + _vm.month) : _vm.month) + \"-\" + (item - _vm.getBeginDay < 10 ? (\"0\" + (item - _vm.getBeginDay)) : item - _vm.getBeginDay))) ? _vm.changeCurDay(item - _vm.getBeginDay) : _vm.noSummary(item - _vm.getBeginDay)}}},[_vm._v(\"\\n        \"+_vm._s(item - _vm.getBeginDay)+\"\\n        \")]):_vm._e()])}),0)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"week-header\"},[_c('li',[_vm._v(\"日\")]),_vm._v(\" \"),_c('li',[_vm._v(\"一\")]),_vm._v(\" \"),_c('li',[_vm._v(\"二\")]),_vm._v(\" \"),_c('li',[_vm._v(\"三\")]),_vm._v(\" \"),_c('li',[_vm._v(\"四\")]),_vm._v(\" \"),_c('li',[_vm._v(\"五\")]),_vm._v(\" \"),_c('li',[_vm._v(\"六\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-2913736e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/work/dailyReport/myDatePicker.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2913736e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./myDatePicker.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./myDatePicker.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./myDatePicker.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2913736e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./myDatePicker.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2913736e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/work/dailyReport/myDatePicker.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"dailyReport\">\r\n    <banner :title='\"日报\"'\r\n            class=\"header\">\r\n      <button @click=\"newPlan\"\r\n              class=\"newDailyReport\">+</button>\r\n    </banner>\r\n    <!-- 日历组件 -->\r\n    <myDatePicker @getCurDay=\"getCurDay\"\r\n                  :curMonthData=\"curMonthData\"\r\n                  @changeCurMonthData=\"changeCurMonthData\" />\r\n    <!-- 当日数据 -->\r\n    <CurReport :list=\"dailyList\"\r\n               :curDay=\"curDay\" />\r\n    <!-- 当日总结 -->\r\n    <DailySummary :text=\"dailySummaryTextarea\"\r\n                  :disabled=\"false\"\r\n                  @changeDailySummaryTextarea=\"changeDailySummaryTextarea\" />\r\n    <!-- 明日目标及重点工作安排 -->\r\n    <DailyPlan :text=\"dailyPlanTextarea\"\r\n               :disabled=\"false\"\r\n               @changeDailyPlanTextarea=\"changeDailyPlanTextarea\" />\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport myDatePicker from '../../components/work/dailyReport/myDatePicker'\r\nimport banner from '../../components/banner'\r\nimport CurReport from '../../components/work/dailyReport/curReport'\r\nimport DailySummary from '../../components/work/dailyReport/dailySummary'\r\nimport DailyPlan from '../../components/work/dailyReport/dailyPlan'\r\nimport { IndexModel } from \"../../utils/\"\r\nimport mango from \"../../js\"\r\nimport Bus from '../../utils/Bus'\r\nimport { mapMutations } from 'vuex';\r\nlet Base64 = require('js-base64').Base64\r\nconst indexModel = new IndexModel()\r\nexport default {\r\n  name: 'dailyReporxt',\r\n  components: {\r\n    myDatePicker,\r\n    banner,\r\n    CurReport,\r\n    DailySummary,\r\n    DailyPlan\r\n  },\r\n  props: [],\r\n  data () {\r\n    return {\r\n      dailyList: {\r\n        \"cus\": 3,   //接待客户数\r\n        \"cusBusiness\": 2,    //成交客户数\r\n        \"guestSingleValue\": 52439,    //客单值\r\n        \"opp\": 3,     //新增意向数\r\n        \"tourist\": 1,    //游客数\r\n        \"trackRecord\": 2,   //跟进客户\r\n        \"turnoverRatio\": 1, // 成交率\r\n        \"volumeBusiness\": 157318   //成交金额\r\n      },\r\n      curDay: null,\r\n      curDate: null,\r\n      curNum: null, // 选择日期的中的天数\r\n      curMonthData: [],\r\n      dailySummaryTextarea: '',\r\n      dailyPlanTextarea: '',\r\n      planList: [],\r\n      dailyList: []\r\n    }\r\n  },\r\n  computed: {\r\n\r\n  },\r\n  created () {\r\n    Bus.$on('dailyPlanTextarea', val => {\r\n      console.log('dailyPlanTextarea', val)\r\n    })\r\n  },\r\n  mounted () {\r\n    this.curDay = this.getToday()\r\n    this.curDate = this.curDay.split(/年|月|日/)\r\n    let date = new Date()\r\n    const [year, month, day] = [date.getFullYear(), date.getMonth() + 1, date.getDate()]\r\n    this.curNum = parseInt(date.getDate())\r\n    // 获取当月数据\r\n    this.getCurMonthData(this.getCurMonth())\r\n    this.getDailyData({\r\n      startDate: `${year}-${month}-${day}`,\r\n      endDate: `${year}-${month}-${day}`,\r\n      QueryYourself: 1\r\n    })\r\n    // this.setSumAndPlan(this.curMonthData)\r\n  },\r\n  methods: {\r\n    getCurDay (curDay) {\r\n      if (this.curDay === curDay) {\r\n        return\r\n      }\r\n      this.curDay = curDay\r\n      this.curDate = curDay.split(/年|月|日/)\r\n      this.curNum = this.curDate[2]\r\n      // 显示选择日期的当日总结和明日计划\r\n      this.setSumAndPlan(this.curMonthData)\r\n      this.getDailyData({\r\n        startDate: `${this.curDate[0]}-${this.curDate[1]}-${this.curDate[2]}`,\r\n        endDate: `${this.curDate[0]}-${this.curDate[1]}-${this.curDate[2]}`,\r\n        QueryYourself: 1\r\n      })\r\n    },\r\n    changeCurMonthData (date) {\r\n      // console.log('当前月份', this.getCurMonth(), date)\r\n      this.getCurMonthData(date)\r\n    },\r\n    // 获取当前月份\r\n    getCurMonth () {\r\n      let date = new Date()\r\n      let [year, month] = [date.getFullYear(), date.getMonth() + 1]\r\n      if (month < 10) {\r\n        month = '0' + month\r\n      }\r\n      return `${year}-${month}`\r\n    },\r\n    // getSelectMonth() {\r\n\r\n    // },\r\n    // 当日总结子组件触发更改数据\r\n    changeDailySummaryTextarea (str) {\r\n      this.dailySummaryTextarea = str\r\n    },\r\n    // 明日目标及重点工作安排子组件触发更改文本\r\n    changeDailyPlanTextarea (str) {\r\n      this.dailyPlanTextarea = str\r\n    },\r\n    // 获取当天日期字符串，格式如：2019年04月17日\r\n    getToday () {\r\n      let date = new Date()\r\n      return `${date.getFullYear()}年${date.getMonth() + 1}月${date.getDate()}日`\r\n    },\r\n    // 获取选择日期的数据\r\n    getCurMonthData (month) {\r\n      console.log(month);\r\n      indexModel.getCurMonthData({\r\n        date: month\r\n      }).then((res) => {\r\n        res = res.data\r\n        if (res) {\r\n          console.log(res);\r\n          this.curMonthData = res\r\n          if (this.curNum) {\r\n            // 显示选择日期的当日总结和明日计划\r\n            this.setSumAndPlan(res)\r\n          }\r\n          // 遍历一个月内有哪些天有总结\r\n          // this.dailyList = res.map((item) => {\r\n          //   let date = item.createTime\r\n          //   return parseInt(date.split(' ')[0].split('-')[2])\r\n          // })\r\n        }\r\n      }).catch((reject) => {\r\n        if (reject === 510) {\r\n          this.getCurMonthData(month)\r\n        }\r\n      })\r\n    },\r\n    // 显示选择日期的当日总结和明日计划\r\n    setSumAndPlan (res) {\r\n      // 获取当前选择的日期数的整数值\r\n      const num = parseInt(this.curNum)\r\n      let arr = []\r\n      let arr2 = []\r\n      if (res) {\r\n        // 获取res数组里面的日期。\r\n        arr = res.map(element => parseInt(element.createTime.substr(8, 2)))\r\n      } else {\r\n        return\r\n      }\r\n      const index = arr.indexOf(num)\r\n      if (index >= 0) {\r\n        let date = `${this.curDate[0]}/${this.curDate[1]}/${this.curDate[2]}`\r\n        if (new Date(date) < mango.setReportTime()) {\r\n          this.dailySummaryTextarea = res[index].summarize\r\n          this.dailyPlanTextarea = res[index].plan\r\n        } else {\r\n          this.dailySummaryTextarea = Base64.decode(res[index].summarize)\r\n          this.dailyPlanTextarea = Base64.decode(res[index].plan)\r\n        }\r\n\r\n      }\r\n    },\r\n    getDailyData (data) {\r\n      indexModel.getDailyReport(data).then((res) => {\r\n        if (res.data) {\r\n          console.log(res)\r\n          // 更改数据\r\n          this.dailyList = res.data\r\n        }\r\n      }).catch((reject) => {\r\n        if (reject === 510) {\r\n          this.getDailyData(data)\r\n        }\r\n      })\r\n    },\r\n    // 跳转新建计划页面\r\n    newPlan () {\r\n      if (this.dailySummaryTextarea === '' && this.dailyPlanTextarea === '') {\r\n        this.$router.push({ path: '/newPlan' })\r\n      } else {\r\n        mango.tip('当日已提交日报，请勿重复提交！')\r\n        return\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.dailyReport {\r\n  padding-top: 1px;\r\n  padding-bottom: 4.8vw;\r\n  & > div {\r\n    margin: 4.8vw 4.8vw 0 4.8vw;\r\n    background: #fff;\r\n    padding-top: 1px;\r\n    border-radius: 2vw;\r\n  }\r\n  & > div:first-child {\r\n    margin: 0;\r\n  }\r\n  & > div:nth-child(2) {\r\n    margin-top: 21.266vw;\r\n  }\r\n  .header {\r\n    background: #fff;\r\n    border: none;\r\n  }\r\n  .newDailyReport {\r\n    color: #007aff;\r\n    font-size: 30px;\r\n    padding: 0 18px;\r\n    // font-size: 36px;\r\n    // width: 10vw;\r\n    // margin-right: 4.8vw;\r\n    font-weight: 300;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/work/dailyReport.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dailyReport\"},[_c('banner',{staticClass:\"header\",attrs:{\"title\":\"日报\"}},[_c('button',{staticClass:\"newDailyReport\",on:{\"click\":_vm.newPlan}},[_vm._v(\"+\")])]),_vm._v(\" \"),_c('myDatePicker',{attrs:{\"curMonthData\":_vm.curMonthData},on:{\"getCurDay\":_vm.getCurDay,\"changeCurMonthData\":_vm.changeCurMonthData}}),_vm._v(\" \"),_c('CurReport',{attrs:{\"list\":_vm.dailyList,\"curDay\":_vm.curDay}}),_vm._v(\" \"),_c('DailySummary',{attrs:{\"text\":_vm.dailySummaryTextarea,\"disabled\":false},on:{\"changeDailySummaryTextarea\":_vm.changeDailySummaryTextarea}}),_vm._v(\" \"),_c('DailyPlan',{attrs:{\"text\":_vm.dailyPlanTextarea,\"disabled\":false},on:{\"changeDailyPlanTextarea\":_vm.changeDailyPlanTextarea}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-97394160\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/work/dailyReport.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-97394160\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./dailyReport.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./dailyReport.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./dailyReport.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-97394160\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./dailyReport.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-97394160\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/work/dailyReport.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}