webpackJsonp([41],{"0pFz":function(t,e){},"4A4y":function(t,e,n){(function(e){
/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
!function(e){"use strict";"function"==typeof bootstrap?bootstrap("promise",e):t.exports=e()}(function(){"use strict";var t=!1;try{throw new Error}catch(e){t=!!e.stack}var n,r=w(),i=function(){},o=function(){var t={task:void 0,next:null},n=t,r=!1,i=void 0,a=!1,s=[];function c(){for(var e,n;t.next;)e=(t=t.next).task,t.task=void 0,(n=t.domain)&&(t.domain=void 0,n.enter()),u(e,n);for(;s.length;)u(e=s.pop());r=!1}function u(t,e){try{t()}catch(t){if(a)throw e&&e.exit(),setTimeout(c,0),e&&e.enter(),t;setTimeout(function(){throw t},0)}e&&e.exit()}if(o=function(t){n=n.next={task:t,domain:a&&e.domain,next:null},r||(r=!0,i())},"object"==typeof e&&"[object process]"===e.toString()&&e.nextTick)a=!0,i=function(){e.nextTick(c)};else if("function"==typeof setImmediate)i="undefined"!=typeof window?setImmediate.bind(window,c):function(){setImmediate(c)};else if("undefined"!=typeof MessageChannel){var p=new MessageChannel;p.port1.onmessage=function(){i=f,p.port1.onmessage=c,c()};var f=function(){p.port2.postMessage(0)};i=function(){setTimeout(c,0),f()}}else i=function(){setTimeout(c,0)};return o.runAfter=function(t){s.push(t),r||(r=!0,i())},o}(),a=Function.call;function s(t){return function(){return a.apply(t,arguments)}}var c,u=s(Array.prototype.slice),p=s(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;n<r;n++)n in this&&(e=t(e,this[n],n));return e}),f=s(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),l=s(Array.prototype.map||function(t,e){var n=this,r=[];return p(n,function(i,o,a){r.push(t.call(e,o,a,n))},void 0),r}),d=Object.create||function(t){function e(){}return e.prototype=t,new e},h=Object.defineProperty||function(t,e,n){return t[e]=n.value,t},v=s(Object.prototype.hasOwnProperty),y=Object.keys||function(t){var e=[];for(var n in t)v(t,n)&&e.push(n);return e},m=s(Object.prototype.toString);c="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var g="From previous event:";function b(e,n){if(t&&n.stack&&"object"==typeof e&&null!==e&&e.stack){for(var r=[],i=n;i;i=i.source)i.stack&&(!e.__minimumStackCounter__||e.__minimumStackCounter__>i.stackCounter)&&(h(e,"__minimumStackCounter__",{value:i.stackCounter,configurable:!0}),r.unshift(i.stack));r.unshift(e.stack);var o=function(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var i=e[r];!x(i)&&(-1===(o=i).indexOf("(module.js:")&&-1===o.indexOf("(node.js:"))&&i&&n.push(i)}var o;return n.join("\n")}(r.join("\n"+g+"\n"));h(e,"stack",{value:o,configurable:!0})}}function k(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function x(t){var e=k(t);if(!e)return!1;var i=e[0],o=e[1];return i===n&&o>=r&&o<=J}function w(){if(t)try{throw new Error}catch(t){var e=t.stack.split("\n"),r=k(e[0].indexOf("@")>0?e[1]:e[2]);if(!r)return;return n=r[0],r[1]}}function j(t){return t instanceof S?t:I(t)?(e=t,n=C(),j.nextTick(function(){try{e.then(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}}),n.promise):G(t);var e,n}j.resolve=j,j.nextTick=o,j.longStackSupport=!1;var _=1;function C(){var e,n=[],r=[],i=d(C.prototype),o=d(S.prototype);if(o.promiseDispatch=function(t,i,o){var a=u(arguments);n?(n.push(a),"when"===i&&o[1]&&r.push(o[1])):j.nextTick(function(){e.promiseDispatch.apply(e,a)})},o.valueOf=function(){if(n)return o;var t=O(e);return D(t)&&(e=t),t},o.inspect=function(){return e?e.inspect():{state:"pending"}},j.longStackSupport&&t)try{throw new Error}catch(t){o.stack=t.stack.substring(t.stack.indexOf("\n")+1),o.stackCounter=_++}function a(i){e=i,j.longStackSupport&&t&&(o.source=i),p(n,function(t,e){j.nextTick(function(){i.promiseDispatch.apply(i,e)})},void 0),n=void 0,r=void 0}return i.promise=o,i.resolve=function(t){e||a(j(t))},i.fulfill=function(t){e||a(G(t))},i.reject=function(t){e||a(U(t))},i.notify=function(t){e||p(r,function(e,n){j.nextTick(function(){n(t)})},void 0)},i}function V(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=C();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function R(t){return V(function(e,n){for(var r=0,i=t.length;r<i;r++)j(t[r]).then(e,n)})}function S(t,e,n){void 0===e&&(e=function(t){return U(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=d(S.prototype);if(r.promiseDispatch=function(n,i,o){var a;try{a=t[i]?t[i].apply(r,o):e.call(r,i,o)}catch(t){a=U(t)}n&&n(a)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function T(t,e,n,r){return j(t).then(e,n,r)}function O(t){if(D(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function D(t){return t instanceof S}function I(t){return(e=t)===Object(e)&&"function"==typeof t.then;var e}"object"==typeof e&&e&&Object({NODE_ENV:"production"})&&Object({NODE_ENV:"production"}).Q_DEBUG&&(j.longStackSupport=!0),j.defer=C,C.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(u(arguments,1)):t.resolve(n)}},j.Promise=V,j.promise=V,V.race=R,V.all=Q,V.reject=U,V.resolve=j,j.passByCopy=function(t){return t},S.prototype.passByCopy=function(){return this},j.join=function(t,e){return j(t).join(e)},S.prototype.join=function(t){return j([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Q can't join: not the same: "+t+" "+e)})},j.race=R,S.prototype.race=function(){return this.then(j.race)},j.makePromise=S,S.prototype.toString=function(){return"[object Promise]"},S.prototype.then=function(t,e,n){var r=this,i=C(),o=!1;return j.nextTick(function(){r.promiseDispatch(function(e){o||(o=!0,i.resolve(function(e){try{return"function"==typeof t?t(e):e}catch(t){return U(t)}}(e)))},"when",[function(t){o||(o=!0,i.resolve(function(t){if("function"==typeof e){b(t,r);try{return e(t)}catch(t){return U(t)}}return U(t)}(t)))}])}),r.promiseDispatch(void 0,"when",[void 0,function(t){var e,r=!1;try{e=function(t){return"function"==typeof n?n(t):t}(t)}catch(t){if(r=!0,!j.onerror)throw t;j.onerror(t)}r||i.notify(e)}]),i.promise},j.tap=function(t,e){return j(t).tap(e)},S.prototype.tap=function(t){return t=j(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},j.when=T,S.prototype.thenResolve=function(t){return this.then(function(){return t})},j.thenResolve=function(t,e){return j(t).thenResolve(e)},S.prototype.thenReject=function(t){return this.then(function(){throw t})},j.thenReject=function(t,e){return j(t).thenReject(e)},j.nearer=O,j.isPromise=D,j.isPromiseAlike=I,j.isPending=function(t){return D(t)&&"pending"===t.inspect().state},S.prototype.isPending=function(){return"pending"===this.inspect().state},j.isFulfilled=function(t){return!D(t)||"fulfilled"===t.inspect().state},S.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},j.isRejected=function(t){return D(t)&&"rejected"===t.inspect().state},S.prototype.isRejected=function(){return"rejected"===this.inspect().state};var E,L,A,P=[],$=[],N=[],F=!0;function M(){P.length=0,$.length=0,F||(F=!0)}function U(t){var n=S({when:function(n){return n&&function(t){if(F){var n=f($,t);-1!==n&&("object"==typeof e&&"function"==typeof e.emit&&j.nextTick.runAfter(function(){var r=f(N,t);-1!==r&&(e.emit("rejectionHandled",P[n],t),N.splice(r,1))}),$.splice(n,1),P.splice(n,1))}}(this),n?n(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return function(t,n){F&&("object"==typeof e&&"function"==typeof e.emit&&j.nextTick.runAfter(function(){-1!==f($,t)&&(e.emit("unhandledRejection",n,t),N.push(t))}),$.push(t),n&&void 0!==n.stack?P.push(n.stack):P.push("(no stack) "+n))}(n,t),n}function G(t){return S({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},delete:function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return y(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function B(t,e,n){return j(t).spread(e,n)}function q(t,e,n){return j(t).dispatch(e,n)}function Q(t){return T(t,function(t){var e=0,n=C();return p(t,function(r,i,o){var a;D(i)&&"fulfilled"===(a=i.inspect()).state?t[o]=a.value:(++e,T(i,function(r){t[o]=r,0==--e&&n.resolve(t)},n.reject,function(t){n.notify({index:o,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function z(t){if(0===t.length)return j.resolve();var e=j.defer(),n=0;return p(t,function(r,i,o){var a=t[o];n++,T(a,function(t){e.resolve(t)},function(t){if(0==--n){var r=t||new Error(""+t);r.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+r.message,e.reject(r)}},function(t){e.notify({index:o,value:t})})},void 0),e.promise}function H(t){return T(t,function(t){return t=l(t,j),T(Q(l(t,function(t){return T(t,i,i)})),function(){return t})})}j.resetUnhandledRejections=M,j.getUnhandledReasons=function(){return P.slice()},j.stopUnhandledRejectionTracking=function(){M(),F=!1},M(),j.reject=U,j.fulfill=G,j.master=function(t){return S({isDef:function(){}},function(e,n){return q(t,e,n)},function(){return j(t).inspect()})},j.spread=B,S.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},j.async=function(t){return function(){function e(t,e){var o;if("undefined"==typeof StopIteration){try{o=n[t](e)}catch(t){return U(t)}return o.done?j(o.value):T(o.value,r,i)}try{o=n[t](e)}catch(t){return function(t){return"[object StopIteration]"===m(t)||t instanceof c}(t)?j(t.value):U(t)}return T(o,r,i)}var n=t.apply(this,arguments),r=e.bind(e,"next"),i=e.bind(e,"throw");return r()}},j.spawn=function(t){j.done(j.async(t)())},j.return=function(t){throw new c(t)},j.promised=function(t){return function(){return B([this,Q(arguments)],function(e,n){return t.apply(e,n)})}},j.dispatch=q,S.prototype.dispatch=function(t,e){var n=this,r=C();return j.nextTick(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},j.get=function(t,e){return j(t).dispatch("get",[e])},S.prototype.get=function(t){return this.dispatch("get",[t])},j.set=function(t,e,n){return j(t).dispatch("set",[e,n])},S.prototype.set=function(t,e){return this.dispatch("set",[t,e])},j.del=j.delete=function(t,e){return j(t).dispatch("delete",[e])},S.prototype.del=S.prototype.delete=function(t){return this.dispatch("delete",[t])},j.mapply=j.post=function(t,e,n){return j(t).dispatch("post",[e,n])},S.prototype.mapply=S.prototype.post=function(t,e){return this.dispatch("post",[t,e])},j.send=j.mcall=j.invoke=function(t,e){return j(t).dispatch("post",[e,u(arguments,2)])},S.prototype.send=S.prototype.mcall=S.prototype.invoke=function(t){return this.dispatch("post",[t,u(arguments,1)])},j.fapply=function(t,e){return j(t).dispatch("apply",[void 0,e])},S.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},j.try=j.fcall=function(t){return j(t).dispatch("apply",[void 0,u(arguments,1)])},S.prototype.fcall=function(){return this.dispatch("apply",[void 0,u(arguments)])},j.fbind=function(t){var e=j(t),n=u(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(u(arguments))])}},S.prototype.fbind=function(){var t=this,e=u(arguments);return function(){return t.dispatch("apply",[this,e.concat(u(arguments))])}},j.keys=function(t){return j(t).dispatch("keys",[])},S.prototype.keys=function(){return this.dispatch("keys",[])},j.all=Q,S.prototype.all=function(){return Q(this)},j.any=z,S.prototype.any=function(){return z(this)},j.allResolved=(E=H,L="allResolved",A="allSettled",function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(L+" is deprecated, use "+A+" instead.",new Error("").stack),E.apply(E,arguments)}),S.prototype.allResolved=function(){return H(this)},j.allSettled=function(t){return j(t).allSettled()},S.prototype.allSettled=function(){return this.then(function(t){return Q(l(t,function(t){function e(){return t.inspect()}return(t=j(t)).then(e,e)}))})},j.fail=j.catch=function(t,e){return j(t).then(void 0,e)},S.prototype.fail=S.prototype.catch=function(t){return this.then(void 0,t)},j.progress=function(t,e){return j(t).then(void 0,void 0,e)},S.prototype.progress=function(t){return this.then(void 0,void 0,t)},j.fin=j.finally=function(t,e){return j(t).finally(e)},S.prototype.fin=S.prototype.finally=function(t){if(!t||"function"!=typeof t.apply)throw new Error("Q can't apply finally callback");return t=j(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},j.done=function(t,e,n,r){return j(t).done(e,n,r)},S.prototype.done=function(t,n,r){var i=function(t){j.nextTick(function(){if(b(t,o),!j.onerror)throw t;j.onerror(t)})},o=t||n||r?this.then(t,n,r):this;"object"==typeof e&&e&&e.domain&&(i=e.domain.bind(i)),o.then(void 0,i)},j.timeout=function(t,e,n){return j(t).timeout(e,n)},S.prototype.timeout=function(t,e){var n=C(),r=setTimeout(function(){e&&"string"!=typeof e||((e=new Error(e||"Timed out after "+t+" ms")).code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},j.delay=function(t,e){return void 0===e&&(e=t,t=void 0),j(t).delay(e)},S.prototype.delay=function(t){return this.then(function(e){var n=C();return setTimeout(function(){n.resolve(e)},t),n.promise})},j.nfapply=function(t,e){return j(t).nfapply(e)},S.prototype.nfapply=function(t){var e=C(),n=u(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},j.nfcall=function(t){var e=u(arguments,1);return j(t).nfapply(e)},S.prototype.nfcall=function(){var t=u(arguments),e=C();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},j.nfbind=j.denodeify=function(t){if(void 0===t)throw new Error("Q can't wrap an undefined function");var e=u(arguments,1);return function(){var n=e.concat(u(arguments)),r=C();return n.push(r.makeNodeResolver()),j(t).fapply(n).fail(r.reject),r.promise}},S.prototype.nfbind=S.prototype.denodeify=function(){var t=u(arguments);return t.unshift(this),j.denodeify.apply(void 0,t)},j.nbind=function(t,e){var n=u(arguments,2);return function(){var r=n.concat(u(arguments)),i=C();return r.push(i.makeNodeResolver()),j(function(){return t.apply(e,arguments)}).fapply(r).fail(i.reject),i.promise}},S.prototype.nbind=function(){var t=u(arguments,0);return t.unshift(this),j.nbind.apply(void 0,t)},j.nmapply=j.npost=function(t,e,n){return j(t).npost(e,n)},S.prototype.nmapply=S.prototype.npost=function(t,e){var n=u(e||[]),r=C();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},j.nsend=j.nmcall=j.ninvoke=function(t,e){var n=u(arguments,2),r=C();return n.push(r.makeNodeResolver()),j(t).dispatch("post",[e,n]).fail(r.reject),r.promise},S.prototype.nsend=S.prototype.nmcall=S.prototype.ninvoke=function(t){var e=u(arguments,1),n=C();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},j.nodeify=function(t,e){return j(t).nodeify(e)},S.prototype.nodeify=function(t){if(!t)return this;this.then(function(e){j.nextTick(function(){t(null,e)})},function(e){j.nextTick(function(){t(e)})})},j.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var J=w();return j})}).call(e,n("V0EG"))},AOsJ:function(t,e,n){n("H3hg"),t.exports=n("Rv9F").Object.keys},H3hg:function(t,e,n){var r=n("Myb3"),i=n("E5yg");n("tTxE")("keys",function(){return function(t){return i(r(t))}})},ZLEe:function(t,e,n){t.exports={default:n("AOsJ"),__esModule:!0}},aDBW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("3cXf"),i=n.n(r),o=n("ZLEe"),a=n.n(o),s=n("lC5x"),c=n.n(s),u=n("J0Oq"),p=n.n(u),f=n("kfHR"),l=n.n(f),d=n("4YfN"),h=n.n(d),v=n("xd7I"),y=n("YV7O"),m=n("wSez"),g=(n("CRWL"),n("PR0l")),b=n("4A4y"),k=n("HVJf"),x=n("i7YX"),w=n.n(x);v.default.component(m.Actionsheet.name,m.Actionsheet),v.default.component(m.Range.name,m.Range);var j={components:{mybanner:y.a},data:function(){return{rangeValue:0,sheetVisible:!1,picVal:[],FilesList:[],textareaVal:"",maxScore:0,isGrade:0,uploading:!1,playerOptions:{autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"3:4",fluid:!0,sources:[{src:"http://vjs.zencdn.net/v/oceans.mp4",type:"video/mp4"}],poster:"",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0},defaltVal:0},showVideo:!1}},computed:h()({},Object(k.d)({submitScoreData:function(t){return t.eggRecordDetails.submitScoreData},categoryListIndex:function(t){return t.eggRecordDetails.categoryListIndex},standardListIndex:function(t){return t.eggRecordDetails.standardListIndex},subcategories:function(t){return t.eggRecordDetails.subcategories},deductMarks:function(t){return t.eggRecordDetails.deductMarks},totalPoints:function(t){return t.eggRecordDetails.totalPoints}})),created:function(){this.isGrade=this.$route.query.isGrade;var t=this.submitScoreData.categoryList[this.categoryListIndex].standardList[this.standardListIndex];this.textareaVal=t.reason;var e=[].concat(t.urls||[]);this.picVal=e||[],this.defaltVal=t.deduct||0,this.rangeValue=t.deduct||0,this.maxScore=this.subcategories[this.categoryListIndex].total},beforeRouteLeave:function(t,e,n){var r=document.querySelector(".pswp"),i=document.querySelector(".pswp__button--close");"false"==r.getAttribute("aria-hidden")?(i.click(),n(!1)):this.uploading?(m.Indicator.close(),this.uploading=!1,n(!1)):n()},methods:h()({},Object(k.c)(["setSubmitScoreData","setSubcategories","setdeductMarks"]),{bindTexareaChange:w.a.debounce(function(t){var e=this.textareaVal.replace(/<\/?[^>]*>/g,"");e=e.replace(/[^\w\d.?!,;"。？《》！；<> “”\u4e00-\u9fa5]/g,""),this.textareaVal=e},300),bindSave:function(){var t=this.rangeValue,e=this.textareaVal,n=this.picVal,r=(this.defaltVal,t+this.deductMarks);if(r>this.totalPoints)Object(m.Toast)("扣分不能超过总分");else{var i=this.submitScoreData.categoryList[this.categoryListIndex].standardList[this.standardListIndex];i.reason=e,i.urls=n,i.deduct=t,this.setdeductMarks(r),this.setSubmitScoreData(this.submitScoreData),this.subcategories[this.categoryListIndex].standardList[this.$route.query.standardListIndex].status=!0,this.subcategories[this.categoryListIndex].standardList[this.$route.query.standardListIndex].deductMarks=t,this.setSubcategories(this.subcategories),this.$router.go(-1)}},_uploadFile:function(t){var e=this,n=this,r=l()(t.target.files);return new b.Promise(function(t,i){var o;r.map((o=p()(c.a.mark(function t(r,i){var o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!/^image|^video/.test(r.type)){t.next=8;break}if(!(r.size<1048576)){t.next=3;break}return t.abrupt("return");case 3:(o=new FileReader).readAsDataURL(r),o.onloadend=p()(c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(e=new Image).src=this.result,e.onload=p()(c.a.mark(function t(){var i,o,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=n.compress(e),o=n.dataURItoBlob(i),a=new File([o],r.name,{type:r.type}),r=a;case 4:case"end":return t.stop()}},t,this)}));case 3:case"end":return t.stop()}},t,this)})),t.next=9;break;case 8:Object(m.Toast)({message:"上传正确的格式",position:"middle",duration:2e3});case 9:case"end":return t.stop()}},t,e)})),function(t,e){return o.apply(this,arguments)})),t(r)})},bindUpload:function(t){var e=this;return p()(c.a.mark(function n(){var r,i,o,s,u;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(0!=t.target.files.length){n.next=2;break}return n.abrupt("return");case 2:if(!(a()(t.target.files).map(function(t){return/image/g.test(t.type)}).length>4)){n.next=6;break}return Object(m.Toast)("图片上传数量最多不超过5张"),n.abrupt("return");case 6:if(!(e.picVal.length>4)){n.next=9;break}return Object(m.Toast)("文件数量不可大于5个"),n.abrupt("return");case 9:if(!(e.picVal.map(function(t){return/.mp4$/.test(t)}).length>1)){n.next=13;break}return Object(m.Toast)("视频最多上传一个"),n.abrupt("return");case 13:return n.next=15,e._uploadFile(t);case 15:return r=n.sent,i=new FormData,r.map(function(t){i.append("dataFiles",t)}),i.append("prefix","cert-check-log"),e.uploading=!0,m.Indicator.open({text:"上传中...",spinnerType:"fading-circle"}),n.next=23,Object(g.u)(i);case 23:o=n.sent,s=o.data,u=s.list.map(function(t){return t.url}),e.picVal=e.picVal.concat(u),e.uploading=!1,m.Indicator.close();case 29:case"end":return n.stop()}},n,e)}))()},compress:function(t){var e=document.createElement("canvas"),n=e.getContext("2d"),r=(t.src.length,t.width),i=t.height;return e.width=r,e.height=i,n.fillStyle="#fff",n.fillRect(0,0,e.width,e.height),n.drawImage(t,0,0,r,i),e.toDataURL("image/jpeg",.1)},dataURItoBlob:function(t){var e;e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]);for(var n=t.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return new Blob([r],{type:n})},getCamcorder:function(){this.$refs.upload.setAttribute("capture","camcorder"),this.$refs.upload.setAttribute("accept","video/*"),this.$refs.upload.click()},getCamera:function(){this.$refs.upload.setAttribute("capture","camera"),this.$refs.upload.setAttribute("accept","image/*"),this.$refs.upload.click()},getPhoto:function(){this.$refs.upload.removeAttribute("capture"),this.$refs.upload.setAttribute("accept","image/*,video/*"),this.$refs.upload.click()},bindDeleteImg:function(t){this.picVal.splice(t,1),sessionStorage.setItem("urls",i()(this.picVal))},bindVideoClose:function(){this.showVideo=!1},bindPlay:function(t,e){this.showVideo=!0,this.playerOptions.sources[0].src=t}})},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"checkDetail"},[n("mybanner",{attrs:{title:t.$route.query.name}}),t._v(" "),n("div",{staticClass:"form"},[n("div",{staticClass:"editor"},[1!=t.isGrade?n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textareaVal,expression:"textareaVal"}],staticClass:"area",attrs:{name:"reason",placeholder:"请填写扣分原因",maxlength:"100"},domProps:{value:t.textareaVal},on:{input:[function(e){e.target.composing||(t.textareaVal=e.target.value)},t.bindTexareaChange]}}):n("div",{staticClass:"editor-readonly"},[t._v(t._s(t.textareaVal))]),t._v(" "),n("div",{staticClass:"upload"},[t._l(t.picVal,function(e,r){return n("div",{key:r,staticClass:"up-img"},[1!=t.isGrade?n("div",{staticClass:"up-del",on:{click:function(e){return t.bindDeleteImg(r)}}}):t._e(),t._v(" "),/png|jpg|jpeg|bmp/.test(e)?n("img",{staticClass:"source",attrs:{src:e,preview:!0,alt:""}}):t._e(),t._v(" "),/mp4/.test(e)?n("div",{staticClass:"video",on:{click:function(n){return t.bindPlay(e,r)}}}):t._e()])}),t._v(" "),n("input",{ref:"upload",attrs:{type:"file",hidden:"",multiple:""},on:{change:t.bindUpload}}),t._v(" "),1!=t.isGrade?n("div",{staticClass:"up-btn",on:{click:function(e){t.sheetVisible=!0}}}):t._e()],2)]),t._v(" "),t.uploading?t._e():n("div",{staticClass:"rangeBox"},[n("h2",[t._v("扣分：")]),t._v(" "),n("div",{staticClass:"range-rule"},[n("span",{staticClass:"tips"},[t._v("扣"+t._s(t.rangeValue)+"分")]),t._v(" "),n("div",{staticClass:"top"},[n("span",[t._v("0")]),n("span",[t._v(t._s(t.maxScore))])]),t._v(" "),t._m(0)]),t._v(" "),n("mt-range",{attrs:{disabled:1==t.isGrade,min:0,max:t.maxScore,step:1,"bar-height":12},model:{value:t.rangeValue,callback:function(e){t.rangeValue=e},expression:"rangeValue"}})],1),t._v(" "),1!=t.isGrade?n("button",{on:{click:t.bindSave}},[t._v("保存")]):t._e()]),t._v(" "),n("mt-actionsheet",{attrs:{actions:[{name:"拍照",method:t.getCamera},{name:"录像",method:t.getCamcorder},{name:"从手机相册选择",method:t.getPhoto}]},model:{value:t.sheetVisible,callback:function(e){t.sheetVisible=e},expression:"sheetVisible"}}),t._v(" "),t.showVideo?n("div",{staticClass:"video-box"},[n("div",{staticClass:"video-close",on:{click:t.bindVideoClose}}),t._v(" "),n("video-player",{ref:"myVideoPlayer",staticClass:"video-player",attrs:{playsinline:!0,options:t.playerOptions}})],1):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"rule"},[e("div",{staticClass:"li"}),this._v(" "),e("div",{staticClass:"li"}),this._v(" "),e("div",{staticClass:"li"}),this._v(" "),e("div",{staticClass:"li lis"}),this._v(" "),e("div",{staticClass:"li"}),this._v(" "),e("div",{staticClass:"li"}),this._v(" "),e("div",{staticClass:"li"})])}]};var C=n("C7Lr")(j,_,!1,function(t){n("0pFz")},"data-v-32d2b2cf",null);e.default=C.exports}});