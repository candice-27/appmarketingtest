webpackJsonp([66],{Mac7:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("3cXf"),o=a.n(s),n=a("4YfN"),r=a.n(n),i=(a("xd7I"),a("e1F6"),a("HVJf")),c=a("fzaL"),l=a("TVmP"),u={data:function(){return{height:"",marginTop:"",ajaxData:{},shop:"",unknow:"./static/images/avatar.png",svia:"./static/images/svia.png",via:"./static/images/via.png",typeName:""}},created:function(){var t=localStorage.getItem("ajaxData");this.ajaxData=JSON.parse(t);var e=localStorage.getItem("shops");JSON.parse(e).length>0&&(this.shop=JSON.parse(e)[0].name)},mounted:function(){this.isIPhoneX()},methods:{isIPhoneX:function(){var t=this.phoneSize();"iphonex"===t?(this.height="54.4",this.marginTop="-5.86"):this.height="49.26"},go:function(){this.$router.push({path:"/personalData"})}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("div",{staticClass:"compile"},[t._v("编辑")]),t._v(" "),a("div",{staticClass:"personalMsg"},[a("div",{staticClass:"imgs"},[1===t.ajaxData.sex?a("img",{attrs:{src:t.via,alt:""},on:{click:t.go}}):2===t.ajaxData.sex?a("img",{attrs:{src:t.svia,alt:""},on:{click:t.go}}):a("img",{attrs:{src:t.unknow,alt:""},on:{click:t.go}})]),t._v(" "),a("div",{staticClass:"personal-content"},[a("div",{staticClass:"name"},[a("span",[t.ajaxData.positionList?a("span",[t._v(t._s(t.ajaxData.positionList.typeName))]):t._e(),t._v(t._s(t.ajaxData.name))]),t._v(" "),a("span",[t._v("|")]),t._v(" "),a("span",[t._v(t._s(0===t.ajaxData.sex?"未知":1===t.ajaxData.sex?"男":"女"))])]),t._v(" "),a("div",{staticClass:"phoneNumber"},[a("p",{staticClass:"shop"},[t._v(t._s(t.shop))]),t._v(" "),a("p",[t._v(t._s(t.ajaxData.account))])])])])])},staticRenderFns:[]};var p=a("C7Lr")(u,m,!1,function(t){a("tRYV")},"data-v-5c563b47",null).exports,g=a("0xDb"),h=a("QS/x"),v=a("fi7s"),_=new g.a,x={name:"personMsg",components:{Footer:l.a,Header:p,btn:c.a,messageBox:v.a},data:function(){return{text:"退出账号",ListItem:["我的收藏","意见反馈","账户安全","关于我们"],key:!0,messageTip:{showMessageBox:!1,btnNum:1,type:!1,tip:"确定要退出账号吗?"},mergeBoxShow:!1,mergeBox:{tip:"",type:!1,btnNum:2},isMerge:!1,version:""}},created:function(){Object(h.a)(),this.checkLogin(),localStorage.removeItem("limit"),localStorage.removeItem("selectLimit"),this.setCustomerScroll(0),this.setOrderScroll(0),this.setDealScroll(0),this.$store.commit("setIsSelectStatus",!1),JSON.parse(localStorage.getItem("ajaxData")).account!==JSON.parse(localStorage.getItem("crmAccount")).crmAccount?"Dealer Boss"===_localAjax().typename||"Boss&Consultant"===_localAjax().typename||"Boss&Manager"===_localAjax().typename?this.isMerge=!1:this.isMerge=!0:this.isMerge=!1},mounted:function(){console.log("个人中心页面：",this.$root.token)},methods:r()({},Object(i.c)(["setCustomerScroll","setOrderScroll","setDealScroll","setIsSelectStatus"]),{setTime:function(){var t=this;this.key=!1;var e=0,a=JSON.parse(localStorage.getItem("loginData")).expires_in,s=setInterval(function(){e++,console.log(123,e),e===a&&(clearInterval(s),t.key=!0)},1e3)},checkLogin:function(){var t=localStorage.getItem("ajaxData");if(t){var e=JSON.parse(t).timestamp;e=Date.parse(new Date)-JSON.parse(t).timestamp,(e/=864e5)>10&&this.$router.replace({path:"./Login"})}else this.$router.replace({path:"./Login"})},routeTo:function(t){switch(t){case 0:this.$router.push({path:"/collectList"});break;case 1:this.$router.push({path:"/feedback"});break;case 2:this.$router.push({path:"/security"});break;case 3:this.$router.push({path:"/aboutUs"});break;case 4:console.log(4);break;default:return}},crmMerge:function(){var t=JSON.parse(localStorage.getItem("ajaxData")).account,e={tip:"当前APP登录账号为"+t+"，CRM登录账号"+JSON.parse(localStorage.getItem("crmAccount")).crmAccount+"，不一致，是否修改CRM登录账号为"+t+"，修改后使用"+t+"登录APP和CRM,是否确定修改？",btnNum:2,type:!1};this.mergeBox=e,this.mergeBoxShow=!0},quit:function(){this.messageTip.tip="确定要退出账号吗?",this.messageTip.btnNum=2,this.messageTip.showMessageBox=!0},remove:function(){var t=localStorage.getItem("deviceId");localStorage.clear(),t&&localStorage.setItem("deviceId",t),this.$router.push({path:"/login"}),this.messageTip.showMessageBox=!1},cancel:function(){this.messageTip.showMessageBox=!1},merge:function(){var t=this,e=JSON.parse(localStorage.getItem("ajaxData"));_.merge({userId:e.userId,account:e.account}).then(function(a){if(a.status){var s={tip:a.msg,btnNum:1,type:!0};t.mergeBox=s;var n=o()({crmAccount:e.account});localStorage.setItem("crmAccount",n)}else{var r={tip:a.msg,btnNum:1,type:!1};t.mergeBox=r}})},cancelMerge:function(){var t=JSON.parse(localStorage.getItem("ajaxData")).account,e=JSON.parse(localStorage.getItem("crmAccount")).crmAccount;this.isMerge=t!==e,this.mergeBoxShow=!1}}),beforeRouteLeave:function(t,e,a){"/feedback"===t.name&&(t.meta.isUseCache=!1,a()),t.meta.isUseCache=!1,a()}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"personalMsg"},[a("Header"),t._v(" "),a("ul",[t._l(t.ListItem,function(e,s){return a("li",{key:s,on:{click:function(e){return t.routeTo(s)}}},[3!==s?a("span",[t._v(t._s(e))]):a("div",{staticClass:"version"},[a("span",[t._v(t._s(e))]),a("span",{staticStyle:{color:"#666"}},[t._v("版本 2.0.0")])]),t._v(" "),t._m(0,!0)])}),t._v(" "),t.isMerge?a("li",{on:{click:t.crmMerge}},[a("span",[t._v("同步CRM账号")]),t._v(" "),t._m(1)]):t._e()],2),t._v(" "),a("btn",{attrs:{text:t.text},nativeOn:{click:function(e){return t.quit()}}}),t._v(" "),t.messageTip.showMessageBox?a("message-box",{attrs:{type:t.messageTip.type,btnNum:t.messageTip.btnNum},scopedSlots:t._u([{key:"btn-group",fn:function(){return[a("button",{attrs:{type:"button"},on:{click:t.remove}},[t._v("确定")]),t._v(" "),a("button",{attrs:{type:"button"},on:{click:t.cancel}},[t._v("取消")])]},proxy:!0},{key:"btn",fn:function(){return[a("button",{attrs:{type:"button"},on:{click:t.cancel}},[t._v("确定")])]},proxy:!0}],null,!1,2621546085)},[t._v("\n    "+t._s(t.messageTip.tip)+"\n    ")]):t._e(),t._v(" "),a("message-box",t._b({directives:[{name:"show",rawName:"v-show",value:t.mergeBoxShow,expression:"mergeBoxShow"}],scopedSlots:t._u([{key:"btn-group",fn:function(){return[a("button",{attrs:{type:"button"},on:{click:t.merge}},[t._v("确定")]),t._v(" "),a("button",{attrs:{type:"button"},on:{click:t.cancelMerge}},[t._v("取消")])]},proxy:!0},{key:"btn",fn:function(){return[a("button",{attrs:{type:"button"},on:{click:t.cancelMerge}},[t._v("确定")])]},proxy:!0}])},"message-box",t.mergeBox,!1),[a("p",{attrs:{id:"tip"}},[t._v(t._s(t.mergeBox.tip))])]),t._v(" "),a("Footer")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon-right"},[e("img",{staticClass:"pub-img",attrs:{src:a("4ral"),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon-right"},[e("img",{staticClass:"pub-img",attrs:{src:a("4ral"),alt:""}})])}]};var S=a("C7Lr")(x,f,!1,function(t){a("nxjp")},"data-v-1f20fcd8",null);e.default=S.exports},nxjp:function(t,e){},tRYV:function(t,e){}});
//# sourceMappingURL=66.6075eb0c40156a111457.js.map