webpackJsonp([66],{AKMq:function(t,s){},WZ8B:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i("4YfN"),e=i.n(a),o=i("HVJf"),n=i("srjt"),l=i("0xDb"),r=(i("vGYV"),i("wSez")),c=i("xd7I"),h=new l.a;c.default.component(r.Loadmore.name,r.Loadmore);var u={props:["id"],data:function(){return{allLoaded:!1,list:[],page:1,limit:10,typeId:"",key:!1,noData:!1,account:""}},computed:e()({},Object(o.d)({parmas:function(t){return t.treeList.parmas},listScroll:function(t){return t.loadmore.listScroll},msManageList:function(t){return t.loadmore.msManageList},artList:function(t){return t.loadmore.artList},listAllScroll:function(t){return t.loadmore.listAllScroll}})),watch:{parmas:function(){if(this.hasData(),this.key){var t=this.getId();if(console.log("00",t),this.hasList(t)===this.msManageList.length){this.getInitList([]);var s=this.getCategoriesId(1,10);s=this.setType(s),this.getArticlesList(s)}else this.getList(t),this.allLoaded=!1;this.listenScrollTop()}else this.initGetData(),this.key=!0}},created:function(){this.account=this._localAjax().account},mounted:function(){1!==this.$route.query.type?this.listenScrollTop():this.initData()},methods:e()({},Object(o.c)(["setListScroll","getList","setMsManageList","getInitList","getScroll","setListAllScroll","initSrcoll","setBaseUrl"]),{recordScrollPosition:function(t){var s=this.getId();if(0!==t.target.scrollTop){var i={id:s,scroll:t.target.scrollTop};this.setListAllScroll(i)}},listenScrollTop:function(){var t=this,s=this.getId();this.$refs.myScroll.addEventListener("scroll",this.recordScrollPosition,!1),this.getScroll(s),this.$nextTick(function(){t.$refs.myScroll.scrollTop=t.listScroll})},hasData:function(){var t=this.getId(),s=void 0;this.msManageList.forEach(function(i){i[0].id===t&&(s=i[1].list)}),s&&s.length?this.noData=!1:this.noData=!0},initData:function(){this.setListScroll(0),this.$refs.myScroll.scrollTop=this.listScroll,this.initSrcoll([])},setType:function(t){if(this.typeId=this.$route.query.classify,console.log(123,this.typeId),this.typeId)return"1"===this.typeId?this.$set(t,"classify",1):"2"===this.typeId&&this.$set(t,"classify",2),t},initGetData:function(){var t=this,s=this.getCategoriesId(1,10);s=this.setType(s),h.getArticles(s).then(function(s){t.saveList(s.data),t.getInitList(s.data),t.listenScrollTop(),s.data&&s.data.length<10&&(t.allLoaded=!0),t.hasData()})},getArticlesList:function(t){var s=this,i=this.getId();console.log("w",i),h.getArticles(t).then(function(t){t.data&&(t.data.length?(s.allLoaded=!1,s.list=s.artList.concat(t.data),s.saveList(s.list),s.getList(i),s.listenScrollTop()):(s.getList(i),s.allLoaded=!0))})},getCategoriesId:function(t,s){var i=this.$route.query.id,a={};if(console.log("www",this.parmas),this.parmas.name1&&!this.parmas.name2)a={categoryId:i,subCateId:this.parmas.name1,account:this.account,page:t,limit:s},console.log("234",a);else if(this.parmas.name1&&this.parmas.name2){a={categoryId:i,subCateId:this.parmas.name1,subCate2Id:this.parmas.name2,account:this.account,page:t,limit:s}}else a={categoryId:i,account:this.account,page:t,limit:s};return a},getId:function(){return this.parmas.name2?this.parmas.name2:this.parmas.name1},saveList:function(t){var s=[{id:this.getId()},{list:t}];this.setMsManageList(s),this.hasData()},hasList:function(t){var s=0;return this.msManageList.forEach(function(i){i[0].id==t?s-=1:s+=1}),s},toArticle:function(t){this.$router.push({path:"/articleDetails",query:{articleId:this.artList[t].id,name:this.$route.query.name}})},loadBottom:function(){this.$refs.load.onBottomLoaded(),this.pullDownData()},pullDownData:function(){this.allLoaded=!0,console.log("artlist",this.artList.length);var t=this.artList.length/10+1;if(Math.floor(t)<t)this.allLoaded=!0;else{this.page=t,console.log(this.page);var s=this.getCategoriesId(this.page,this.limit);s=this.setType(s),this.getArticlesList(s)}}})},m={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{ref:"myScroll",staticClass:"listComp"},[i("ul",[i("mt-loadmore",{ref:"load",attrs:{"bottom-method":t.loadBottom,"bottom-all-loaded":t.allLoaded,"auto-fill":!1}},t._l(t.artList,function(s,a){return i("li",{key:a,on:{click:function(s){return s.preventDefault(),t.toArticle(a)}}},[i("div",{staticClass:"list_left"},[i("h1",[i("img",{directives:[{name:"show",rawName:"v-show",value:""!==s.logoImageUrl,expression:"item.logoImageUrl!==''"}],attrs:{src:s.logoImageUrl}}),t._v(t._s(s.title))]),t._v(" "),i("div",{staticClass:"list_bottom"},[s.top?i("span",{staticClass:"top"},[t._v("置顶")]):t._e(),t._v(" "),i("span",{staticClass:"time"},[t._v(t._s(s.createTime)+"  "+t._s(s.author))])])]),t._v(" "),i("div",{staticClass:"list_right"},[i("img",{staticClass:"img",attrs:{src:s.image,alt:""}})])])}),0)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.noData,expression:"noData"}],staticClass:"search_nothing"},[i("p",[t._v("很抱歉，没有找到相关内容")]),t._v(" "),i("div",{staticClass:"search_bg"})])])},staticRenderFns:[]};var d=i("C7Lr")(u,m,!1,function(t){i("jU6X")},"data-v-1ac602ce",null).exports,p=i("YV7O"),g=(i("t7k9"),{components:{treeList:n.a,listComp:d,banner:p.a},data:function(){return{listComp:"listComp",title:"",paddingTop:"",hasSubData:""}},computed:e()({},Object(o.d)({list:function(t){return t.treeList.list},parmas:function(t){return t.treeList.parmas}})),watch:{parmas:function(){this.init()},list:function(){this.hasSub(),this.hasSubData?this.listComp="listComp":this.initTop()}},created:function(){this.initParmas(),this.initTitile(),this.isIPhoneX()},mounted:function(){this.init()},methods:e()({},Object(o.c)(["setParmas"]),{initTitile:function(){this.title=this.$route.query.name},initParmas:function(){1===this.$route.query.type&&this.setParmas({})},getParmas:function(t){this.setParmas(t)},getStatus:function(t){this.listComp=t?"listComp":"listComp1"},initTop:function(){this.list.length&&(this.list[0].subCateList?this.listComp="listComp":this.list[0].subCateList||(this.parmas.name1&&this.parmas.name2?this.listComp="listComp":this.listComp="listComp1"))},init:function(){this.parmas.name1||(this.listComp="listComp0")},hasSub:function(){var t=this;this.parmas&&!this.parmas.name1||this.list.map(function(s,i){s.id===t.parmas.name1&&s.subCateList&&s.subCateList.length&&(t.hasSubData=!0)})},isIPhoneX:function(){var t=this.phoneSize();this.paddingTop="iphonex"===t?"22":"16"}})}),f={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"policy paddingTop"},[s("banner",{attrs:{title:this.title}}),this._v(" "),s("div",{staticClass:"treeList"},[s("treeList",{style:{paddingTop:this.paddingTop+"vw"},attrs:{getParmas:this.getParmas,getStatus:this.getStatus}})],1),this._v(" "),s("listComp",{class:this.listComp})],1)},staticRenderFns:[]};var v=i("C7Lr")(g,f,!1,function(t){i("AKMq")},"data-v-dc0d2b00",null);s.default=v.exports},jU6X:function(t,s){}});
//# sourceMappingURL=66.cf45d5ba9e21021ca007.js.map